!function(){function a(b,c,d){function e(g,h){if(!c[g]){if(!b[g]){var i="function"==typeof require&&require;if(!h&&i)return i(g,!0);if(f)return f(g,!0);var j=new Error("Cannot find module '"+g+"'");throw j.code="MODULE_NOT_FOUND",j}var k=c[g]={exports:{}};b[g][0].call(k.exports,function(a){var c=b[g][1][a];return e(c||a)},k,k.exports,a,b,c,d)}return c[g].exports}for(var f="function"==typeof require&&require,g=0;g<d.length;g++)e(d[g]);return e}return a}()({1:[function(a,b,c){"use strict";function d(a){return function(){return a}}var e=function(){};e.thatReturns=d,e.thatReturnsFalse=d(!1),e.thatReturnsTrue=d(!0),e.thatReturnsNull=d(null),e.thatReturnsThis=function(){return this},e.thatReturnsArgument=function(a){return a},b.exports=e},{}],2:[function(a,b,c){(function(a){"use strict";var c={};"production"!==a.env.NODE_ENV&&Object.freeze(c),b.exports=c}).call(this,a("_process"))},{_process:7}],3:[function(a,b,c){(function(a){"use strict";function c(a,b,c,e,f,g,h,i){if(d(b),!a){var j;if(void 0===b)j=new Error("Minified exception occurred; use the non-minified dev environment for the full error message and additional helpful warnings.");else{var k=[c,e,f,g,h,i],l=0;j=new Error(b.replace(/%s/g,function(){return k[l++]})),j.name="Invariant Violation"}throw j.framesToPop=1,j}}var d=function(a){};"production"!==a.env.NODE_ENV&&(d=function(a){if(void 0===a)throw new Error("invariant requires an error message argument")}),b.exports=c}).call(this,a("_process"))},{_process:7}],4:[function(a,b,c){(function(c){"use strict";var d=a("./emptyFunction"),e=d;if("production"!==c.env.NODE_ENV){var f=function(a){for(var b=arguments.length,c=Array(b>1?b-1:0),d=1;d<b;d++)c[d-1]=arguments[d];var e=0,f="Warning: "+a.replace(/%s/g,function(){return c[e++]});"undefined"!=typeof console&&console.error(f);try{throw new Error(f)}catch(g){}};e=function(a,b){if(void 0===b)throw new Error("`warning(condition, format, ...args)` requires a warning message argument");if(0!==b.indexOf("Failed Composite propType: ")&&!a){for(var c=arguments.length,d=Array(c>2?c-2:0),e=2;e<c;e++)d[e-2]=arguments[e];f.apply(void 0,[b].concat(d))}}}b.exports=e}).call(this,a("_process"))},{"./emptyFunction":1,_process:7}],5:[function(a,b,c){"use strict";function d(a){if(null===a||void 0===a)throw new TypeError("Object.assign cannot be called with null or undefined");return Object(a)}function e(){try{if(!Object.assign)return!1;var a=new String("abc");if(a[5]="de","5"===Object.getOwnPropertyNames(a)[0])return!1;for(var b={},c=0;c<10;c++)b["_"+String.fromCharCode(c)]=c;var d=Object.getOwnPropertyNames(b).map(function(a){return b[a]});if("0123456789"!==d.join(""))return!1;var e={};return"abcdefghijklmnopqrst".split("").forEach(function(a){e[a]=a}),"abcdefghijklmnopqrst"===Object.keys(Object.assign({},e)).join("")}catch(f){return!1}}var f=Object.getOwnPropertySymbols,g=Object.prototype.hasOwnProperty,h=Object.prototype.propertyIsEnumerable;b.exports=e()?Object.assign:function(a,b){for(var c,e,i=d(a),j=1;j<arguments.length;j++){c=Object(arguments[j]);for(var k in c)g.call(c,k)&&(i[k]=c[k]);if(f){e=f(c);for(var l=0;l<e.length;l++)h.call(c,e[l])&&(i[e[l]]=c[e[l]])}}return i}},{}],6:[function(a,b,c){!function(a,d){if("object"==typeof c&&"object"==typeof b)b.exports=d();else if("function"==typeof define&&define.amd)define([],d);else{var e=d();for(var f in e)("object"==typeof c?c:a)[f]=e[f]}}(window,function(){return function(a){function b(d){if(c[d])return c[d].exports;var e=c[d]={i:d,l:!1,exports:{}};return a[d].call(e.exports,e,e.exports,b),e.l=!0,e.exports}var c={};return b.m=a,b.c=c,b.d=function(a,c,d){b.o(a,c)||Object.defineProperty(a,c,{enumerable:!0,get:d})},b.r=function(a){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(a,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(a,"__esModule",{value:!0})},b.t=function(a,c){if(1&c&&(a=b(a)),8&c)return a;if(4&c&&"object"==typeof a&&a&&a.__esModule)return a;var d=Object.create(null);if(b.r(d),Object.defineProperty(d,"default",{enumerable:!0,value:a}),2&c&&"string"!=typeof a)for(var e in a)b.d(d,e,function(b){return a[b]}.bind(null,e));return d},b.n=function(a){var c=a&&a.__esModule?function(){return a["default"]}:function(){return a};return b.d(c,"a",c),c},b.o=function(a,b){return Object.prototype.hasOwnProperty.call(a,b)},b.p="",b(b.s=45)}([function(a,b,c){"use strict";Object.defineProperty(b,"__esModule",{value:!0});var d=function(){function a(a,b){for(var c=0;c<b.length;c++){var d=b[c];d.enumerable=d.enumerable||!1,d.configurable=!0,"value"in d&&(d.writable=!0),Object.defineProperty(a,d.key,d)}}return function(b,c,d){return c&&a(b.prototype,c),d&&a(b,d),b}}(),e={debug:function(){},info:function(){},warn:function(){},error:function(){}},f=void 0,g=void 0;(b.Log=function(){function a(){!function(a,b){if(!(a instanceof b))throw new TypeError("Cannot call a class as a function")}(this,a)}return a.reset=function(){g=3,f=e},a.debug=function(){if(g>=4){for(var a=arguments.length,b=Array(a),c=0;c<a;c++)b[c]=arguments[c];f.debug.apply(f,Array.from(b))}},a.info=function(){if(g>=3){for(var a=arguments.length,b=Array(a),c=0;c<a;c++)b[c]=arguments[c];f.info.apply(f,Array.from(b))}},a.warn=function(){if(g>=2){for(var a=arguments.length,b=Array(a),c=0;c<a;c++)b[c]=arguments[c];f.warn.apply(f,Array.from(b))}},a.error=function(){if(g>=1){for(var a=arguments.length,b=Array(a),c=0;c<a;c++)b[c]=arguments[c];f.error.apply(f,Array.from(b))}},d(a,null,[{key:"NONE",get:function(){return 0}},{key:"ERROR",get:function(){return 1}},{key:"WARN",get:function(){return 2}},{key:"INFO",get:function(){return 3}},{key:"DEBUG",get:function(){return 4}},{key:"level",get:function(){return g},set:function(a){if(!(0<=a&&a<=4))throw new Error("Invalid log level");g=a}},{key:"logger",get:function(){return f},set:function(a){if(!a.debug&&a.info&&(a.debug=a.info),!(a.debug&&a.info&&a.warn&&a.error))throw new Error("Invalid logger");f=a}}]),a}()).reset()},function(a,b,c){"use strict";Object.defineProperty(b,"__esModule",{value:!0});var d=function(){function a(a,b){for(var c=0;c<b.length;c++){var d=b[c];d.enumerable=d.enumerable||!1,d.configurable=!0,"value"in d&&(d.writable=!0),Object.defineProperty(a,d.key,d)}}return function(b,c,d){return c&&a(b.prototype,c),d&&a(b,d),b}}(),e={setInterval:function(a){function b(b,c){return a.apply(this,arguments)}return b.toString=function(){return a.toString()},b}(function(a,b){return setInterval(a,b)}),clearInterval:function(a){function b(b){return a.apply(this,arguments)}return b.toString=function(){return a.toString()},b}(function(a){return clearInterval(a)})},f=!1,g=null;b.Global=function(){function a(){!function(a,b){if(!(a instanceof b))throw new TypeError("Cannot call a class as a function")}(this,a)}return a._testing=function(){f=!0},a.setXMLHttpRequest=function(a){g=a},d(a,null,[{key:"location",get:function(){if(!f)return location}},{key:"localStorage",get:function(){if(!f&&"undefined"!=typeof window)return localStorage}},{key:"sessionStorage",get:function(){if(!f&&"undefined"!=typeof window)return sessionStorage}},{key:"XMLHttpRequest",get:function(){if(!f&&"undefined"!=typeof window)return g||XMLHttpRequest}},{key:"timer",get:function(){if(!f)return e}}]),a}()},function(a,b,c){"use strict";Object.defineProperty(b,"__esModule",{value:!0}),b.UrlUtility=void 0;var d=c(0),e=c(1);b.UrlUtility=function(){function a(){!function(a,b){if(!(a instanceof b))throw new TypeError("Cannot call a class as a function")}(this,a)}return a.addQueryParam=function(a,b,c){return a.indexOf("?")<0&&(a+="?"),"?"!==a[a.length-1]&&(a+="&"),a+=encodeURIComponent(b),a+="=",a+=encodeURIComponent(c)},a.parseUrlFragment=function(a){var b=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"#",c=arguments.length>2&&void 0!==arguments[2]?arguments[2]:e.Global;"string"!=typeof a&&(a=c.location.href);var f=a.lastIndexOf(b);f>=0&&(a=a.substr(f+1));for(var g,h={},i=/([^&=]+)=([^&]*)/g,j=0;g=i.exec(a);)if(h[decodeURIComponent(g[1])]=decodeURIComponent(g[2]),j++>50)return d.Log.error("UrlUtility.parseUrlFragment: response exceeded expected number of parameters",a),{error:"Response exceeded expected number of parameters"};for(var k in h)return h;return{}},a}()},function(a,b,c){"use strict";Object.defineProperty(b,"__esModule",{value:!0}),b.MetadataService=void 0;var d=function(){function a(a,b){for(var c=0;c<b.length;c++){var d=b[c];d.enumerable=d.enumerable||!1,d.configurable=!0,"value"in d&&(d.writable=!0),Object.defineProperty(a,d.key,d)}}return function(b,c,d){return c&&a(b.prototype,c),d&&a(b,d),b}}(),e=c(0),f=c(17);b.MetadataService=function(){function a(b){var c=arguments.length>1&&void 0!==arguments[1]?arguments[1]:f.JsonService;if(function(a,b){if(!(a instanceof b))throw new TypeError("Cannot call a class as a function")}(this,a),!b)throw e.Log.error("MetadataService: No settings passed to MetadataService"),new Error("settings");this._settings=b,this._jsonService=new c(["application/jwk-set+json"])}return a.prototype.getMetadata=function(){var a=this;return this._settings.metadata?(e.Log.debug("MetadataService.getMetadata: Returning metadata from settings"),Promise.resolve(this._settings.metadata)):this.metadataUrl?(e.Log.debug("MetadataService.getMetadata: getting metadata from",this.metadataUrl),this._jsonService.getJson(this.metadataUrl).then(function(b){return e.Log.debug("MetadataService.getMetadata: json received"),a._settings.metadata=b,b})):(e.Log.error("MetadataService.getMetadata: No authority or metadataUrl configured on settings"),Promise.reject(new Error("No authority or metadataUrl configured on settings")))},a.prototype.getIssuer=function(){return this._getMetadataProperty("issuer")},a.prototype.getAuthorizationEndpoint=function(){return this._getMetadataProperty("authorization_endpoint")},a.prototype.getUserInfoEndpoint=function(){return this._getMetadataProperty("userinfo_endpoint")},a.prototype.getTokenEndpoint=function(){return this._getMetadataProperty("token_endpoint",!0)},a.prototype.getCheckSessionIframe=function(){return this._getMetadataProperty("check_session_iframe",!0)},a.prototype.getEndSessionEndpoint=function(){return this._getMetadataProperty("end_session_endpoint",!0)},a.prototype.getRevocationEndpoint=function(){return this._getMetadataProperty("revocation_endpoint",!0)},a.prototype._getMetadataProperty=function(a){var b=arguments.length>1&&void 0!==arguments[1]&&arguments[1];return e.Log.debug("MetadataService.getMetadataProperty for: "+a),this.getMetadata().then(function(c){if(e.Log.debug("MetadataService.getMetadataProperty: metadata recieved"),void 0===c[a]){if(!0===b)return void e.Log.warn("MetadataService.getMetadataProperty: Metadata does not contain optional property "+a);throw e.Log.error("MetadataService.getMetadataProperty: Metadata does not contain property "+a),new Error("Metadata does not contain property "+a)}return c[a]})},a.prototype.getSigningKeys=function(){var a=this;return this._settings.signingKeys?(e.Log.debug("MetadataService.getSigningKeys: Returning signingKeys from settings"),Promise.resolve(this._settings.signingKeys)):this._getMetadataProperty("jwks_uri").then(function(b){return e.Log.debug("MetadataService.getSigningKeys: jwks_uri received",b),a._jsonService.getJson(b).then(function(b){if(e.Log.debug("MetadataService.getSigningKeys: key set received",b),!b.keys)throw e.Log.error("MetadataService.getSigningKeys: Missing keys on keyset"),new Error("Missing keys on keyset");return a._settings.signingKeys=b.keys,a._settings.signingKeys})})},d(a,[{key:"metadataUrl",get:function(){return this._metadataUrl||(this._settings.metadataUrl?this._metadataUrl=this._settings.metadataUrl:(this._metadataUrl=this._settings.authority,this._metadataUrl&&this._metadataUrl.indexOf(".well-known/openid-configuration")<0&&("/"!==this._metadataUrl[this._metadataUrl.length-1]&&(this._metadataUrl+="/"),this._metadataUrl+=".well-known/openid-configuration"))),this._metadataUrl}}]),a}()},function(a,b,c){"use strict";Object.defineProperty(b,"__esModule",{value:!0}),b.State=void 0;var d=function(){function a(a,b){for(var c=0;c<b.length;c++){var d=b[c];d.enumerable=d.enumerable||!1,d.configurable=!0,"value"in d&&(d.writable=!0),Object.defineProperty(a,d.key,d)}}return function(b,c,d){return c&&a(b.prototype,c),d&&a(b,d),b}}(),e=c(0),f=function(a){return a&&a.__esModule?a:{"default":a}}(c(14));b.State=function(){function a(){var b=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},c=b.id,d=b.data,e=b.created;!function(a,b){if(!(a instanceof b))throw new TypeError("Cannot call a class as a function")}(this,a),this._id=c||(0,f["default"])(),this._data=d,this._created="number"==typeof e&&e>0?e:parseInt(Date.now()/1e3)}return a.prototype.toStorageString=function(){return e.Log.debug("State.toStorageString"),JSON.stringify({id:this.id,data:this.data,created:this.created})},a.fromStorageString=function(b){return e.Log.debug("State.fromStorageString"),new a(JSON.parse(b))},a.clearStaleState=function(b,c){var d=Date.now()/1e3-c;return b.getAllKeys().then(function(c){e.Log.debug("State.clearStaleState: got keys",c);for(var f=[],g=function(g){var h=c[g];i=b.get(h).then(function(b){var c=!1;if(b)try{var f=a.fromStorageString(b);e.Log.debug("State.clearStaleState: got item from key: ",h,f.created),f.created<=d&&(c=!0)}catch(g){e.Log.error("State.clearStaleState: Error parsing state for key",h,g.message),c=!0}else e.Log.debug("State.clearStaleState: no item in storage for key: ",h),c=!0;if(c)return e.Log.debug("State.clearStaleState: removed item for key: ",h),g.remove(h)}),f.push(i)},h=0;h<c.length;h++){var i;g(h)}return e.Log.debug("State.clearStaleState: waiting on promise count:",f.length),Promise.all(f)})},d(a,[{key:"id",get:function(){return this._id}},{key:"data",get:function(){return this._data}},{key:"created",get:function(){return this._created}}]),a}()},function(a,b,c){"use strict";Object.defineProperty(b,"__esModule",{value:!0}),b.WebStorageStateStore=void 0;var d=c(0),e=c(1);b.WebStorageStateStore=function(){function a(){var b=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},c=b.prefix,d=void 0===c?"oidc.":c,f=b.store,g=void 0===f?e.Global.localStorage:f;!function(a,b){if(!(a instanceof b))throw new TypeError("Cannot call a class as a function")}(this,a),this._store=g,this._prefix=d}return a.prototype.set=function(a,b){return d.Log.debug("WebStorageStateStore.set",a),a=this._prefix+a,this._store.setItem(a,b),Promise.resolve()},a.prototype.get=function(a){d.Log.debug("WebStorageStateStore.get",a),a=this._prefix+a;var b=this._store.getItem(a);return Promise.resolve(b)},a.prototype.remove=function(a){d.Log.debug("WebStorageStateStore.remove",a),a=this._prefix+a;var b=this._store.getItem(a);return this._store.removeItem(a),Promise.resolve(b)},a.prototype.getAllKeys=function(){d.Log.debug("WebStorageStateStore.getAllKeys");for(var a=[],b=0;b<this._store.length;b++){var c=this._store.key(b);0===c.indexOf(this._prefix)&&a.push(c.substr(this._prefix.length))}return Promise.resolve(a)},a}()},function(a,b,c){"use strict";Object.defineProperty(b,"__esModule",{value:!0}),b.OidcClientSettings=void 0;var d="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(a){return typeof a}:function(a){return a&&"function"==typeof Symbol&&a.constructor===Symbol&&a!==Symbol.prototype?"symbol":typeof a},e=function(){function a(a,b){for(var c=0;c<b.length;c++){var d=b[c];d.enumerable=d.enumerable||!1,d.configurable=!0,"value"in d&&(d.writable=!0),Object.defineProperty(a,d.key,d)}}return function(b,c,d){return c&&a(b.prototype,c),d&&a(b,d),b}}(),f=c(0),g=c(5),h=c(44),i=c(3),j="id_token",k="openid",l=900,m=300;b.OidcClientSettings=function(){function a(){var b=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},c=b.authority,e=b.metadataUrl,f=b.metadata,n=b.signingKeys,o=b.client_id,p=b.client_secret,q=b.response_type,r=void 0===q?j:q,s=b.scope,t=void 0===s?k:s,u=b.redirect_uri,v=b.post_logout_redirect_uri,w=b.prompt,x=b.display,y=b.max_age,z=b.ui_locales,A=b.acr_values,B=b.resource,C=b.filterProtocolClaims,D=void 0===C||C,E=b.loadUserInfo,F=void 0===E||E,G=b.staleStateAge,H=void 0===G?l:G,I=b.clockSkew,J=void 0===I?m:I,K=b.stateStore,L=void 0===K?new g.WebStorageStateStore:K,M=b.ResponseValidatorCtor,N=void 0===M?h.ResponseValidator:M,O=b.MetadataServiceCtor,P=void 0===O?i.MetadataService:O,Q=b.extraQueryParams,R=void 0===Q?{}:Q;!function(a,b){if(!(a instanceof b))throw new TypeError("Cannot call a class as a function")}(this,a),this._authority=c,this._metadataUrl=e,this._metadata=f,this._signingKeys=n,this._client_id=o,this._client_secret=p,this._response_type=r,this._scope=t,this._redirect_uri=u,this._post_logout_redirect_uri=v,this._prompt=w,this._display=x,this._max_age=y,this._ui_locales=z,this._acr_values=A,this._resource=B,this._filterProtocolClaims=!!D,this._loadUserInfo=!!F,this._staleStateAge=H,this._clockSkew=J,this._stateStore=L,this._validator=new N(this),this._metadataService=new P(this),this._extraQueryParams="object"===(void 0===R?"undefined":d(R))?R:{}}return e(a,[{key:"client_id",get:function(){return this._client_id},set:function(a){if(this._client_id)throw f.Log.error("OidcClientSettings.set_client_id: client_id has already been assigned."),new Error("client_id has already been assigned.");this._client_id=a}},{key:"client_secret",get:function(){return this._client_secret}},{key:"response_type",get:function(){return this._response_type}},{key:"scope",get:function(){return this._scope}},{key:"redirect_uri",get:function(){return this._redirect_uri}},{key:"post_logout_redirect_uri",get:function(){return this._post_logout_redirect_uri}},{key:"prompt",get:function(){return this._prompt}},{key:"display",get:function(){return this._display}},{key:"max_age",get:function(){return this._max_age}},{key:"ui_locales",get:function(){return this._ui_locales}},{key:"acr_values",get:function(){return this._acr_values}},{key:"resource",get:function(){return this._resource}},{key:"authority",get:function(){return this._authority},set:function(a){if(this._authority)throw f.Log.error("OidcClientSettings.set_authority: authority has already been assigned."),new Error("authority has already been assigned.");this._authority=a}},{key:"metadataUrl",get:function(){return this._metadataUrl||(this._metadataUrl=this.authority,this._metadataUrl&&this._metadataUrl.indexOf(".well-known/openid-configuration")<0&&("/"!==this._metadataUrl[this._metadataUrl.length-1]&&(this._metadataUrl+="/"),this._metadataUrl+=".well-known/openid-configuration")),this._metadataUrl}},{key:"metadata",get:function(){return this._metadata},set:function(a){this._metadata=a}},{key:"signingKeys",get:function(){return this._signingKeys},set:function(a){this._signingKeys=a}},{key:"filterProtocolClaims",get:function(){return this._filterProtocolClaims}},{key:"loadUserInfo",get:function(){return this._loadUserInfo}},{key:"staleStateAge",get:function(){return this._staleStateAge}},{key:"clockSkew",get:function(){return this._clockSkew}},{key:"stateStore",get:function(){return this._stateStore}},{key:"validator",get:function(){return this._validator}},{key:"metadataService",get:function(){return this._metadataService}},{key:"extraQueryParams",get:function(){return this._extraQueryParams},set:function(a){"object"===(void 0===a?"undefined":d(a))?this._extraQueryParams=a:this._extraQueryParams={}}}]),a}()},function(a,b,c){"use strict";Object.defineProperty(b,"__esModule",{value:!0}),b.CordovaPopupWindow=void 0;var d=function(){function a(a,b){for(var c=0;c<b.length;c++){var d=b[c];d.enumerable=d.enumerable||!1,d.configurable=!0,"value"in d&&(d.writable=!0),Object.defineProperty(a,d.key,d)}}return function(b,c,d){return c&&a(b.prototype,c),d&&a(b,d),b}}(),e=c(0),f="location=no,toolbar=no,zoom=no",g="_blank";b.CordovaPopupWindow=function(){function a(b){var c=this;!function(a,b){if(!(a instanceof b))throw new TypeError("Cannot call a class as a function")}(this,a),this._promise=new Promise(function(a,b){c._resolve=a,c._reject=b}),this.features=b.popupWindowFeatures||f,this.target=b.popupWindowTarget||g,this.redirect_uri=b.startUrl,e.Log.debug("CordovaPopupWindow.ctor: redirect_uri: "+this.redirect_uri)}return a.prototype._isInAppBrowserInstalled=function(a){return["cordova-plugin-inappbrowser","cordova-plugin-inappbrowser.inappbrowser","org.apache.cordova.inappbrowser"].some(function(b){return a.hasOwnProperty(b)})},a.prototype.navigate=function(a){if(a&&a.url){if(!window.cordova)return this._error("cordova is undefined");var b=window.cordova.require("cordova/plugin_list").metadata;if(!1===this._isInAppBrowserInstalled(b))return this._error("InAppBrowser plugin not found");this._popup=cordova.InAppBrowser.open(a.url,this.target,this.features),this._popup?(e.Log.debug("CordovaPopupWindow.navigate: popup successfully created"),this._exitCallbackEvent=this._exitCallback.bind(this),this._loadStartCallbackEvent=this._loadStartCallback.bind(this),this._popup.addEventListener("exit",this._exitCallbackEvent,!1),this._popup.addEventListener("loadstart",this._loadStartCallbackEvent,!1)):this._error("Error opening popup window")}else this._error("No url provided");return this.promise},a.prototype._loadStartCallback=function(a){0===a.url.indexOf(this.redirect_uri)&&this._success({url:a.url})},a.prototype._exitCallback=function(a){this._error(a)},a.prototype._success=function(a){this._cleanup(),e.Log.debug("CordovaPopupWindow: Successful response from cordova popup window"),this._resolve(a)},a.prototype._error=function(a){this._cleanup(),e.Log.error(a),this._reject(new Error(a))},a.prototype.close=function(){this._cleanup()},a.prototype._cleanup=function(){this._popup&&(e.Log.debug("CordovaPopupWindow: cleaning up popup"),this._popup.removeEventListener("exit",this._exitCallbackEvent,!1),this._popup.removeEventListener("loadstart",this._loadStartCallbackEvent,!1),this._popup.close()),this._popup=null},d(a,[{key:"promise",get:function(){return this._promise}}]),a}()},function(a,b,c){"use strict";Object.defineProperty(b,"__esModule",{value:!0}),b.TokenRevocationClient=void 0;var d=c(0),e=c(3),f=c(1);b.TokenRevocationClient=function(){function a(b){var c=arguments.length>1&&void 0!==arguments[1]?arguments[1]:f.Global.XMLHttpRequest,g=arguments.length>2&&void 0!==arguments[2]?arguments[2]:e.MetadataService;if(function(a,b){if(!(a instanceof b))throw new TypeError("Cannot call a class as a function")}(this,a),!b)throw d.Log.error("TokenRevocationClient.ctor: No settings provided"),new Error("No settings provided.");this._settings=b,this._XMLHttpRequestCtor=c,this._metadataService=new g(this._settings)}return a.prototype.revoke=function(a,b){var c=this;if(!a)throw d.Log.error("TokenRevocationClient.revoke: No accessToken provided"),new Error("No accessToken provided.");return this._metadataService.getRevocationEndpoint().then(function(e){if(e){d.Log.error("TokenRevocationClient.revoke: Revoking access token");var f=c._settings.client_id,g=c._settings.client_secret;return c._revoke(e,f,g,a)}if(b)throw d.Log.error("TokenRevocationClient.revoke: Revocation not supported"),new Error("Revocation not supported")})},a.prototype._revoke=function(a,b,c,e){var f=this;return new Promise(function(g,h){var i=new f._XMLHttpRequestCtor;i.open("POST",a),i.onload=function(){d.Log.debug("TokenRevocationClient.revoke: HTTP response received, status",i.status),200===i.status?g():h(Error(i.statusText+" ("+i.status+")"))};var j="client_id="+encodeURIComponent(b);c&&(j+="&client_secret="+encodeURIComponent(c)),j+="&token_type_hint="+encodeURIComponent("access_token"),j+="&token="+encodeURIComponent(e),i.setRequestHeader("Content-Type","application/x-www-form-urlencoded"),i.send(j)})},a}()},function(a,b,c){"use strict";Object.defineProperty(b,"__esModule",{value:!0}),b.CheckSessionIFrame=void 0;var d=c(0),e=2e3;b.CheckSessionIFrame=function(){function a(b,c,d,f){var g=!(arguments.length>4&&void 0!==arguments[4])||arguments[4];!function(a,b){if(!(a instanceof b))throw new TypeError("Cannot call a class as a function")}(this,a),this._callback=b,this._client_id=c,this._url=d,this._interval=f||e,this._stopOnError=g;var h=d.indexOf("/",d.indexOf("//")+2);this._frame_origin=d.substr(0,h),this._frame=window.document.createElement("iframe"),this._frame.style.visibility="hidden",this._frame.style.position="absolute",this._frame.style.display="none",this._frame.style.width=0,this._frame.style.height=0,this._frame.src=d}return a.prototype.load=function(){var a=this;return new Promise(function(b){a._frame.onload=function(){b()},window.document.body.appendChild(a._frame),a._boundMessageEvent=a._message.bind(a),window.addEventListener("message",a._boundMessageEvent,!1)})},a.prototype._message=function(a){a.origin===this._frame_origin&&a.source===this._frame.contentWindow&&("error"===a.data?(d.Log.error("CheckSessionIFrame: error message from check session op iframe"),this._stopOnError&&this.stop()):"changed"===a.data?(d.Log.debug("CheckSessionIFrame: changed message from check session op iframe"),this.stop(),this._callback()):d.Log.debug("CheckSessionIFrame: "+a.data+" message from check session op iframe"))},a.prototype.start=function(a){var b=this;if(this._session_state!==a){d.Log.debug("CheckSessionIFrame.start"),this.stop(),this._session_state=a;var c=function(){b._frame.contentWindow.postMessage(b._client_id+" "+b._session_state,b._frame_origin)};c(),this._timer=window.setInterval(c,this._interval)}},a.prototype.stop=function(){this._session_state=null,this._timer&&(d.Log.debug("CheckSessionIFrame.stop"),window.clearInterval(this._timer),this._timer=null)},a}()},function(a,b,c){"use strict";Object.defineProperty(b,"__esModule",{value:!0}),b.SessionMonitor=void 0;var d=function(){function a(a,b){for(var c=0;c<b.length;c++){var d=b[c];d.enumerable=d.enumerable||!1,d.configurable=!0,"value"in d&&(d.writable=!0),Object.defineProperty(a,d.key,d)}}return function(b,c,d){return c&&a(b.prototype,c),d&&a(b,d),b}}(),e=c(0),f=c(9);b.SessionMonitor=function(){function a(b){var c=this,d=arguments.length>1&&void 0!==arguments[1]?arguments[1]:f.CheckSessionIFrame;if(function(a,b){if(!(a instanceof b))throw new TypeError("Cannot call a class as a function")}(this,a),!b)throw e.Log.error("SessionMonitor.ctor: No user manager passed to SessionMonitor"),new Error("userManager");this._userManager=b,this._CheckSessionIFrameCtor=d,this._userManager.events.addUserLoaded(this._start.bind(this)),this._userManager.events.addUserUnloaded(this._stop.bind(this)),this._userManager.getUser().then(function(a){a&&c._start(a)})["catch"](function(a){e.Log.error("SessionMonitor ctor: error from getUser:",a.message)})}return a.prototype._start=function(a){var b=this,c=a.session_state;c&&(this._sub=a.profile.sub,this._sid=a.profile.sid,e.Log.debug("SessionMonitor._start: session_state:",c,", sub:",this._sub),this._checkSessionIFrame?this._checkSessionIFrame.start(c):this._metadataService.getCheckSessionIframe().then(function(a){if(a){e.Log.debug("SessionMonitor._start: Initializing check session iframe");var d=b._client_id,f=b._checkSessionInterval,g=b._stopCheckSessionOnError;b._checkSessionIFrame=new b._CheckSessionIFrameCtor(b._callback.bind(b),d,a,f,g),b._checkSessionIFrame.load().then(function(){b._checkSessionIFrame.start(c)})}else e.Log.warn("SessionMonitor._start: No check session iframe found in the metadata")})["catch"](function(a){e.Log.error("SessionMonitor._start: Error from getCheckSessionIframe:",a.message)}))},a.prototype._stop=function(){this._sub=null,this._sid=null,this._checkSessionIFrame&&(e.Log.debug("SessionMonitor._stop"),this._checkSessionIFrame.stop())},a.prototype._callback=function(){var a=this;this._userManager.querySessionStatus().then(function(b){var c=!0;b?b.sub===a._sub?(c=!1,a._checkSessionIFrame.start(b.session_state),b.sid===a._sid?e.Log.debug("SessionMonitor._callback: Same sub still logged in at OP, restarting check session iframe; session_state:",b.session_state):(e.Log.debug("SessionMonitor._callback: Same sub still logged in at OP, session state has changed, restarting check session iframe; session_state:",b.session_state),a._userManager.events._raiseUserSessionChanged())):e.Log.debug("SessionMonitor._callback: Different subject signed into OP:",b.sub):e.Log.debug("SessionMonitor._callback: Subject no longer signed into OP"),c&&(e.Log.debug("SessionMonitor._callback: SessionMonitor._callback; raising signed out event"),a._userManager.events._raiseUserSignedOut())})["catch"](function(b){e.Log.debug("SessionMonitor._callback: Error calling queryCurrentSigninSession; raising signed out event",b.message),a._userManager.events._raiseUserSignedOut()})},d(a,[{key:"_settings",get:function(){return this._userManager.settings}},{key:"_metadataService",get:function(){return this._userManager.metadataService}},{key:"_client_id",get:function(){return this._settings.client_id}},{key:"_checkSessionInterval",get:function(){return this._settings.checkSessionInterval}},{key:"_stopCheckSessionOnError",get:function(){return this._settings.stopCheckSessionOnError}}]),a}()},function(a,b,c){"use strict";Object.defineProperty(b,"__esModule",{value:!0}),b.Event=void 0;var d=c(0);b.Event=function(){function a(b){!function(a,b){if(!(a instanceof b))throw new TypeError("Cannot call a class as a function")}(this,a),this._name=b,this._callbacks=[]}return a.prototype.addHandler=function(a){this._callbacks.push(a)},a.prototype.removeHandler=function(a){var b=this._callbacks.findIndex(function(b){return b===a});b>=0&&this._callbacks.splice(b,1)},a.prototype.raise=function(){d.Log.debug("Event: Raising event: "+this._name);for(var a=0;a<this._callbacks.length;a++){var b;(b=this._callbacks)[a].apply(b,arguments)}},a}()},function(a,b,c){"use strict";Object.defineProperty(b,"__esModule",{value:!0}),b.AccessTokenEvents=void 0;var d=c(0),e=c(22),f=60;b.AccessTokenEvents=function(){function a(){var b=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},c=b.accessTokenExpiringNotificationTime,d=void 0===c?f:c,g=b.accessTokenExpiringTimer,h=void 0===g?new e.Timer("Access token expiring"):g,i=b.accessTokenExpiredTimer,j=void 0===i?new e.Timer("Access token expired"):i;!function(a,b){if(!(a instanceof b))throw new TypeError("Cannot call a class as a function")}(this,a),this._accessTokenExpiringNotificationTime=d,this._accessTokenExpiring=h,this._accessTokenExpired=j}return a.prototype.load=function(a){if(a.access_token&&void 0!==a.expires_in){var b=a.expires_in;if(d.Log.debug("AccessTokenEvents.load: access token present, remaining duration:",b),b>0){var c=b-this._accessTokenExpiringNotificationTime;c<=0&&(c=1),d.Log.debug("AccessTokenEvents.load: registering expiring timer in:",c),this._accessTokenExpiring.init(c)}else d.Log.debug("AccessTokenEvents.load: canceling existing expiring timer becase we're past expiration."),this._accessTokenExpiring.cancel();var e=b+1;d.Log.debug("AccessTokenEvents.load: registering expired timer in:",e),this._accessTokenExpired.init(e)}else this._accessTokenExpiring.cancel(),this._accessTokenExpired.cancel()},a.prototype.unload=function(){d.Log.debug("AccessTokenEvents.unload: canceling existing access token timers"),this._accessTokenExpiring.cancel(),this._accessTokenExpired.cancel()},a.prototype.addAccessTokenExpiring=function(a){this._accessTokenExpiring.addHandler(a)},a.prototype.removeAccessTokenExpiring=function(a){this._accessTokenExpiring.removeHandler(a)},a.prototype.addAccessTokenExpired=function(a){this._accessTokenExpired.addHandler(a)},a.prototype.removeAccessTokenExpired=function(a){this._accessTokenExpired.removeHandler(a)},a}()},function(a,b,c){"use strict";Object.defineProperty(b,"__esModule",{value:!0}),b.User=void 0;var d=function(){function a(a,b){for(var c=0;c<b.length;c++){var d=b[c];d.enumerable=d.enumerable||!1,d.configurable=!0,"value"in d&&(d.writable=!0),Object.defineProperty(a,d.key,d)}}return function(b,c,d){return c&&a(b.prototype,c),d&&a(b,d),b}}(),e=c(0);b.User=function(){function a(b){var c=b.id_token,d=b.session_state,e=b.access_token,f=b.token_type,g=b.scope,h=b.profile,i=b.expires_at,j=b.state;
!function(a,b){if(!(a instanceof b))throw new TypeError("Cannot call a class as a function")}(this,a),this.id_token=c,this.session_state=d,this.access_token=e,this.token_type=f,this.scope=g,this.profile=h,this.expires_at=i,this.state=j}return a.prototype.toStorageString=function(){return e.Log.debug("User.toStorageString"),JSON.stringify({id_token:this.id_token,session_state:this.session_state,access_token:this.access_token,token_type:this.token_type,scope:this.scope,profile:this.profile,expires_at:this.expires_at})},a.fromStorageString=function(b){return e.Log.debug("User.fromStorageString"),new a(JSON.parse(b))},d(a,[{key:"expires_in",get:function(){if(this.expires_at){var a=parseInt(Date.now()/1e3);return this.expires_at-a}}},{key:"expired",get:function(){var a=this.expires_in;if(void 0!==a)return a<=0}},{key:"scopes",get:function(){return(this.scope||"").split(" ")}}]),a}()},function(a,b,c){"use strict";Object.defineProperty(b,"__esModule",{value:!0}),b["default"]=function(){for(var a="xxxxxxxxxxxx4xxxyxxxxxxxxxxxxxxx",b="0123456789abcdef",c=0,d="",e=0;e<a.length;e++)"-"!==a[e]&&"4"!==a[e]&&(c=16*Math.random()|0),"x"===a[e]?d+=b[c]:"y"===a[e]?(c&=3,d+=b[c|=8]):d+=a[e];return d},a.exports=b["default"]},function(a,b,c){"use strict";Object.defineProperty(b,"__esModule",{value:!0}),b.SigninState=void 0;var d=function(){function a(a,b){for(var c=0;c<b.length;c++){var d=b[c];d.enumerable=d.enumerable||!1,d.configurable=!0,"value"in d&&(d.writable=!0),Object.defineProperty(a,d.key,d)}}return function(b,c,d){return c&&a(b.prototype,c),d&&a(b,d),b}}(),e=c(0),f=c(4),g=function(a){return a&&a.__esModule?a:{"default":a}}(c(14));b.SigninState=function(a){function b(){var c=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},d=c.nonce,e=c.authority,f=c.client_id;!function(a,b){if(!(a instanceof b))throw new TypeError("Cannot call a class as a function")}(this,b);var h=function(a,b){if(!a)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!b||"object"!=typeof b&&"function"!=typeof b?a:b}(this,a.call(this,arguments[0]));return!0===d?h._nonce=(0,g["default"])():d&&(h._nonce=d),h._authority=e,h._client_id=f,h}return function(a,b){if("function"!=typeof b&&null!==b)throw new TypeError("Super expression must either be null or a function, not "+typeof b);a.prototype=Object.create(b&&b.prototype,{constructor:{value:a,enumerable:!1,writable:!0,configurable:!0}}),b&&(Object.setPrototypeOf?Object.setPrototypeOf(a,b):a.__proto__=b)}(b,a),b.prototype.toStorageString=function(){return e.Log.debug("SigninState.toStorageString"),JSON.stringify({id:this.id,data:this.data,created:this.created,nonce:this.nonce,authority:this.authority,client_id:this.client_id})},b.fromStorageString=function(a){return e.Log.debug("SigninState.fromStorageString"),new b(JSON.parse(a))},d(b,[{key:"nonce",get:function(){return this._nonce}},{key:"authority",get:function(){return this._authority}},{key:"client_id",get:function(){return this._client_id}}]),b}(f.State)},function(a,b,c){"use strict";Object.defineProperty(b,"__esModule",{value:!0}),b.ErrorResponse=void 0;var d=c(0);b.ErrorResponse=function(a){function b(){var c=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},e=c.error,f=c.error_description,g=c.error_uri,h=c.state;if(function(a,b){if(!(a instanceof b))throw new TypeError("Cannot call a class as a function")}(this,b),!e)throw d.Log.error("No error passed to ErrorResponse"),new Error("error");var i=function(a,b){if(!a)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!b||"object"!=typeof b&&"function"!=typeof b?a:b}(this,a.call(this,f||e));return i.name="ErrorResponse",i.error=e,i.error_description=f,i.error_uri=g,i.state=h,i}return function(a,b){if("function"!=typeof b&&null!==b)throw new TypeError("Super expression must either be null or a function, not "+typeof b);a.prototype=Object.create(b&&b.prototype,{constructor:{value:a,enumerable:!1,writable:!0,configurable:!0}}),b&&(Object.setPrototypeOf?Object.setPrototypeOf(a,b):a.__proto__=b)}(b,a),b}(Error)},function(a,b,c){"use strict";Object.defineProperty(b,"__esModule",{value:!0}),b.JsonService=void 0;var d=c(0),e=c(1);b.JsonService=function(){function a(){var b=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null,c=arguments.length>1&&void 0!==arguments[1]?arguments[1]:e.Global.XMLHttpRequest;!function(a,b){if(!(a instanceof b))throw new TypeError("Cannot call a class as a function")}(this,a),b&&Array.isArray(b)?this._contentTypes=b.slice():this._contentTypes=[],this._contentTypes.push("application/json"),this._XMLHttpRequest=c}return a.prototype.getJson=function(a,b){var c=this;if(!a)throw d.Log.error("JsonService.getJson: No url passed"),new Error("url");return d.Log.debug("JsonService.getJson, url: ",a),new Promise(function(e,f){var g=new c._XMLHttpRequest;g.open("GET",a);var h=c._contentTypes;g.onload=function(){if(d.Log.debug("JsonService.getJson: HTTP response received, status",g.status),200===g.status){var a=g.getResponseHeader("Content-Type");if(a&&h.find(function(b){if(a.startsWith(b))return!0}))try{return void e(JSON.parse(g.responseText))}catch(b){return d.Log.error("JsonService.getJson: Error parsing JSON response",b.message),void f(b)}f(Error("Invalid response Content-Type: "+a+", from URL: "+b))}else f(Error(g.statusText+" ("+g.status+")"))},g.onerror=function(){d.Log.error("JsonService.getJson: network error"),f(Error("Network Error"))},b&&(d.Log.debug("JsonService.getJson: token passed, setting Authorization header"),g.setRequestHeader("Authorization","Bearer "+b)),g.send()})},a}()},function(a,b,c){"use strict";Object.defineProperty(b,"__esModule",{value:!0}),b.OidcClient=void 0;var d=function(){function a(a,b){for(var c=0;c<b.length;c++){var d=b[c];d.enumerable=d.enumerable||!1,d.configurable=!0,"value"in d&&(d.writable=!0),Object.defineProperty(a,d.key,d)}}return function(b,c,d){return c&&a(b.prototype,c),d&&a(b,d),b}}(),e=c(0),f=c(6),g=c(16),h=c(35),i=c(34),j=c(33),k=c(32),l=c(15),m=c(4);b.OidcClient=function(){function a(){var b=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};!function(a,b){if(!(a instanceof b))throw new TypeError("Cannot call a class as a function")}(this,a),b instanceof f.OidcClientSettings?this._settings=b:this._settings=new f.OidcClientSettings(b)}return a.prototype.createSigninRequest=function(){var a=this,b=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},c=b.response_type,d=b.scope,f=b.redirect_uri,g=b.data,i=b.state,j=b.prompt,k=b.display,l=b.max_age,m=b.ui_locales,n=b.id_token_hint,o=b.login_hint,p=b.acr_values,q=b.resource,r=b.request,s=b.request_uri,t=b.extraQueryParams,u=arguments[1];e.Log.debug("OidcClient.createSigninRequest");var v=this._settings.client_id;c=c||this._settings.response_type,d=d||this._settings.scope,f=f||this._settings.redirect_uri,j=j||this._settings.prompt,k=k||this._settings.display,l=l||this._settings.max_age,m=m||this._settings.ui_locales,p=p||this._settings.acr_values,q=q||this._settings.resource,t=t||this._settings.extraQueryParams;var w=this._settings.authority;return this._metadataService.getAuthorizationEndpoint().then(function(b){e.Log.debug("OidcClient.createSigninRequest: Received authorization endpoint",b);var x=new h.SigninRequest({url:b,client_id:v,redirect_uri:f,response_type:c,scope:d,data:g||i,authority:w,prompt:j,display:k,max_age:l,ui_locales:m,id_token_hint:n,login_hint:o,acr_values:p,resource:q,request:r,request_uri:s,extraQueryParams:t}),y=x.state;return(u=u||a._stateStore).set(y.id,y.toStorageString()).then(function(){return x})})},a.prototype.processSigninResponse=function(a,b){var c=this;e.Log.debug("OidcClient.processSigninResponse");var d=new i.SigninResponse(a);return d.state?(b=b||this._stateStore).remove(d.state).then(function(a){if(!a)throw e.Log.error("OidcClient.processSigninResponse: No matching state found in storage"),new Error("No matching state found in storage");var b=l.SigninState.fromStorageString(a);return e.Log.debug("OidcClient.processSigninResponse: Received state from storage; validating response"),c._validator.validateSigninResponse(b,d)}):(e.Log.error("OidcClient.processSigninResponse: No state in response"),Promise.reject(new Error("No state in response")))},a.prototype.createSignoutRequest=function(){var a=this,b=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},c=b.id_token_hint,d=b.data,f=b.state,g=b.post_logout_redirect_uri,h=arguments[1];return e.Log.debug("OidcClient.createSignoutRequest"),g=g||this._settings.post_logout_redirect_uri,this._metadataService.getEndSessionEndpoint().then(function(b){if(!b)throw e.Log.error("OidcClient.createSignoutRequest: No end session endpoint url returned"),new Error("no end session endpoint");e.Log.debug("OidcClient.createSignoutRequest: Received end session endpoint",b);var i=new j.SignoutRequest({url:b,id_token_hint:c,post_logout_redirect_uri:g,data:d||f}),k=i.state;return k&&(e.Log.debug("OidcClient.createSignoutRequest: Signout request has state to persist"),(h=h||a._stateStore).set(k.id,k.toStorageString())),i})},a.prototype.processSignoutResponse=function(a,b){var c=this;e.Log.debug("OidcClient.processSignoutResponse");var d=new k.SignoutResponse(a);if(!d.state)return e.Log.debug("OidcClient.processSignoutResponse: No state in response"),d.error?(e.Log.warn("OidcClient.processSignoutResponse: Response was error: ",d.error),Promise.reject(new g.ErrorResponse(d))):Promise.resolve(d);var f=d.state;return(b=b||this._stateStore).remove(f).then(function(a){if(!a)throw e.Log.error("OidcClient.processSignoutResponse: No matching state found in storage"),new Error("No matching state found in storage");var b=m.State.fromStorageString(a);return e.Log.debug("OidcClient.processSignoutResponse: Received state from storage; validating response"),c._validator.validateSignoutResponse(b,d)})},a.prototype.clearStaleState=function(a){return e.Log.debug("OidcClient.clearStaleState"),a=a||this._stateStore,m.State.clearStaleState(a,this.settings.staleStateAge)},d(a,[{key:"_stateStore",get:function(){return this.settings.stateStore}},{key:"_validator",get:function(){return this.settings.validator}},{key:"_metadataService",get:function(){return this.settings.metadataService}},{key:"settings",get:function(){return this._settings}},{key:"metadataService",get:function(){return this._metadataService}}]),a}()},function(a,b,c){"use strict";Object.defineProperty(b,"__esModule",{value:!0}),b.CordovaIFrameNavigator=void 0;var d=c(7);b.CordovaIFrameNavigator=function(){function a(){!function(a,b){if(!(a instanceof b))throw new TypeError("Cannot call a class as a function")}(this,a)}return a.prototype.prepare=function(a){a.popupWindowFeatures="hidden=yes";var b=new d.CordovaPopupWindow(a);return Promise.resolve(b)},a}()},function(a,b,c){"use strict";Object.defineProperty(b,"__esModule",{value:!0}),b.CordovaPopupNavigator=void 0;var d=c(7);b.CordovaPopupNavigator=function(){function a(){!function(a,b){if(!(a instanceof b))throw new TypeError("Cannot call a class as a function")}(this,a)}return a.prototype.prepare=function(a){var b=new d.CordovaPopupWindow(a);return Promise.resolve(b)},a}()},function(a,b,c){"use strict";Object.defineProperty(b,"__esModule",{value:!0}),b.SilentRenewService=void 0;var d=c(0);b.SilentRenewService=function(){function a(b){!function(a,b){if(!(a instanceof b))throw new TypeError("Cannot call a class as a function")}(this,a),this._userManager=b}return a.prototype.start=function(){this._callback||(this._callback=this._tokenExpiring.bind(this),this._userManager.events.addAccessTokenExpiring(this._callback),this._userManager.getUser().then(function(a){})["catch"](function(a){d.Log.error("SilentRenewService.start: Error from getUser:",a.message)}))},a.prototype.stop=function(){this._callback&&(this._userManager.events.removeAccessTokenExpiring(this._callback),delete this._callback)},a.prototype._tokenExpiring=function(){var a=this;this._userManager.signinSilent().then(function(a){d.Log.debug("SilentRenewService._tokenExpiring: Silent token renewal successful")},function(b){d.Log.error("SilentRenewService._tokenExpiring: Error from signinSilent:",b.message),a._userManager.events._raiseSilentRenewError(b)})},a}()},function(a,b,c){"use strict";Object.defineProperty(b,"__esModule",{value:!0}),b.Timer=void 0;var d=function(){function a(a,b){for(var c=0;c<b.length;c++){var d=b[c];d.enumerable=d.enumerable||!1,d.configurable=!0,"value"in d&&(d.writable=!0),Object.defineProperty(a,d.key,d)}}return function(b,c,d){return c&&a(b.prototype,c),d&&a(b,d),b}}(),e=c(0),f=c(1),g=c(11);b.Timer=function(a){function b(c){var d=arguments.length>1&&void 0!==arguments[1]?arguments[1]:f.Global.timer,e=arguments.length>2&&void 0!==arguments[2]?arguments[2]:void 0;!function(a,b){if(!(a instanceof b))throw new TypeError("Cannot call a class as a function")}(this,b);var g=function(a,b){if(!a)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!b||"object"!=typeof b&&"function"!=typeof b?a:b}(this,a.call(this,c));return g._timer=d,g._nowFunc=e||function(){return Date.now()/1e3},g}return function(a,b){if("function"!=typeof b&&null!==b)throw new TypeError("Super expression must either be null or a function, not "+typeof b);a.prototype=Object.create(b&&b.prototype,{constructor:{value:a,enumerable:!1,writable:!0,configurable:!0}}),b&&(Object.setPrototypeOf?Object.setPrototypeOf(a,b):a.__proto__=b)}(b,a),b.prototype.init=function(a){a<=0&&(a=1),a=parseInt(a);var b=this.now+a;if(this.expiration===b&&this._timerHandle)e.Log.debug("Timer.init timer "+this._name+" skipping initialization since already initialized for expiration:",this.expiration);else{this.cancel(),e.Log.debug("Timer.init timer "+this._name+" for duration:",a),this._expiration=b;var c=5;a<c&&(c=a),this._timerHandle=this._timer.setInterval(this._callback.bind(this),1e3*c)}},b.prototype.cancel=function(){this._timerHandle&&(e.Log.debug("Timer.cancel: ",this._name),this._timer.clearInterval(this._timerHandle),this._timerHandle=null)},b.prototype._callback=function(){var b=this._expiration-this.now;e.Log.debug("Timer.callback; "+this._name+" timer expires in:",b),this._expiration<=this.now&&(this.cancel(),a.prototype.raise.call(this))},d(b,[{key:"now",get:function(){return parseInt(this._nowFunc())}},{key:"expiration",get:function(){return this._expiration}}]),b}(g.Event)},function(a,b,c){"use strict";Object.defineProperty(b,"__esModule",{value:!0}),b.UserManagerEvents=void 0;var d=c(0),e=c(12),f=c(11);b.UserManagerEvents=function(a){function b(c){!function(a,b){if(!(a instanceof b))throw new TypeError("Cannot call a class as a function")}(this,b);var d=function(a,b){if(!a)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!b||"object"!=typeof b&&"function"!=typeof b?a:b}(this,a.call(this,c));return d._userLoaded=new f.Event("User loaded"),d._userUnloaded=new f.Event("User unloaded"),d._silentRenewError=new f.Event("Silent renew error"),d._userSignedOut=new f.Event("User signed out"),d._userSessionChanged=new f.Event("User session changed"),d}return function(a,b){if("function"!=typeof b&&null!==b)throw new TypeError("Super expression must either be null or a function, not "+typeof b);a.prototype=Object.create(b&&b.prototype,{constructor:{value:a,enumerable:!1,writable:!0,configurable:!0}}),b&&(Object.setPrototypeOf?Object.setPrototypeOf(a,b):a.__proto__=b)}(b,a),b.prototype.load=function(b){var c=!(arguments.length>1&&void 0!==arguments[1])||arguments[1];d.Log.debug("UserManagerEvents.load"),a.prototype.load.call(this,b),c&&this._userLoaded.raise(b)},b.prototype.unload=function(){d.Log.debug("UserManagerEvents.unload"),a.prototype.unload.call(this),this._userUnloaded.raise()},b.prototype.addUserLoaded=function(a){this._userLoaded.addHandler(a)},b.prototype.removeUserLoaded=function(a){this._userLoaded.removeHandler(a)},b.prototype.addUserUnloaded=function(a){this._userUnloaded.addHandler(a)},b.prototype.removeUserUnloaded=function(a){this._userUnloaded.removeHandler(a)},b.prototype.addSilentRenewError=function(a){this._silentRenewError.addHandler(a)},b.prototype.removeSilentRenewError=function(a){this._silentRenewError.removeHandler(a)},b.prototype._raiseSilentRenewError=function(a){d.Log.debug("UserManagerEvents._raiseSilentRenewError",a.message),this._silentRenewError.raise(a)},b.prototype.addUserSignedOut=function(a){this._userSignedOut.addHandler(a)},b.prototype.removeUserSignedOut=function(a){this._userSignedOut.removeHandler(a)},b.prototype._raiseUserSignedOut=function(a){d.Log.debug("UserManagerEvents._raiseUserSignedOut"),this._userSignedOut.raise(a)},b.prototype.addUserSessionChanged=function(a){this._userSessionChanged.addHandler(a)},b.prototype.removeUserSessionChanged=function(a){this._userSessionChanged.removeHandler(a)},b.prototype._raiseUserSessionChanged=function(a){d.Log.debug("UserManagerEvents._raiseUserSessionChanged"),this._userSessionChanged.raise(a)},b}(e.AccessTokenEvents)},function(a,b,c){"use strict";Object.defineProperty(b,"__esModule",{value:!0}),b.IFrameWindow=void 0;var d=function(){function a(a,b){for(var c=0;c<b.length;c++){var d=b[c];d.enumerable=d.enumerable||!1,d.configurable=!0,"value"in d&&(d.writable=!0),Object.defineProperty(a,d.key,d)}}return function(b,c,d){return c&&a(b.prototype,c),d&&a(b,d),b}}(),e=c(0);b.IFrameWindow=function(){function a(b){var c=this;!function(a,b){if(!(a instanceof b))throw new TypeError("Cannot call a class as a function")}(this,a),this._promise=new Promise(function(a,b){c._resolve=a,c._reject=b}),this._boundMessageEvent=this._message.bind(this),window.addEventListener("message",this._boundMessageEvent,!1),this._frame=window.document.createElement("iframe"),this._frame.style.visibility="hidden",this._frame.style.position="absolute",this._frame.style.display="none",this._frame.style.width=0,this._frame.style.height=0,window.document.body.appendChild(this._frame)}return a.prototype.navigate=function(a){if(a&&a.url){var b=a.silentRequestTimeout||1e4;e.Log.debug("IFrameWindow.navigate: Using timeout of:",b),this._timer=window.setTimeout(this._timeout.bind(this),b),this._frame.src=a.url}else this._error("No url provided");return this.promise},a.prototype._success=function(a){this._cleanup(),e.Log.debug("IFrameWindow: Successful response from frame window"),this._resolve(a)},a.prototype._error=function(a){this._cleanup(),e.Log.error(a),this._reject(new Error(a))},a.prototype.close=function(){this._cleanup()},a.prototype._cleanup=function(){this._frame&&(e.Log.debug("IFrameWindow: cleanup"),window.removeEventListener("message",this._boundMessageEvent,!1),window.clearTimeout(this._timer),window.document.body.removeChild(this._frame),this._timer=null,this._frame=null,this._boundMessageEvent=null)},a.prototype._timeout=function(){e.Log.debug("IFrameWindow.timeout"),this._error("Frame window timed out")},a.prototype._message=function(a){if(e.Log.debug("IFrameWindow.message"),this._timer&&a.origin===this._origin&&a.source===this._frame.contentWindow){var b=a.data;b?this._success({url:b}):this._error("Invalid response from frame")}},a.notifyParent=function(a){e.Log.debug("IFrameWindow.notifyParent"),window.parent&&window!==window.parent&&(a=a||window.location.href)&&(e.Log.debug("IFrameWindow.notifyParent: posting url message to parent"),window.parent.postMessage(a,location.protocol+"//"+location.host))},d(a,[{key:"promise",get:function(){return this._promise}},{key:"_origin",get:function(){return location.protocol+"//"+location.host}}]),a}()},function(a,b,c){"use strict";Object.defineProperty(b,"__esModule",{value:!0}),b.IFrameNavigator=void 0;var d=c(0),e=c(24);b.IFrameNavigator=function(){function a(){!function(a,b){if(!(a instanceof b))throw new TypeError("Cannot call a class as a function")}(this,a)}return a.prototype.prepare=function(a){var b=new e.IFrameWindow(a);return Promise.resolve(b)},a.prototype.callback=function(a){d.Log.debug("IFrameNavigator.callback");try{return e.IFrameWindow.notifyParent(a),Promise.resolve()}catch(a){return Promise.reject(a)}},a}()},function(a,b,c){"use strict";Object.defineProperty(b,"__esModule",{value:!0}),b.PopupWindow=void 0;var d=function(){function a(a,b){for(var c=0;c<b.length;c++){var d=b[c];d.enumerable=d.enumerable||!1,d.configurable=!0,"value"in d&&(d.writable=!0),Object.defineProperty(a,d.key,d)}}return function(b,c,d){return c&&a(b.prototype,c),d&&a(b,d),b}}(),e=c(0),f=c(2),g=500,h="location=no,toolbar=no,width=500,height=500,left=100,top=100;",i="_blank";b.PopupWindow=function(){function a(b){var c=this;!function(a,b){if(!(a instanceof b))throw new TypeError("Cannot call a class as a function")}(this,a),this._promise=new Promise(function(a,b){c._resolve=a,c._reject=b});var d=b.popupWindowTarget||i,f=b.popupWindowFeatures||h;this._popup=window.open("",d,f),this._popup&&(e.Log.debug("PopupWindow.ctor: popup successfully created"),this._checkForPopupClosedTimer=window.setInterval(this._checkForPopupClosed.bind(this),g))}return a.prototype.navigate=function(a){return this._popup?a&&a.url?(e.Log.debug("PopupWindow.navigate: Setting URL in popup"),this._id=a.id,this._id&&(window["popupCallback_"+a.id]=this._callback.bind(this)),this._popup.focus(),this._popup.window.location=a.url):(this._error("PopupWindow.navigate: no url provided"),this._error("No url provided")):this._error("PopupWindow.navigate: Error opening popup window"),this.promise},a.prototype._success=function(a){e.Log.debug("PopupWindow.callback: Successful response from popup window"),this._cleanup(),this._resolve(a)},a.prototype._error=function(a){e.Log.error("PopupWindow.error: ",a),this._cleanup(),this._reject(new Error(a))},a.prototype.close=function(){this._cleanup(!1)},a.prototype._cleanup=function(a){e.Log.debug("PopupWindow.cleanup"),window.clearInterval(this._checkForPopupClosedTimer),this._checkForPopupClosedTimer=null,delete window["popupCallback_"+this._id],this._popup&&!a&&this._popup.close(),this._popup=null},a.prototype._checkForPopupClosed=function(){this._popup&&!this._popup.closed||this._error("Popup window closed")},a.prototype._callback=function(a,b){this._cleanup(b),a?(e.Log.debug("PopupWindow.callback success"),this._success({url:a})):(e.Log.debug("PopupWindow.callback: Invalid response from popup"),this._error("Invalid response from popup"))},a.notifyOpener=function(a,b,c){if(window.opener){if(a=a||window.location.href){var d=f.UrlUtility.parseUrlFragment(a,c);if(d.state){var g="popupCallback_"+d.state,h=window.opener[g];h?(e.Log.debug("PopupWindow.notifyOpener: passing url message to opener"),h(a,b)):e.Log.warn("PopupWindow.notifyOpener: no matching callback found on opener")}else e.Log.warn("PopupWindow.notifyOpener: no state found in response url")}}else e.Log.warn("PopupWindow.notifyOpener: no window.opener. Can't complete notification.")},d(a,[{key:"promise",get:function(){return this._promise}}]),a}()},function(a,b,c){"use strict";Object.defineProperty(b,"__esModule",{value:!0}),b.PopupNavigator=void 0;var d=c(0),e=c(26);b.PopupNavigator=function(){function a(){!function(a,b){if(!(a instanceof b))throw new TypeError("Cannot call a class as a function")}(this,a)}return a.prototype.prepare=function(a){var b=new e.PopupWindow(a);return Promise.resolve(b)},a.prototype.callback=function(a,b,c){d.Log.debug("PopupNavigator.callback");try{return e.PopupWindow.notifyOpener(a,b,c),Promise.resolve()}catch(a){return Promise.reject(a)}},a}()},function(a,b,c){"use strict";Object.defineProperty(b,"__esModule",{value:!0}),b.RedirectNavigator=void 0;var d=function(){function a(a,b){for(var c=0;c<b.length;c++){var d=b[c];d.enumerable=d.enumerable||!1,d.configurable=!0,"value"in d&&(d.writable=!0),Object.defineProperty(a,d.key,d)}}return function(b,c,d){return c&&a(b.prototype,c),d&&a(b,d),b}}(),e=c(0);b.RedirectNavigator=function(){function a(){!function(a,b){if(!(a instanceof b))throw new TypeError("Cannot call a class as a function")}(this,a)}return a.prototype.prepare=function(){return Promise.resolve(this)},a.prototype.navigate=function(a){return a&&a.url?(window.location=a.url,Promise.resolve()):(e.Log.error("RedirectNavigator.navigate: No url provided"),Promise.reject(new Error("No url provided")))},d(a,[{key:"url",get:function(){return window.location.href}}]),a}()},function(a,b,c){"use strict";Object.defineProperty(b,"__esModule",{value:!0}),b.UserManagerSettings=void 0;var d=function(){function a(a,b){for(var c=0;c<b.length;c++){var d=b[c];d.enumerable=d.enumerable||!1,d.configurable=!0,"value"in d&&(d.writable=!0),Object.defineProperty(a,d.key,d)}}return function(b,c,d){return c&&a(b.prototype,c),d&&a(b,d),b}}(),e=(c(0),c(6)),f=c(28),g=c(27),h=c(25),i=c(5),j=c(1),k=60,l=2e3;b.UserManagerSettings=function(a){function b(){var c=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},d=c.popup_redirect_uri,e=c.popup_post_logout_redirect_uri,m=c.popupWindowFeatures,n=c.popupWindowTarget,o=c.silent_redirect_uri,p=c.silentRequestTimeout,q=c.automaticSilentRenew,r=void 0!==q&&q,s=c.includeIdTokenInSilentRenew,t=void 0===s||s,u=c.monitorSession,v=void 0===u||u,w=c.checkSessionInterval,x=void 0===w?l:w,y=c.stopCheckSessionOnError,z=void 0===y||y,A=c.revokeAccessTokenOnSignout,B=void 0!==A&&A,C=c.accessTokenExpiringNotificationTime,D=void 0===C?k:C,E=c.redirectNavigator,F=void 0===E?new f.RedirectNavigator:E,G=c.popupNavigator,H=void 0===G?new g.PopupNavigator:G,I=c.iframeNavigator,J=void 0===I?new h.IFrameNavigator:I,K=c.userStore,L=void 0===K?new i.WebStorageStateStore({store:j.Global.sessionStorage}):K;!function(a,b){if(!(a instanceof b))throw new TypeError("Cannot call a class as a function")}(this,b);var M=function(a,b){if(!a)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!b||"object"!=typeof b&&"function"!=typeof b?a:b}(this,a.call(this,arguments[0]));return M._popup_redirect_uri=d,M._popup_post_logout_redirect_uri=e,M._popupWindowFeatures=m,M._popupWindowTarget=n,M._silent_redirect_uri=o,M._silentRequestTimeout=p,M._automaticSilentRenew=!!r,M._includeIdTokenInSilentRenew=t,M._accessTokenExpiringNotificationTime=D,M._monitorSession=v,M._checkSessionInterval=x,M._stopCheckSessionOnError=z,M._revokeAccessTokenOnSignout=B,M._redirectNavigator=F,M._popupNavigator=H,M._iframeNavigator=J,M._userStore=L,M}return function(a,b){if("function"!=typeof b&&null!==b)throw new TypeError("Super expression must either be null or a function, not "+typeof b);a.prototype=Object.create(b&&b.prototype,{constructor:{value:a,enumerable:!1,writable:!0,configurable:!0}}),b&&(Object.setPrototypeOf?Object.setPrototypeOf(a,b):a.__proto__=b)}(b,a),d(b,[{key:"popup_redirect_uri",get:function(){return this._popup_redirect_uri}},{key:"popup_post_logout_redirect_uri",get:function(){return this._popup_post_logout_redirect_uri}},{key:"popupWindowFeatures",get:function(){return this._popupWindowFeatures}},{key:"popupWindowTarget",get:function(){return this._popupWindowTarget}},{key:"silent_redirect_uri",get:function(){return this._silent_redirect_uri}},{key:"silentRequestTimeout",get:function(){return this._silentRequestTimeout}},{key:"automaticSilentRenew",get:function(){return!(!this.silent_redirect_uri||!this._automaticSilentRenew)}},{key:"includeIdTokenInSilentRenew",get:function(){return this._includeIdTokenInSilentRenew}},{key:"accessTokenExpiringNotificationTime",get:function(){return this._accessTokenExpiringNotificationTime}},{key:"monitorSession",get:function(){return this._monitorSession}},{key:"checkSessionInterval",get:function(){return this._checkSessionInterval}},{key:"stopCheckSessionOnError",get:function(){return this._stopCheckSessionOnError}},{key:"revokeAccessTokenOnSignout",get:function(){return this._revokeAccessTokenOnSignout}},{key:"redirectNavigator",get:function(){return this._redirectNavigator}},{key:"popupNavigator",get:function(){return this._popupNavigator}},{key:"iframeNavigator",get:function(){return this._iframeNavigator}},{key:"userStore",get:function(){return this._userStore}}]),b}(e.OidcClientSettings)},function(a,b,c){"use strict";Object.defineProperty(b,"__esModule",{value:!0}),b.UserManager=void 0;var d=function(){function a(a,b){for(var c=0;c<b.length;c++){var d=b[c];d.enumerable=d.enumerable||!1,d.configurable=!0,"value"in d&&(d.writable=!0),Object.defineProperty(a,d.key,d)}}return function(b,c,d){return c&&a(b.prototype,c),d&&a(b,d),b}}(),e=c(0),f=c(18),g=c(29),h=c(13),i=c(23),j=c(21),k=c(10),l=c(8);b.UserManager=function(a){function b(){var c=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},d=arguments.length>1&&void 0!==arguments[1]?arguments[1]:j.SilentRenewService,f=arguments.length>2&&void 0!==arguments[2]?arguments[2]:k.SessionMonitor,h=arguments.length>3&&void 0!==arguments[3]?arguments[3]:l.TokenRevocationClient;!function(a,b){if(!(a instanceof b))throw new TypeError("Cannot call a class as a function")}(this,b),c instanceof g.UserManagerSettings||(c=new g.UserManagerSettings(c));var m=function(a,b){if(!a)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!b||"object"!=typeof b&&"function"!=typeof b?a:b}(this,a.call(this,c));return m._events=new i.UserManagerEvents(c),m._silentRenewService=new d(m),m.settings.automaticSilentRenew&&(e.Log.debug("UserManager.ctor: automaticSilentRenew is configured, setting up silent renew"),m.startSilentRenew()),m.settings.monitorSession&&(e.Log.debug("UserManager.ctor: monitorSession is configured, setting up session monitor"),m._sessionMonitor=new f(m)),m._tokenRevocationClient=new h(m._settings),m}return function(a,b){if("function"!=typeof b&&null!==b)throw new TypeError("Super expression must either be null or a function, not "+typeof b);a.prototype=Object.create(b&&b.prototype,{constructor:{value:a,enumerable:!1,writable:!0,configurable:!0}}),b&&(Object.setPrototypeOf?Object.setPrototypeOf(a,b):a.__proto__=b)}(b,a),b.prototype.getUser=function(){var a=this;return this._loadUser().then(function(b){return b?(e.Log.info("UserManager.getUser: user loaded"),a._events.load(b,!1),b):(e.Log.info("UserManager.getUser: user not found in storage"),null)})},b.prototype.removeUser=function(){var a=this;return this.storeUser(null).then(function(){e.Log.info("UserManager.removeUser: user removed from storage"),a._events.unload()})},b.prototype.signinRedirect=function(a){return this._signinStart(a,this._redirectNavigator).then(function(){e.Log.info("UserManager.signinRedirect: successful")})},b.prototype.signinRedirectCallback=function(a){return this._signinEnd(a||this._redirectNavigator.url).then(function(a){return a&&(a.profile&&a.profile.sub?e.Log.info("UserManager.signinRedirectCallback: successful, signed in sub: ",a.profile.sub):e.Log.info("UserManager.signinRedirectCallback: no sub")),a})},b.prototype.signinPopup=function(){var a=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},b=a.redirect_uri||this.settings.popup_redirect_uri||this.settings.redirect_uri;return b?(a.redirect_uri=b,a.display="popup",this._signin(a,this._popupNavigator,{startUrl:b,popupWindowFeatures:a.popupWindowFeatures||this.settings.popupWindowFeatures,popupWindowTarget:a.popupWindowTarget||this.settings.popupWindowTarget}).then(function(a){return a&&(a.profile&&a.profile.sub?e.Log.info("UserManager.signinPopup: signinPopup successful, signed in sub: ",a.profile.sub):e.Log.info("UserManager.signinPopup: no sub")),a})):(e.Log.error("UserManager.signinPopup: No popup_redirect_uri or redirect_uri configured"),Promise.reject(new Error("No popup_redirect_uri or redirect_uri configured")))},b.prototype.signinPopupCallback=function(a){return this._signinCallback(a,this._popupNavigator).then(function(a){return a&&(a.profile&&a.profile.sub?e.Log.info("UserManager.signinPopupCallback: successful, signed in sub: ",a.profile.sub):e.Log.info("UserManager.signinPopupCallback: no sub")),a})["catch"](function(a){e.Log.error("UserManager.signinPopupCallback error: "+a&&a.message)})},b.prototype.signinSilent=function(){
var a=this,b=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},c=b.redirect_uri||this.settings.silent_redirect_uri;return c?(b.redirect_uri=c,b.prompt="none",(b.id_token_hint||!this.settings.includeIdTokenInSilentRenew?Promise.resolve():this._loadUser().then(function(a){b.id_token_hint=a&&a.id_token})).then(function(){return a._signin(b,a._iframeNavigator,{startUrl:c,silentRequestTimeout:b.silentRequestTimeout||a.settings.silentRequestTimeout})}).then(function(a){return a&&(a.profile&&a.profile.sub?e.Log.info("UserManager.signinSilent: successful, signed in sub: ",a.profile.sub):e.Log.info("UserManager.signinSilent: no sub")),a})):(e.Log.error("UserManager.signinSilent: No silent_redirect_uri configured"),Promise.reject(new Error("No silent_redirect_uri configured")))},b.prototype.signinSilentCallback=function(a){return this._signinCallback(a,this._iframeNavigator).then(function(a){return a&&(a.profile&&a.profile.sub?e.Log.info("UserManager.signinSilentCallback: successful, signed in sub: ",a.profile.sub):e.Log.info("UserManager.signinSilentCallback: no sub")),a})},b.prototype.querySessionStatus=function(){var a=this,b=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},c=b.redirect_uri||this.settings.silent_redirect_uri;return c?(b.redirect_uri=c,b.prompt="none",b.response_type="id_token",b.scope="openid",this._signinStart(b,this._iframeNavigator,{startUrl:c,silentRequestTimeout:b.silentRequestTimeout||this.settings.silentRequestTimeout}).then(function(b){return a.processSigninResponse(b.url).then(function(a){return e.Log.debug("UserManager.querySessionStatus: got signin response"),a.session_state&&a.profile.sub&&a.profile.sid?(e.Log.info("UserManager.querySessionStatus: querySessionStatus success for sub: ",a.profile.sub),{session_state:a.session_state,sub:a.profile.sub,sid:a.profile.sid}):void e.Log.info("querySessionStatus successful, user not authenticated")})})):(e.Log.error("UserManager.querySessionStatus: No silent_redirect_uri configured"),Promise.reject(new Error("No silent_redirect_uri configured")))},b.prototype._signin=function(a,b){var c=this,d=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};return this._signinStart(a,b,d).then(function(a){return c._signinEnd(a.url)})},b.prototype._signinStart=function(a,b){var c=this,d=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};return b.prepare(d).then(function(b){return e.Log.debug("UserManager._signinStart: got navigator window handle"),c.createSigninRequest(a).then(function(a){return e.Log.debug("UserManager._signinStart: got signin request"),d.url=a.url,d.id=a.state.id,b.navigate(d)})["catch"](function(a){throw b.close&&(e.Log.debug("UserManager._signinStart: Error after preparing navigator, closing navigator window"),b.close()),a})})},b.prototype._signinEnd=function(a){var b=this;return this.processSigninResponse(a).then(function(a){e.Log.debug("UserManager._signinEnd: got signin response");var c=new h.User(a);return b.storeUser(c).then(function(){return e.Log.debug("UserManager._signinEnd: user stored"),b._events.load(c),c})})},b.prototype._signinCallback=function(a,b){return e.Log.debug("UserManager._signinCallback"),b.callback(a)},b.prototype.signoutRedirect=function(){var a=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},b=a.post_logout_redirect_uri||this.settings.post_logout_redirect_uri;return b&&(a.post_logout_redirect_uri=b),this._signoutStart(a,this._redirectNavigator).then(function(){e.Log.info("UserManager.signoutRedirect: successful")})},b.prototype.signoutRedirectCallback=function(a){return this._signoutEnd(a||this._redirectNavigator.url).then(function(a){return e.Log.info("UserManager.signoutRedirectCallback: successful"),a})},b.prototype.signoutPopup=function(){var a=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},b=a.post_logout_redirect_uri||this.settings.popup_post_logout_redirect_uri||this.settings.post_logout_redirect_uri;return a.post_logout_redirect_uri=b,a.display="popup",a.post_logout_redirect_uri&&(a.state=a.state||{}),this._signout(a,this._popupNavigator,{startUrl:b,popupWindowFeatures:a.popupWindowFeatures||this.settings.popupWindowFeatures,popupWindowTarget:a.popupWindowTarget||this.settings.popupWindowTarget}).then(function(){e.Log.info("UserManager.signinPopup: successful")})},b.prototype.signoutPopupCallback=function(a,b){return void 0===b&&"boolean"==typeof a&&(a=null,b=!0),this._popupNavigator.callback(a,b,"?").then(function(){e.Log.info("UserManager.signoutPopupCallback: successful")})},b.prototype._signout=function(a,b){var c=this,d=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};return this._signoutStart(a,b,d).then(function(a){return c._signoutEnd(a.url)})},b.prototype._signoutStart=function(){var a=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},b=this,c=arguments[1],d=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};return c.prepare(d).then(function(c){return e.Log.debug("UserManager._signoutStart: got navigator window handle"),b._loadUser().then(function(f){return e.Log.debug("UserManager._signoutStart: loaded current user from storage"),(b._settings.revokeAccessTokenOnSignout?b._revokeInternal(f):Promise.resolve()).then(function(){var g=a.id_token_hint||f&&f.id_token;return g&&(e.Log.debug("UserManager._signoutStart: Setting id_token into signout request"),a.id_token_hint=g),b.removeUser().then(function(){return e.Log.debug("UserManager._signoutStart: user removed, creating signout request"),b.createSignoutRequest(a).then(function(a){return e.Log.debug("UserManager._signoutStart: got signout request"),d.url=a.url,a.state&&(d.id=a.state.id),c.navigate(d)})})})})["catch"](function(a){throw c.close&&(e.Log.debug("UserManager._signoutStart: Error after preparing navigator, closing navigator window"),c.close()),a})})},b.prototype._signoutEnd=function(a){return this.processSignoutResponse(a).then(function(a){return e.Log.debug("UserManager._signoutEnd: got signout response"),a})},b.prototype.revokeAccessToken=function(){var a=this;return this._loadUser().then(function(b){return a._revokeInternal(b,!0).then(function(c){if(c)return e.Log.debug("UserManager.revokeAccessToken: removing token properties from user and re-storing"),b.access_token=null,b.expires_at=null,b.token_type=null,a.storeUser(b).then(function(){e.Log.debug("UserManager.revokeAccessToken: user stored"),a._events.load(b)})})}).then(function(){e.Log.info("UserManager.revokeAccessToken: access token revoked successfully")})},b.prototype._revokeInternal=function(a,b){var c=a&&a.access_token;return!c||c.indexOf(".")>=0?(e.Log.debug("UserManager.revokeAccessToken: no need to revoke due to no user, token, or JWT format"),Promise.resolve(!1)):this._tokenRevocationClient.revoke(c,b).then(function(){return!0})},b.prototype.startSilentRenew=function(){this._silentRenewService.start()},b.prototype.stopSilentRenew=function(){this._silentRenewService.stop()},b.prototype._loadUser=function(){return this._userStore.get(this._userStoreKey).then(function(a){return a?(e.Log.debug("UserManager._loadUser: user storageString loaded"),h.User.fromStorageString(a)):(e.Log.debug("UserManager._loadUser: no user storageString"),null)})},b.prototype.storeUser=function(a){if(a){e.Log.debug("UserManager.storeUser: storing user");var b=a.toStorageString();return this._userStore.set(this._userStoreKey,b)}return e.Log.debug("storeUser.storeUser: removing user"),this._userStore.remove(this._userStoreKey)},d(b,[{key:"_redirectNavigator",get:function(){return this.settings.redirectNavigator}},{key:"_popupNavigator",get:function(){return this.settings.popupNavigator}},{key:"_iframeNavigator",get:function(){return this.settings.iframeNavigator}},{key:"_userStore",get:function(){return this.settings.userStore}},{key:"events",get:function(){return this._events}},{key:"_userStoreKey",get:function(){return"user:"+this.settings.authority+":"+this.settings.client_id}}]),b}(f.OidcClient)},function(a,b,c){"use strict";Object.defineProperty(b,"__esModule",{value:!0}),b.InMemoryWebStorage=void 0;var d=function(){function a(a,b){for(var c=0;c<b.length;c++){var d=b[c];d.enumerable=d.enumerable||!1,d.configurable=!0,"value"in d&&(d.writable=!0),Object.defineProperty(a,d.key,d)}}return function(b,c,d){return c&&a(b.prototype,c),d&&a(b,d),b}}(),e=c(0);b.InMemoryWebStorage=function(){function a(){!function(a,b){if(!(a instanceof b))throw new TypeError("Cannot call a class as a function")}(this,a),this._data={}}return a.prototype.getItem=function(a){return e.Log.debug("InMemoryWebStorage.getItem",a),this._data[a]},a.prototype.setItem=function(a,b){e.Log.debug("InMemoryWebStorage.setItem",a),this._data[a]=b},a.prototype.removeItem=function(a){e.Log.debug("InMemoryWebStorage.removeItem",a),delete this._data[a]},a.prototype.key=function(a){return Object.getOwnPropertyNames(this._data)[a]},d(a,[{key:"length",get:function(){return Object.getOwnPropertyNames(this._data).length}}]),a}()},function(a,b,c){"use strict";Object.defineProperty(b,"__esModule",{value:!0}),b.SignoutResponse=void 0;var d=c(2);b.SignoutResponse=function e(a){!function(a,b){if(!(a instanceof b))throw new TypeError("Cannot call a class as a function")}(this,e);var b=d.UrlUtility.parseUrlFragment(a,"?");this.error=b.error,this.error_description=b.error_description,this.error_uri=b.error_uri,this.state=b.state}},function(a,b,c){"use strict";Object.defineProperty(b,"__esModule",{value:!0}),b.SignoutRequest=void 0;var d=c(0),e=c(2),f=c(4);b.SignoutRequest=function g(a){var b=a.url,c=a.id_token_hint,h=a.post_logout_redirect_uri,i=a.data;if(function(a,b){if(!(a instanceof b))throw new TypeError("Cannot call a class as a function")}(this,g),!b)throw d.Log.error("SignoutRequest.ctor: No url passed"),new Error("url");c&&(b=e.UrlUtility.addQueryParam(b,"id_token_hint",c)),h&&(b=e.UrlUtility.addQueryParam(b,"post_logout_redirect_uri",h),i&&(this.state=new f.State({data:i}),b=e.UrlUtility.addQueryParam(b,"state",this.state.id))),this.url=b}},function(a,b,c){"use strict";Object.defineProperty(b,"__esModule",{value:!0}),b.SigninResponse=void 0;var d=function(){function a(a,b){for(var c=0;c<b.length;c++){var d=b[c];d.enumerable=d.enumerable||!1,d.configurable=!0,"value"in d&&(d.writable=!0),Object.defineProperty(a,d.key,d)}}return function(b,c,d){return c&&a(b.prototype,c),d&&a(b,d),b}}(),e=c(2);b.SigninResponse=function(){function a(b){!function(a,b){if(!(a instanceof b))throw new TypeError("Cannot call a class as a function")}(this,a);var c=e.UrlUtility.parseUrlFragment(b,"#");this.error=c.error,this.error_description=c.error_description,this.error_uri=c.error_uri,this.state=c.state,this.id_token=c.id_token,this.session_state=c.session_state,this.access_token=c.access_token,this.token_type=c.token_type,this.scope=c.scope,this.profile=void 0;var d=parseInt(c.expires_in);if("number"==typeof d&&d>0){var f=parseInt(Date.now()/1e3);this.expires_at=f+d}}return d(a,[{key:"expires_in",get:function(){if(this.expires_at){var a=parseInt(Date.now()/1e3);return this.expires_at-a}}},{key:"expired",get:function(){var a=this.expires_in;if(void 0!==a)return a<=0}},{key:"scopes",get:function(){return(this.scope||"").split(" ")}},{key:"isOpenIdConnect",get:function(){return this.scopes.indexOf("openid")>=0||!!this.id_token}}]),a}()},function(a,b,c){"use strict";Object.defineProperty(b,"__esModule",{value:!0}),b.SigninRequest=void 0;var d=c(0),e=c(2),f=c(15);b.SigninRequest=function(){function a(b){var c=b.url,g=b.client_id,h=b.redirect_uri,i=b.response_type,j=b.scope,k=b.authority,l=b.data,m=b.prompt,n=b.display,o=b.max_age,p=b.ui_locales,q=b.id_token_hint,r=b.login_hint,s=b.acr_values,t=b.resource,u=b.request,v=b.request_uri,w=b.extraQueryParams;if(function(a,b){if(!(a instanceof b))throw new TypeError("Cannot call a class as a function")}(this,a),!c)throw d.Log.error("SigninRequest.ctor: No url passed"),new Error("url");if(!g)throw d.Log.error("SigninRequest.ctor: No client_id passed"),new Error("client_id");if(!h)throw d.Log.error("SigninRequest.ctor: No redirect_uri passed"),new Error("redirect_uri");if(!i)throw d.Log.error("SigninRequest.ctor: No response_type passed"),new Error("response_type");if(!j)throw d.Log.error("SigninRequest.ctor: No scope passed"),new Error("scope");if(!k)throw d.Log.error("SigninRequest.ctor: No authority passed"),new Error("authority");var x=a.isOidc(i);this.state=new f.SigninState({nonce:x,data:l,client_id:g,authority:k}),c=e.UrlUtility.addQueryParam(c,"client_id",g),c=e.UrlUtility.addQueryParam(c,"redirect_uri",h),c=e.UrlUtility.addQueryParam(c,"response_type",i),c=e.UrlUtility.addQueryParam(c,"scope",j),c=e.UrlUtility.addQueryParam(c,"state",this.state.id),x&&(c=e.UrlUtility.addQueryParam(c,"nonce",this.state.nonce));var y={prompt:m,display:n,max_age:o,ui_locales:p,id_token_hint:q,login_hint:r,acr_values:s,resource:t,request:u,request_uri:v};for(var z in y)y[z]&&(c=e.UrlUtility.addQueryParam(c,z,y[z]));for(var A in w)c=e.UrlUtility.addQueryParam(c,A,w[A]);this.url=c}return a.isOidc=function(a){return!!a.split(/\s+/g).filter(function(a){return"id_token"===a})[0]},a.isOAuth=function(a){return!!a.split(/\s+/g).filter(function(a){return"token"===a})[0]},a}()},function(a,b){var c={}.toString;a.exports=Array.isArray||function(a){return"[object Array]"==c.call(a)}},function(a,b){b.read=function(a,b,c,d,e){var f,g,h=8*e-d-1,i=(1<<h)-1,j=i>>1,k=-7,l=c?e-1:0,m=c?-1:1,n=a[b+l];for(l+=m,f=n&(1<<-k)-1,n>>=-k,k+=h;k>0;f=256*f+a[b+l],l+=m,k-=8);for(g=f&(1<<-k)-1,f>>=-k,k+=d;k>0;g=256*g+a[b+l],l+=m,k-=8);if(0===f)f=1-j;else{if(f===i)return g?NaN:1/0*(n?-1:1);g+=Math.pow(2,d),f-=j}return(n?-1:1)*g*Math.pow(2,f-d)},b.write=function(a,b,c,d,e,f){var g,h,i,j=8*f-e-1,k=(1<<j)-1,l=k>>1,m=23===e?Math.pow(2,-24)-Math.pow(2,-77):0,n=d?0:f-1,o=d?1:-1,p=b<0||0===b&&1/b<0?1:0;for(b=Math.abs(b),isNaN(b)||b===1/0?(h=isNaN(b)?1:0,g=k):(g=Math.floor(Math.log(b)/Math.LN2),b*(i=Math.pow(2,-g))<1&&(g--,i*=2),(b+=g+l>=1?m/i:m*Math.pow(2,1-l))*i>=2&&(g++,i/=2),g+l>=k?(h=0,g=k):g+l>=1?(h=(b*i-1)*Math.pow(2,e),g+=l):(h=b*Math.pow(2,l-1)*Math.pow(2,e),g=0));e>=8;a[c+n]=255&h,n+=o,h/=256,e-=8);for(g=g<<e|h,j+=e;j>0;a[c+n]=255&g,n+=o,g/=256,j-=8);a[c+n-o]|=128*p}},function(a,b,c){"use strict";function d(a){var b=a.length;if(b%4>0)throw new Error("Invalid string. Length must be a multiple of 4");var c=a.indexOf("=");return-1===c&&(c=b),[c,c===b?0:4-c%4]}function e(a){return g[a>>18&63]+g[a>>12&63]+g[a>>6&63]+g[63&a]}function f(a,b,c){for(var d,f=[],g=b;g<c;g+=3)d=(a[g]<<16&16711680)+(a[g+1]<<8&65280)+(255&a[g+2]),f.push(e(d));return f.join("")}b.byteLength=function(a){var b=d(a),c=b[0],e=b[1];return 3*(c+e)/4-e},b.toByteArray=function(a){for(var b,c=d(a),e=c[0],f=c[1],g=new i(function(a,b,c){return 3*(b+c)/4-c}(0,e,f)),j=0,k=f>0?e-4:e,l=0;l<k;l+=4)b=h[a.charCodeAt(l)]<<18|h[a.charCodeAt(l+1)]<<12|h[a.charCodeAt(l+2)]<<6|h[a.charCodeAt(l+3)],g[j++]=b>>16&255,g[j++]=b>>8&255,g[j++]=255&b;return 2===f&&(b=h[a.charCodeAt(l)]<<2|h[a.charCodeAt(l+1)]>>4,g[j++]=255&b),1===f&&(b=h[a.charCodeAt(l)]<<10|h[a.charCodeAt(l+1)]<<4|h[a.charCodeAt(l+2)]>>2,g[j++]=b>>8&255,g[j++]=255&b),g},b.fromByteArray=function(a){for(var b,c=a.length,d=c%3,e=[],h=0,i=c-d;h<i;h+=16383)e.push(f(a,h,h+16383>i?i:h+16383));return 1===d?(b=a[c-1],e.push(g[b>>2]+g[b<<4&63]+"==")):2===d&&(b=(a[c-2]<<8)+a[c-1],e.push(g[b>>10]+g[b>>4&63]+g[b<<2&63]+"=")),e.join("")};for(var g=[],h=[],i="undefined"!=typeof Uint8Array?Uint8Array:Array,j="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",k=0,l=j.length;k<l;++k)g[k]=j[k],h[j.charCodeAt(k)]=k;h["-".charCodeAt(0)]=62,h["_".charCodeAt(0)]=63},function(a,b){var c;c=function(){return this}();try{c=c||Function("return this")()||(0,eval)("this")}catch(a){"object"==typeof window&&(c=window)}a.exports=c},function(a,b,c){"use strict";(function(a){function d(){return f.TYPED_ARRAY_SUPPORT?2147483647:1073741823}function e(a,b){if(d()<b)throw new RangeError("Invalid typed array length");return f.TYPED_ARRAY_SUPPORT?(a=new Uint8Array(b)).__proto__=f.prototype:(null===a&&(a=new f(b)),a.length=b),a}function f(a,b,c){if(!(f.TYPED_ARRAY_SUPPORT||this instanceof f))return new f(a,b,c);if("number"==typeof a){if("string"==typeof b)throw new Error("If encoding is specified then the first argument must be a string");return i(this,a)}return g(this,a,b,c)}function g(a,b,c,d){if("number"==typeof b)throw new TypeError('"value" argument must not be a number');return"undefined"!=typeof ArrayBuffer&&b instanceof ArrayBuffer?function(a,b,c,d){if(b.byteLength,c<0||b.byteLength<c)throw new RangeError("'offset' is out of bounds");if(b.byteLength<c+(d||0))throw new RangeError("'length' is out of bounds");return b=void 0===c&&void 0===d?new Uint8Array(b):void 0===d?new Uint8Array(b,c):new Uint8Array(b,c,d),f.TYPED_ARRAY_SUPPORT?(a=b).__proto__=f.prototype:a=j(a,b),a}(a,b,c,d):"string"==typeof b?function(a,b,c){if("string"==typeof c&&""!==c||(c="utf8"),!f.isEncoding(c))throw new TypeError('"encoding" must be a valid string encoding');var d=0|l(b,c),g=(a=e(a,d)).write(b,c);return g!==d&&(a=a.slice(0,g)),a}(a,b,c):function(a,b){if(f.isBuffer(b)){var c=0|k(b.length);return 0===(a=e(a,c)).length?a:(b.copy(a,0,0,c),a)}if(b){if("undefined"!=typeof ArrayBuffer&&b.buffer instanceof ArrayBuffer||"length"in b)return"number"!=typeof b.length||function(a){return a!=a}(b.length)?e(a,0):j(a,b);if("Buffer"===b.type&&O(b.data))return j(a,b.data)}throw new TypeError("First argument must be a string, Buffer, ArrayBuffer, Array, or array-like object.")}(a,b)}function h(a){if("number"!=typeof a)throw new TypeError('"size" argument must be a number');if(a<0)throw new RangeError('"size" argument must not be negative')}function i(a,b){if(h(b),a=e(a,b<0?0:0|k(b)),!f.TYPED_ARRAY_SUPPORT)for(var c=0;c<b;++c)a[c]=0;return a}function j(a,b){var c=b.length<0?0:0|k(b.length);a=e(a,c);for(var d=0;d<c;d+=1)a[d]=255&b[d];return a}function k(a){if(a>=d())throw new RangeError("Attempt to allocate Buffer larger than maximum size: 0x"+d().toString(16)+" bytes");return 0|a}function l(a,b){if(f.isBuffer(a))return a.length;if("undefined"!=typeof ArrayBuffer&&"function"==typeof ArrayBuffer.isView&&(ArrayBuffer.isView(a)||a instanceof ArrayBuffer))return a.byteLength;"string"!=typeof a&&(a=""+a);var c=a.length;if(0===c)return 0;for(var d=!1;;)switch(b){case"ascii":case"latin1":case"binary":return c;case"utf8":case"utf-8":case void 0:return J(a).length;case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return 2*c;case"hex":return c>>>1;case"base64":return K(a).length;default:if(d)return J(a).length;b=(""+b).toLowerCase(),d=!0}}function m(a,b,c){var d=a[b];a[b]=a[c],a[c]=d}function n(a,b,c,d,e){if(0===a.length)return-1;if("string"==typeof c?(d=c,c=0):c>2147483647?c=2147483647:c<-2147483648&&(c=-2147483648),c=+c,isNaN(c)&&(c=e?0:a.length-1),c<0&&(c=a.length+c),c>=a.length){if(e)return-1;c=a.length-1}else if(c<0){if(!e)return-1;c=0}if("string"==typeof b&&(b=f.from(b,d)),f.isBuffer(b))return 0===b.length?-1:o(a,b,c,d,e);if("number"==typeof b)return b&=255,f.TYPED_ARRAY_SUPPORT&&"function"==typeof Uint8Array.prototype.indexOf?e?Uint8Array.prototype.indexOf.call(a,b,c):Uint8Array.prototype.lastIndexOf.call(a,b,c):o(a,[b],c,d,e);throw new TypeError("val must be string, number or Buffer")}function o(a,b,c,d,e){function f(a,b){return 1===h?a[b]:a.readUInt16BE(b*h)}var g,h=1,i=a.length,j=b.length;if(void 0!==d&&("ucs2"===(d=String(d).toLowerCase())||"ucs-2"===d||"utf16le"===d||"utf-16le"===d)){if(a.length<2||b.length<2)return-1;h=2,i/=2,j/=2,c/=2}if(e){var k=-1;for(g=c;g<i;g++)if(f(a,g)===f(b,-1===k?0:g-k)){if(-1===k&&(k=g),g-k+1===j)return k*h}else-1!==k&&(g-=g-k),k=-1}else for(c+j>i&&(c=i-j),g=c;g>=0;g--){for(var l=!0,m=0;m<j;m++)if(f(a,g+m)!==f(b,m)){l=!1;break}if(l)return g}return-1}function p(a,b,c,d){c=Number(c)||0;var e=a.length-c;d?(d=Number(d))>e&&(d=e):d=e;var f=b.length;if(f%2!=0)throw new TypeError("Invalid hex string");d>f/2&&(d=f/2);for(var g=0;g<d;++g){var h=parseInt(b.substr(2*g,2),16);if(isNaN(h))return g;a[c+g]=h}return g}function q(a,b,c,d){return L(J(b,a.length-c),a,c,d)}function r(a,b,c,d){return L(function(a){for(var b=[],c=0;c<a.length;++c)b.push(255&a.charCodeAt(c));return b}(b),a,c,d)}function s(a,b,c,d){return r(a,b,c,d)}function t(a,b,c,d){return L(K(b),a,c,d)}function u(a,b,c,d){return L(function(a,b){for(var c,d,e,f=[],g=0;g<a.length&&!((b-=2)<0);++g)c=a.charCodeAt(g),d=c>>8,e=c%256,f.push(e),f.push(d);return f}(b,a.length-c),a,c,d)}function v(a,b,c){return 0===b&&c===a.length?M.fromByteArray(a):M.fromByteArray(a.slice(b,c))}function w(a,b,c){c=Math.min(a.length,c);for(var d=[],e=b;e<c;){var f,g,h,i,j=a[e],k=null,l=j>239?4:j>223?3:j>191?2:1;if(e+l<=c)switch(l){case 1:j<128&&(k=j);break;case 2:128==(192&(f=a[e+1]))&&(i=(31&j)<<6|63&f)>127&&(k=i);break;case 3:f=a[e+1],g=a[e+2],128==(192&f)&&128==(192&g)&&(i=(15&j)<<12|(63&f)<<6|63&g)>2047&&(i<55296||i>57343)&&(k=i);break;case 4:f=a[e+1],g=a[e+2],h=a[e+3],128==(192&f)&&128==(192&g)&&128==(192&h)&&(i=(15&j)<<18|(63&f)<<12|(63&g)<<6|63&h)>65535&&i<1114112&&(k=i)}null===k?(k=65533,l=1):k>65535&&(k-=65536,d.push(k>>>10&1023|55296),k=56320|1023&k),d.push(k),e+=l}return function(a){var b=a.length;if(b<=P)return String.fromCharCode.apply(String,a);for(var c="",d=0;d<b;)c+=String.fromCharCode.apply(String,a.slice(d,d+=P));return c}(d)}function x(a,b,c){var d="";c=Math.min(a.length,c);for(var e=b;e<c;++e)d+=String.fromCharCode(127&a[e]);return d}function y(a,b,c){var d="";c=Math.min(a.length,c);for(var e=b;e<c;++e)d+=String.fromCharCode(a[e]);return d}function z(a,b,c){var d=a.length;(!b||b<0)&&(b=0),(!c||c<0||c>d)&&(c=d);for(var e="",f=b;f<c;++f)e+=I(a[f]);return e}function A(a,b,c){for(var d=a.slice(b,c),e="",f=0;f<d.length;f+=2)e+=String.fromCharCode(d[f]+256*d[f+1]);return e}function B(a,b,c){if(a%1!=0||a<0)throw new RangeError("offset is not uint");if(a+b>c)throw new RangeError("Trying to access beyond buffer length")}function C(a,b,c,d,e,g){if(!f.isBuffer(a))throw new TypeError('"buffer" argument must be a Buffer instance');if(b>e||b<g)throw new RangeError('"value" argument is out of bounds');if(c+d>a.length)throw new RangeError("Index out of range")}function D(a,b,c,d){b<0&&(b=65535+b+1);for(var e=0,f=Math.min(a.length-c,2);e<f;++e)a[c+e]=(b&255<<8*(d?e:1-e))>>>8*(d?e:1-e)}function E(a,b,c,d){b<0&&(b=4294967295+b+1);for(var e=0,f=Math.min(a.length-c,4);e<f;++e)a[c+e]=b>>>8*(d?e:3-e)&255}function F(a,b,c,d,e,f){if(c+d>a.length)throw new RangeError("Index out of range");if(c<0)throw new RangeError("Index out of range")}function G(a,b,c,d,e){return e||F(a,0,c,4),N.write(a,b,c,d,23,4),c+4}function H(a,b,c,d,e){return e||F(a,0,c,8),N.write(a,b,c,d,52,8),c+8}function I(a){return a<16?"0"+a.toString(16):a.toString(16)}function J(a,b){var c;b=b||1/0;for(var d=a.length,e=null,f=[],g=0;g<d;++g){if((c=a.charCodeAt(g))>55295&&c<57344){if(!e){if(c>56319){(b-=3)>-1&&f.push(239,191,189);continue}if(g+1===d){(b-=3)>-1&&f.push(239,191,189);continue}e=c;continue}if(c<56320){(b-=3)>-1&&f.push(239,191,189),e=c;continue}c=65536+(e-55296<<10|c-56320)}else e&&(b-=3)>-1&&f.push(239,191,189);if(e=null,c<128){if((b-=1)<0)break;f.push(c)}else if(c<2048){if((b-=2)<0)break;f.push(c>>6|192,63&c|128)}else if(c<65536){if((b-=3)<0)break;f.push(c>>12|224,c>>6&63|128,63&c|128)}else{if(!(c<1114112))throw new Error("Invalid code point");if((b-=4)<0)break;f.push(c>>18|240,c>>12&63|128,c>>6&63|128,63&c|128)}}return f}function K(a){return M.toByteArray(function(a){if((a=function(a){return a.trim?a.trim():a.replace(/^\s+|\s+$/g,"")}(a).replace(Q,"")).length<2)return"";for(;a.length%4!=0;)a+="=";return a}(a))}function L(a,b,c,d){for(var e=0;e<d&&!(e+c>=b.length||e>=a.length);++e)b[e+c]=a[e];return e}var M=c(38),N=c(37),O=c(36);b.Buffer=f,b.SlowBuffer=function(a){return+a!=a&&(a=0),f.alloc(+a)},b.INSPECT_MAX_BYTES=50,f.TYPED_ARRAY_SUPPORT=void 0!==a.TYPED_ARRAY_SUPPORT?a.TYPED_ARRAY_SUPPORT:function(){try{var a=new Uint8Array(1);return a.__proto__={__proto__:Uint8Array.prototype,foo:function(){return 42}},42===a.foo()&&"function"==typeof a.subarray&&0===a.subarray(1,1).byteLength}catch(a){return!1}}(),b.kMaxLength=d(),f.poolSize=8192,f._augment=function(a){return a.__proto__=f.prototype,a},f.from=function(a,b,c){return g(null,a,b,c)},f.TYPED_ARRAY_SUPPORT&&(f.prototype.__proto__=Uint8Array.prototype,f.__proto__=Uint8Array,"undefined"!=typeof Symbol&&Symbol.species&&f[Symbol.species]===f&&Object.defineProperty(f,Symbol.species,{value:null,configurable:!0})),f.alloc=function(a,b,c){return function(a,b,c,d){return h(b),b<=0?e(a,b):void 0!==c?"string"==typeof d?e(a,b).fill(c,d):e(a,b).fill(c):e(a,b)}(null,a,b,c)},f.allocUnsafe=function(a){return i(null,a)},f.allocUnsafeSlow=function(a){return i(null,a)},f.isBuffer=function(a){return!(null==a||!a._isBuffer)},f.compare=function(a,b){if(!f.isBuffer(a)||!f.isBuffer(b))throw new TypeError("Arguments must be Buffers");if(a===b)return 0;for(var c=a.length,d=b.length,e=0,g=Math.min(c,d);e<g;++e)if(a[e]!==b[e]){c=a[e],d=b[e];break}return c<d?-1:d<c?1:0},f.isEncoding=function(a){switch(String(a).toLowerCase()){case"hex":case"utf8":case"utf-8":case"ascii":case"latin1":case"binary":case"base64":case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return!0;default:return!1}},f.concat=function(a,b){if(!O(a))throw new TypeError('"list" argument must be an Array of Buffers');if(0===a.length)return f.alloc(0);var c;if(void 0===b)for(b=0,c=0;c<a.length;++c)b+=a[c].length;var d=f.allocUnsafe(b),e=0;for(c=0;c<a.length;++c){var g=a[c];if(!f.isBuffer(g))throw new TypeError('"list" argument must be an Array of Buffers');g.copy(d,e),e+=g.length}return d},f.byteLength=l,f.prototype._isBuffer=!0,f.prototype.swap16=function(){var a=this.length;if(a%2!=0)throw new RangeError("Buffer size must be a multiple of 16-bits");for(var b=0;b<a;b+=2)m(this,b,b+1);return this},f.prototype.swap32=function(){var a=this.length;if(a%4!=0)throw new RangeError("Buffer size must be a multiple of 32-bits");for(var b=0;b<a;b+=4)m(this,b,b+3),m(this,b+1,b+2);return this},f.prototype.swap64=function(){var a=this.length;if(a%8!=0)throw new RangeError("Buffer size must be a multiple of 64-bits");for(var b=0;b<a;b+=8)m(this,b,b+7),m(this,b+1,b+6),m(this,b+2,b+5),m(this,b+3,b+4);return this},f.prototype.toString=function(){var a=0|this.length;return 0===a?"":0===arguments.length?w(this,0,a):function(a,b,c){var d=!1;if((void 0===b||b<0)&&(b=0),b>this.length)return"";if((void 0===c||c>this.length)&&(c=this.length),c<=0)return"";if((c>>>=0)<=(b>>>=0))return"";for(a||(a="utf8");;)switch(a){case"hex":return z(this,b,c);case"utf8":case"utf-8":return w(this,b,c);case"ascii":return x(this,b,c);case"latin1":case"binary":return y(this,b,c);case"base64":return v(this,b,c);case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return A(this,b,c);default:if(d)throw new TypeError("Unknown encoding: "+a);a=(a+"").toLowerCase(),d=!0}}.apply(this,arguments)},f.prototype.equals=function(a){if(!f.isBuffer(a))throw new TypeError("Argument must be a Buffer");return this===a||0===f.compare(this,a)},f.prototype.inspect=function(){var a="",c=b.INSPECT_MAX_BYTES;return this.length>0&&(a=this.toString("hex",0,c).match(/.{2}/g).join(" "),this.length>c&&(a+=" ... ")),"<Buffer "+a+">"},f.prototype.compare=function(a,b,c,d,e){if(!f.isBuffer(a))throw new TypeError("Argument must be a Buffer");if(void 0===b&&(b=0),void 0===c&&(c=a?a.length:0),void 0===d&&(d=0),void 0===e&&(e=this.length),b<0||c>a.length||d<0||e>this.length)throw new RangeError("out of range index");if(d>=e&&b>=c)return 0;if(d>=e)return-1;if(b>=c)return 1;if(b>>>=0,c>>>=0,d>>>=0,e>>>=0,this===a)return 0;for(var g=e-d,h=c-b,i=Math.min(g,h),j=this.slice(d,e),k=a.slice(b,c),l=0;l<i;++l)if(j[l]!==k[l]){g=j[l],h=k[l];break}return g<h?-1:h<g?1:0},f.prototype.includes=function(a,b,c){return-1!==this.indexOf(a,b,c)},f.prototype.indexOf=function(a,b,c){return n(this,a,b,c,!0)},f.prototype.lastIndexOf=function(a,b,c){return n(this,a,b,c,!1)},f.prototype.write=function(a,b,c,d){if(void 0===b)d="utf8",c=this.length,b=0;else if(void 0===c&&"string"==typeof b)d=b,c=this.length,b=0;else{if(!isFinite(b))throw new Error("Buffer.write(string, encoding, offset[, length]) is no longer supported");b|=0,isFinite(c)?(c|=0,void 0===d&&(d="utf8")):(d=c,c=void 0)}var e=this.length-b;if((void 0===c||c>e)&&(c=e),a.length>0&&(c<0||b<0)||b>this.length)throw new RangeError("Attempt to write outside buffer bounds");d||(d="utf8");for(var f=!1;;)switch(d){case"hex":return p(this,a,b,c);case"utf8":case"utf-8":return q(this,a,b,c);case"ascii":return r(this,a,b,c);case"latin1":case"binary":return s(this,a,b,c);case"base64":return t(this,a,b,c);case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return u(this,a,b,c);default:if(f)throw new TypeError("Unknown encoding: "+d);d=(""+d).toLowerCase(),f=!0}},f.prototype.toJSON=function(){return{type:"Buffer",data:Array.prototype.slice.call(this._arr||this,0)}};var P=4096;f.prototype.slice=function(a,b){var c,d=this.length;if(a=~~a,b=void 0===b?d:~~b,a<0?(a+=d)<0&&(a=0):a>d&&(a=d),b<0?(b+=d)<0&&(b=0):b>d&&(b=d),b<a&&(b=a),f.TYPED_ARRAY_SUPPORT)(c=this.subarray(a,b)).__proto__=f.prototype;else{var e=b-a;c=new f(e,(void 0));for(var g=0;g<e;++g)c[g]=this[g+a]}return c},f.prototype.readUIntLE=function(a,b,c){a|=0,b|=0,c||B(a,b,this.length);for(var d=this[a],e=1,f=0;++f<b&&(e*=256);)d+=this[a+f]*e;return d},f.prototype.readUIntBE=function(a,b,c){a|=0,b|=0,c||B(a,b,this.length);for(var d=this[a+--b],e=1;b>0&&(e*=256);)d+=this[a+--b]*e;return d},f.prototype.readUInt8=function(a,b){return b||B(a,1,this.length),this[a]},f.prototype.readUInt16LE=function(a,b){return b||B(a,2,this.length),this[a]|this[a+1]<<8},f.prototype.readUInt16BE=function(a,b){return b||B(a,2,this.length),this[a]<<8|this[a+1]},f.prototype.readUInt32LE=function(a,b){return b||B(a,4,this.length),(this[a]|this[a+1]<<8|this[a+2]<<16)+16777216*this[a+3]},f.prototype.readUInt32BE=function(a,b){return b||B(a,4,this.length),16777216*this[a]+(this[a+1]<<16|this[a+2]<<8|this[a+3])},f.prototype.readIntLE=function(a,b,c){a|=0,b|=0,c||B(a,b,this.length);for(var d=this[a],e=1,f=0;++f<b&&(e*=256);)d+=this[a+f]*e;return d>=(e*=128)&&(d-=Math.pow(2,8*b)),d},f.prototype.readIntBE=function(a,b,c){a|=0,b|=0,c||B(a,b,this.length);for(var d=b,e=1,f=this[a+--d];d>0&&(e*=256);)f+=this[a+--d]*e;return f>=(e*=128)&&(f-=Math.pow(2,8*b)),f},f.prototype.readInt8=function(a,b){return b||B(a,1,this.length),128&this[a]?-1*(255-this[a]+1):this[a]},f.prototype.readInt16LE=function(a,b){b||B(a,2,this.length);var c=this[a]|this[a+1]<<8;return 32768&c?4294901760|c:c},f.prototype.readInt16BE=function(a,b){b||B(a,2,this.length);var c=this[a+1]|this[a]<<8;return 32768&c?4294901760|c:c},f.prototype.readInt32LE=function(a,b){return b||B(a,4,this.length),this[a]|this[a+1]<<8|this[a+2]<<16|this[a+3]<<24},f.prototype.readInt32BE=function(a,b){return b||B(a,4,this.length),this[a]<<24|this[a+1]<<16|this[a+2]<<8|this[a+3]},f.prototype.readFloatLE=function(a,b){return b||B(a,4,this.length),N.read(this,a,!0,23,4)},f.prototype.readFloatBE=function(a,b){return b||B(a,4,this.length),N.read(this,a,!1,23,4)},f.prototype.readDoubleLE=function(a,b){return b||B(a,8,this.length),N.read(this,a,!0,52,8)},f.prototype.readDoubleBE=function(a,b){return b||B(a,8,this.length),N.read(this,a,!1,52,8)},f.prototype.writeUIntLE=function(a,b,c,d){a=+a,b|=0,c|=0,d||C(this,a,b,c,Math.pow(2,8*c)-1,0);var e=1,f=0;for(this[b]=255&a;++f<c&&(e*=256);)this[b+f]=a/e&255;return b+c},f.prototype.writeUIntBE=function(a,b,c,d){a=+a,b|=0,c|=0,d||C(this,a,b,c,Math.pow(2,8*c)-1,0);var e=c-1,f=1;for(this[b+e]=255&a;--e>=0&&(f*=256);)this[b+e]=a/f&255;return b+c},f.prototype.writeUInt8=function(a,b,c){return a=+a,b|=0,c||C(this,a,b,1,255,0),f.TYPED_ARRAY_SUPPORT||(a=Math.floor(a)),this[b]=255&a,b+1},f.prototype.writeUInt16LE=function(a,b,c){return a=+a,b|=0,c||C(this,a,b,2,65535,0),f.TYPED_ARRAY_SUPPORT?(this[b]=255&a,this[b+1]=a>>>8):D(this,a,b,!0),b+2},f.prototype.writeUInt16BE=function(a,b,c){return a=+a,b|=0,c||C(this,a,b,2,65535,0),f.TYPED_ARRAY_SUPPORT?(this[b]=a>>>8,this[b+1]=255&a):D(this,a,b,!1),
b+2},f.prototype.writeUInt32LE=function(a,b,c){return a=+a,b|=0,c||C(this,a,b,4,4294967295,0),f.TYPED_ARRAY_SUPPORT?(this[b+3]=a>>>24,this[b+2]=a>>>16,this[b+1]=a>>>8,this[b]=255&a):E(this,a,b,!0),b+4},f.prototype.writeUInt32BE=function(a,b,c){return a=+a,b|=0,c||C(this,a,b,4,4294967295,0),f.TYPED_ARRAY_SUPPORT?(this[b]=a>>>24,this[b+1]=a>>>16,this[b+2]=a>>>8,this[b+3]=255&a):E(this,a,b,!1),b+4},f.prototype.writeIntLE=function(a,b,c,d){if(a=+a,b|=0,!d){var e=Math.pow(2,8*c-1);C(this,a,b,c,e-1,-e)}var f=0,g=1,h=0;for(this[b]=255&a;++f<c&&(g*=256);)a<0&&0===h&&0!==this[b+f-1]&&(h=1),this[b+f]=(a/g>>0)-h&255;return b+c},f.prototype.writeIntBE=function(a,b,c,d){if(a=+a,b|=0,!d){var e=Math.pow(2,8*c-1);C(this,a,b,c,e-1,-e)}var f=c-1,g=1,h=0;for(this[b+f]=255&a;--f>=0&&(g*=256);)a<0&&0===h&&0!==this[b+f+1]&&(h=1),this[b+f]=(a/g>>0)-h&255;return b+c},f.prototype.writeInt8=function(a,b,c){return a=+a,b|=0,c||C(this,a,b,1,127,-128),f.TYPED_ARRAY_SUPPORT||(a=Math.floor(a)),a<0&&(a=255+a+1),this[b]=255&a,b+1},f.prototype.writeInt16LE=function(a,b,c){return a=+a,b|=0,c||C(this,a,b,2,32767,-32768),f.TYPED_ARRAY_SUPPORT?(this[b]=255&a,this[b+1]=a>>>8):D(this,a,b,!0),b+2},f.prototype.writeInt16BE=function(a,b,c){return a=+a,b|=0,c||C(this,a,b,2,32767,-32768),f.TYPED_ARRAY_SUPPORT?(this[b]=a>>>8,this[b+1]=255&a):D(this,a,b,!1),b+2},f.prototype.writeInt32LE=function(a,b,c){return a=+a,b|=0,c||C(this,a,b,4,2147483647,-2147483648),f.TYPED_ARRAY_SUPPORT?(this[b]=255&a,this[b+1]=a>>>8,this[b+2]=a>>>16,this[b+3]=a>>>24):E(this,a,b,!0),b+4},f.prototype.writeInt32BE=function(a,b,c){return a=+a,b|=0,c||C(this,a,b,4,2147483647,-2147483648),a<0&&(a=4294967295+a+1),f.TYPED_ARRAY_SUPPORT?(this[b]=a>>>24,this[b+1]=a>>>16,this[b+2]=a>>>8,this[b+3]=255&a):E(this,a,b,!1),b+4},f.prototype.writeFloatLE=function(a,b,c){return G(this,a,b,!0,c)},f.prototype.writeFloatBE=function(a,b,c){return G(this,a,b,!1,c)},f.prototype.writeDoubleLE=function(a,b,c){return H(this,a,b,!0,c)},f.prototype.writeDoubleBE=function(a,b,c){return H(this,a,b,!1,c)},f.prototype.copy=function(a,b,c,d){if(c||(c=0),d||0===d||(d=this.length),b>=a.length&&(b=a.length),b||(b=0),d>0&&d<c&&(d=c),d===c)return 0;if(0===a.length||0===this.length)return 0;if(b<0)throw new RangeError("targetStart out of bounds");if(c<0||c>=this.length)throw new RangeError("sourceStart out of bounds");if(d<0)throw new RangeError("sourceEnd out of bounds");d>this.length&&(d=this.length),a.length-b<d-c&&(d=a.length-b+c);var e,g=d-c;if(this===a&&c<b&&b<d)for(e=g-1;e>=0;--e)a[e+b]=this[e+c];else if(g<1e3||!f.TYPED_ARRAY_SUPPORT)for(e=0;e<g;++e)a[e+b]=this[e+c];else Uint8Array.prototype.set.call(a,this.subarray(c,c+g),b);return g},f.prototype.fill=function(a,b,c,d){if("string"==typeof a){if("string"==typeof b?(d=b,b=0,c=this.length):"string"==typeof c&&(d=c,c=this.length),1===a.length){var e=a.charCodeAt(0);e<256&&(a=e)}if(void 0!==d&&"string"!=typeof d)throw new TypeError("encoding must be a string");if("string"==typeof d&&!f.isEncoding(d))throw new TypeError("Unknown encoding: "+d)}else"number"==typeof a&&(a&=255);if(b<0||this.length<b||this.length<c)throw new RangeError("Out of range index");if(c<=b)return this;var g;if(b>>>=0,c=void 0===c?this.length:c>>>0,a||(a=0),"number"==typeof a)for(g=b;g<c;++g)this[g]=a;else{var h=f.isBuffer(a)?a:J(new f(a,d).toString()),i=h.length;for(g=0;g<c-b;++g)this[g+b]=h[g%i]}return this};var Q=/[^+\/0-9A-Za-z-_]/g}).call(this,c(39))},function(a,b,c){"use strict";(function(a){function c(a){var b,c,d="";for(b=0;b+3<=a.length;b+=3)c=parseInt(a.substring(b,b+3),16),d+=oa.charAt(c>>6)+oa.charAt(63&c);if(b+1==a.length?(c=parseInt(a.substring(b,b+1),16),d+=oa.charAt(c<<2)):b+2==a.length&&(c=parseInt(a.substring(b,b+2),16),d+=oa.charAt(c>>2)+oa.charAt((3&c)<<4)),pa)for(;(3&d.length)>0;)d+=pa;return d}function d(a){var b,c,d,e="",f=0;for(b=0;b<a.length&&a.charAt(b)!=pa;++b)(d=oa.indexOf(a.charAt(b)))<0||(0==f?(e+=h(d>>2),c=3&d,f=1):1==f?(e+=h(c<<2|d>>4),c=15&d,f=2):2==f?(e+=h(c),e+=h(d>>2),c=3&d,f=3):(e+=h(c<<2|d>>4),e+=h(15&d),f=0));return 1==f&&(e+=h(c<<2)),e}function e(a){var b,c=d(a),e=new Array;for(b=0;2*b<c.length;++b)e[b]=parseInt(c.substring(2*b,2*b+2),16);return e}function f(a,b,c){null!=a&&("number"==typeof a?this.fromNumber(a,b,c):null==b&&"string"!=typeof a?this.fromString(a,256):this.fromString(a,b))}function g(){return new f(null)}function h(a){return sa.charAt(a)}function i(a,b){var c=ta[a.charCodeAt(b)];return null==c?-1:c}function j(a){var b=g();return b.fromInt(a),b}function k(a){var b,c=1;return 0!=(b=a>>>16)&&(a=b,c+=16),0!=(b=a>>8)&&(a=b,c+=8),0!=(b=a>>4)&&(a=b,c+=4),0!=(b=a>>2)&&(a=b,c+=2),0!=(b=a>>1)&&(a=b,c+=1),c}function l(a){this.m=a}function m(a){this.m=a,this.mp=a.invDigit(),this.mpl=32767&this.mp,this.mph=this.mp>>15,this.um=(1<<a.DB-15)-1,this.mt2=2*a.t}function n(a,b){return a&b}function o(a,b){return a|b}function p(a,b){return a^b}function q(a,b){return a&~b}function r(a){if(0==a)return-1;var b=0;return 0==(65535&a)&&(a>>=16,b+=16),0==(255&a)&&(a>>=8,b+=8),0==(15&a)&&(a>>=4,b+=4),0==(3&a)&&(a>>=2,b+=2),0==(1&a)&&++b,b}function s(a){for(var b=0;0!=a;)a&=a-1,++b;return b}function t(){}function u(a){return a}function v(a){this.r2=g(),this.q3=g(),f.ONE.dlShiftTo(2*a.t,this.r2),this.mu=this.r2.divide(a),this.m=a}function w(){this.i=0,this.j=0,this.S=new Array}function x(){!function(a){xa[ya++]^=255&a,xa[ya++]^=a>>8&255,xa[ya++]^=a>>16&255,xa[ya++]^=a>>24&255,ya>=za&&(ya-=za)}((new Date).getTime())}function y(){if(null==wa){for(x(),(wa=function(){return new w}()).init(xa),ya=0;ya<xa.length;++ya)xa[ya]=0;ya=0}return wa.next()}function z(){}function A(a,b){return new f(a,b)}function B(a,b,c){for(var d="",e=0;d.length<b;)d+=c(String.fromCharCode.apply(String,a.concat([(4278190080&e)>>24,(16711680&e)>>16,(65280&e)>>8,255&e]))),e+=1;return d}function C(){this.n=null,this.e=0,this.d=null,this.p=null,this.q=null,this.dmp1=null,this.dmq1=null,this.coeff=null}function D(a,b){this.x=b,this.q=a}function E(a,b,c,d){this.curve=a,this.x=b,this.y=c,this.z=null==d?f.ONE:d,this.zinv=null}function F(a,b,c){this.q=a,this.a=this.fromBigInteger(b),this.b=this.fromBigInteger(c),this.infinity=new E(this,null,null)}function G(a){for(var b=new Array,c=0;c<a.length;c++)b[c]=a.charCodeAt(c);return b}function H(a){for(var b="",c=0;c<a.length;c++)b+=String.fromCharCode(a[c]);return b}function I(a){for(var b="",c=0;c<a.length;c++){var d=a[c].toString(16);1==d.length&&(d="0"+d),b+=d}return b}function J(a){return I(G(a))}function K(a){return a=(a=(a=a.replace(/\=/g,"")).replace(/\+/g,"-")).replace(/\//g,"_")}function L(a){return a.length%4==2?a+="==":a.length%4==3&&(a+="="),a=(a=a.replace(/-/g,"+")).replace(/_/g,"/")}function M(a){return a.length%2==1&&(a="0"+a),K(c(a))}function N(a){return d(L(a))}function O(a){return Z(ca(a))}function P(a){return decodeURIComponent($(a))}function Q(a){for(var b="",c=0;c<a.length-1;c+=2)b+=String.fromCharCode(parseInt(a.substr(c,2),16));return b}function R(a){for(var b="",c=0;c<a.length;c++)b+=("0"+a.charCodeAt(c).toString(16)).slice(-2);return b}function S(a){return c(a)}function T(a){var b=S(a).replace(/(.{64})/g,"$1\r\n");return b=b.replace(/\r\n$/,"")}function U(a){return d(a.replace(/[^0-9A-Za-z\/+=]*/g,""))}function V(a,b){return"-----BEGIN "+b+"-----\r\n"+T(a)+"\r\n-----END "+b+"-----\r\n"}function W(a,b){if(-1==a.indexOf("-----BEGIN "))throw"can't find PEM header: "+b;return U(a=void 0!==b?(a=a.replace("-----BEGIN "+b+"-----","")).replace("-----END "+b+"-----",""):(a=a.replace(/-----BEGIN [^-]+-----/,"")).replace(/-----END [^-]+-----/,""))}function X(a){var b,c,d,e,f,g,h,i,j,k,l;if(l=a.match(/^(\d{2}|\d{4})(\d\d)(\d\d)(\d\d)(\d\d)(\d\d)(|\.\d+)Z$/))return i=l[1],b=parseInt(i),2===i.length&&(50<=b&&b<100?b=1900+b:0<=b&&b<50&&(b=2e3+b)),c=parseInt(l[2])-1,d=parseInt(l[3]),e=parseInt(l[4]),f=parseInt(l[5]),g=parseInt(l[6]),h=0,""!==(j=l[7])&&(k=(j.substr(1)+"00").substr(0,3),h=parseInt(k)),Date.UTC(b,c,d,e,f,g,h);throw"unsupported zulu format: "+a}function Y(a){return~~(X(a)/1e3)}function Z(a){return a.replace(/%/g,"")}function $(a){return a.replace(/(..)/g,"%$1")}function _(a){var b="malformed IPv6 address";if(!a.match(/^[0-9A-Fa-f:]+$/))throw b;var c=(a=a.toLowerCase()).split(":").length-1;if(c<2)throw b;var d=":".repeat(7-c+2),e=(a=a.replace("::",d)).split(":");if(8!=e.length)throw b;for(var f=0;f<8;f++)e[f]=("0000"+e[f]).slice(-4);return e.join("")}function aa(a){if(!a.match(/^[0-9A-Fa-f]{32}$/))throw"malformed IPv6 address octet";for(var b=(a=a.toLowerCase()).match(/.{1,4}/g),c=0;c<8;c++)b[c]=b[c].replace(/^0+/,""),""==b[c]&&(b[c]="0");var d=(a=":"+b.join(":")+":").match(/:(0:){2,}/g);if(null===d)return a.slice(1,-1);var e="";for(c=0;c<d.length;c++)d[c].length>e.length&&(e=d[c]);return(a=a.replace(e,"::")).slice(1,-1)}function ba(a){var b="malformed hex value";if(!a.match(/^([0-9A-Fa-f][0-9A-Fa-f]){1,}$/))throw b;if(8!=a.length)return 32==a.length?aa(a):a;try{return parseInt(a.substr(0,2),16)+"."+parseInt(a.substr(2,2),16)+"."+parseInt(a.substr(4,2),16)+"."+parseInt(a.substr(6,2),16)}catch(a){throw b}}function ca(a){for(var b=encodeURIComponent(a),c="",d=0;d<b.length;d++)"%"==b[d]?(c+=b.substr(d,3),d+=2):c=c+"%"+J(b[d]);return c}function da(a){return a.length%2==1?"0"+a:a.substr(0,1)>"7"?"00"+a:a}function ea(a,b){for(var c="",d=b/4-a.length,e=0;e<d;e++)c+="0";return c+a}function fa(a,b,c){for(var d="",e=0;d.length<b;)d+=Q(c(R(a+String.fromCharCode.apply(String,[(4278190080&e)>>24,(16711680&e)>>16,(65280&e)>>8,255&e])))),e+=1;return d}function ga(a){for(var b in Ea.crypto.Util.DIGESTINFOHEAD){var c=Ea.crypto.Util.DIGESTINFOHEAD[b],d=c.length;if(a.substring(0,d)==c)return[b,a.substring(d)]}return[]}function ha(){var a=Ia,b=a.getChildIdx,c=a.getV,d=a.getTLV,e=a.getVbyList,f=a.getTLVbyList,g=a.getIdxbyList,h=a.getVidx,i=a.oidname,j=ha,k=W;this.hex=null,this.version=0,this.foffset=0,this.aExtInfo=null,this.getVersion=function(){return null===this.hex||0!==this.version?this.version:"a003020102"!==f(this.hex,0,[0,0])?(this.version=1,this.foffset=-1,1):(this.version=3,3)},this.getSerialNumberHex=function(){return e(this.hex,0,[0,1+this.foffset],"02")},this.getSignatureAlgorithmField=function(){return i(e(this.hex,0,[0,2+this.foffset,0],"06"))},this.getIssuerHex=function(){return f(this.hex,0,[0,3+this.foffset],"30")},this.getIssuerString=function(){return j.hex2dn(this.getIssuerHex())},this.getSubjectHex=function(){return f(this.hex,0,[0,5+this.foffset],"30")},this.getSubjectString=function(){return j.hex2dn(this.getSubjectHex())},this.getNotBefore=function(){var a=e(this.hex,0,[0,4+this.foffset,0]);return a=a.replace(/(..)/g,"%$1"),a=decodeURIComponent(a)},this.getNotAfter=function(){var a=e(this.hex,0,[0,4+this.foffset,1]);return a=a.replace(/(..)/g,"%$1"),a=decodeURIComponent(a)},this.getPublicKeyHex=function(){return a.getTLVbyList(this.hex,0,[0,6+this.foffset],"30")},this.getPublicKeyIdx=function(){return g(this.hex,0,[0,6+this.foffset],"30")},this.getPublicKeyContentIdx=function(){var a=this.getPublicKeyIdx();return g(this.hex,a,[1,0],"30")},this.getPublicKey=function(){return Ja.getKey(this.getPublicKeyHex(),null,"pkcs8pub")},this.getSignatureAlgorithmName=function(){return i(e(this.hex,0,[1,0],"06"))},this.getSignatureValueHex=function(){return e(this.hex,0,[2],"03",!0)},this.verifySignature=function(a){var b=this.getSignatureAlgorithmName(),c=this.getSignatureValueHex(),d=f(this.hex,0,[0],"30"),e=new Ea.crypto.Signature({alg:b});return e.init(a),e.updateHex(d),e.verify(c)},this.parseExt=function(){if(3!==this.version)return-1;var c=g(this.hex,0,[0,7,0],"30"),d=b(this.hex,c);this.aExtInfo=new Array;for(var f=0;f<d.length;f++){var i={critical:!1},j=0;3===b(this.hex,d[f]).length&&(i.critical=!0,j=1),i.oid=a.hextooidstr(e(this.hex,d[f],[0],"06"));var k=g(this.hex,d[f],[1+j]);i.vidx=h(this.hex,k),this.aExtInfo.push(i)}},this.getExtInfo=function(a){var b=this.aExtInfo,c=a;if(a.match(/^[0-9.]+$/)||(c=Ea.asn1.x509.OID.name2oid(a)),""!==c)for(var d=0;d<b.length;d++)if(b[d].oid===c)return b[d]},this.getExtBasicConstraints=function(){var a=this.getExtInfo("basicConstraints");if(void 0===a)return a;var b=c(this.hex,a.vidx);if(""===b)return{};if("0101ff"===b)return{cA:!0};if("0101ff02"===b.substr(0,8)){var d=c(b,6);return{cA:!0,pathLen:parseInt(d,16)}}throw"basicConstraints parse error"},this.getExtKeyUsageBin=function(){var a=this.getExtInfo("keyUsage");if(void 0===a)return"";var b=c(this.hex,a.vidx);if(b.length%2!=0||b.length<=2)throw"malformed key usage value";var d=parseInt(b.substr(0,2)),e=parseInt(b.substr(2),16).toString(2);return e.substr(0,e.length-d)},this.getExtKeyUsageString=function(){for(var a=this.getExtKeyUsageBin(),b=new Array,c=0;c<a.length;c++)"1"==a.substr(c,1)&&b.push(ha.KEYUSAGE_NAME[c]);return b.join(",")},this.getExtSubjectKeyIdentifier=function(){var a=this.getExtInfo("subjectKeyIdentifier");return void 0===a?a:c(this.hex,a.vidx)},this.getExtAuthorityKeyIdentifier=function(){var a=this.getExtInfo("authorityKeyIdentifier");if(void 0===a)return a;for(var e={},f=d(this.hex,a.vidx),g=b(f,0),h=0;h<g.length;h++)"80"===f.substr(g[h],2)&&(e.kid=c(f,g[h]));return e},this.getExtExtKeyUsageName=function(){var a=this.getExtInfo("extKeyUsage");if(void 0===a)return a;var e=new Array,f=d(this.hex,a.vidx);if(""===f)return e;for(var g=b(f,0),h=0;h<g.length;h++)e.push(i(c(f,g[h])));return e},this.getExtSubjectAltName=function(){for(var a=this.getExtSubjectAltName2(),b=new Array,c=0;c<a.length;c++)"DNS"===a[c][0]&&b.push(a[c][1]);return b},this.getExtSubjectAltName2=function(){var a,e,f,g=this.getExtInfo("subjectAltName");if(void 0===g)return g;for(var h=new Array,i=d(this.hex,g.vidx),j=b(i,0),k=0;k<j.length;k++)f=i.substr(j[k],2),a=c(i,j[k]),"81"===f&&(e=P(a),h.push(["MAIL",e])),"82"===f&&(e=P(a),h.push(["DNS",e])),"84"===f&&(e=ha.hex2dn(a,0),h.push(["DN",e])),"86"===f&&(e=P(a),h.push(["URI",e])),"87"===f&&(e=ba(a),h.push(["IP",e]));return h},this.getExtCRLDistributionPointsURI=function(){var a=this.getExtInfo("cRLDistributionPoints");if(void 0===a)return a;for(var c=new Array,d=b(this.hex,a.vidx),f=0;f<d.length;f++)try{var g=P(e(this.hex,d[f],[0,0,0],"86"));c.push(g)}catch(a){}return c},this.getExtAIAInfo=function(){var a=this.getExtInfo("authorityInfoAccess");if(void 0===a)return a;for(var c={ocsp:[],caissuer:[]},d=b(this.hex,a.vidx),f=0;f<d.length;f++){var g=e(this.hex,d[f],[0],"06"),h=e(this.hex,d[f],[1],"86");"2b06010505073001"===g&&c.ocsp.push(P(h)),"2b06010505073002"===g&&c.caissuer.push(P(h))}return c},this.getExtCertificatePolicies=function(){var a=this.getExtInfo("certificatePolicies");if(void 0===a)return a;for(var f=d(this.hex,a.vidx),g=[],h=b(f,0),j=0;j<h.length;j++){var k={},l=b(f,h[j]);if(k.id=i(c(f,l[0])),2===l.length)for(var m=b(f,l[1]),n=0;n<m.length;n++){var o=e(f,m[n],[0],"06");"2b06010505070201"===o?k.cps=P(e(f,m[n],[1])):"2b06010505070202"===o&&(k.unotice=P(e(f,m[n],[1,0])))}g.push(k)}return g},this.readCertPEM=function(a){this.readCertHex(k(a))},this.readCertHex=function(a){this.hex=a,this.getVersion();try{g(this.hex,0,[0,7],"a3"),this.parseExt()}catch(a){}},this.getInfo=function(){var a,b,c;if(a="Basic Fields\n",a+="  serial number: "+this.getSerialNumberHex()+"\n",a+="  signature algorithm: "+this.getSignatureAlgorithmField()+"\n",a+="  issuer: "+this.getIssuerString()+"\n",a+="  notBefore: "+this.getNotBefore()+"\n",a+="  notAfter: "+this.getNotAfter()+"\n",a+="  subject: "+this.getSubjectString()+"\n",a+="  subject public key info: \n",a+="    key algorithm: "+(b=this.getPublicKey()).type+"\n","RSA"===b.type&&(a+="    n="+da(b.n.toString(16)).substr(0,16)+"...\n",a+="    e="+da(b.e.toString(16))+"\n"),void 0!==(c=this.aExtInfo)&&null!==c){a+="X509v3 Extensions:\n";for(var d=0;d<c.length;d++){var e=c[d],f=Ea.asn1.x509.OID.oid2name(e.oid);""===f&&(f=e.oid);var g="";if(!0===e.critical&&(g="CRITICAL"),a+="  "+f+" "+g+":\n","basicConstraints"===f){var h=this.getExtBasicConstraints();void 0===h.cA?a+="    {}\n":(a+="    cA=true",void 0!==h.pathLen&&(a+=", pathLen="+h.pathLen),a+="\n")}else if("keyUsage"===f)a+="    "+this.getExtKeyUsageString()+"\n";else if("subjectKeyIdentifier"===f)a+="    "+this.getExtSubjectKeyIdentifier()+"\n";else if("authorityKeyIdentifier"===f){var i=this.getExtAuthorityKeyIdentifier();void 0!==i.kid&&(a+="    kid="+i.kid+"\n")}else if("extKeyUsage"===f)a+="    "+this.getExtExtKeyUsageName().join(", ")+"\n";else if("subjectAltName"===f)a+="    "+this.getExtSubjectAltName2()+"\n";else if("cRLDistributionPoints"===f)a+="    "+this.getExtCRLDistributionPointsURI()+"\n";else if("authorityInfoAccess"===f){var j=this.getExtAIAInfo();void 0!==j.ocsp&&(a+="    ocsp: "+j.ocsp.join(",")+"\n"),void 0!==j.caissuer&&(a+="    caissuer: "+j.caissuer.join(",")+"\n")}else if("certificatePolicies"===f)for(var k=this.getExtCertificatePolicies(),l=0;l<k.length;l++)void 0!==k[l].id&&(a+="    policy oid: "+k[l].id+"\n"),void 0!==k[l].cps&&(a+="    cps: "+k[l].cps+"\n")}}return a+="signature algorithm: "+this.getSignatureAlgorithmName()+"\n",a+="signature: "+this.getSignatureValueHex().substr(0,16)+"...\n"}}var ia="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(a){return typeof a}:function(a){return a&&"function"==typeof Symbol&&a.constructor===Symbol&&a!==Symbol.prototype?"symbol":typeof a},ja={userAgent:!1},ka={};if(void 0===la)var la={};la.lang={extend:function(a,b,c){if(!b||!a)throw new Error("YAHOO.lang.extend failed, please check that all dependencies are included.");var d=function(){};if(d.prototype=b.prototype,a.prototype=new d,a.prototype.constructor=a,a.superclass=b.prototype,b.prototype.constructor==Object.prototype.constructor&&(b.prototype.constructor=b),c){var e;for(e in c)a.prototype[e]=c[e];var f=function(){},g=["toString","valueOf"];try{/MSIE/.test(ja.userAgent)&&(f=function(a,b){for(e=0;e<g.length;e+=1){var c=g[e],d=b[c];"function"==typeof d&&d!=Object.prototype[c]&&(a[c]=d)}})}catch(h){}f(a.prototype,c)}}};var ma=ma||function(a,b){var c={},d=c.lib={},e=d.Base=function(){function a(){}return{extend:function(b){a.prototype=this;var c=new a;return b&&c.mixIn(b),c.hasOwnProperty("init")||(c.init=function(){c.$super.init.apply(this,arguments)}),c.init.prototype=c,c.$super=this,c},create:function(){var a=this.extend();return a.init.apply(a,arguments),a},init:function(){},mixIn:function(a){for(var b in a)a.hasOwnProperty(b)&&(this[b]=a[b]);a.hasOwnProperty("toString")&&(this.toString=a.toString)},clone:function(){return this.init.prototype.extend(this)}}}(),f=d.WordArray=e.extend({init:function(a,b){a=this.words=a||[],this.sigBytes=void 0!=b?b:4*a.length},toString:function(a){return(a||h).stringify(this)},concat:function(a){var b=this.words,c=a.words,d=this.sigBytes,e=a.sigBytes;if(this.clamp(),d%4)for(var f=0;f<e;f++){var g=c[f>>>2]>>>24-f%4*8&255;b[d+f>>>2]|=g<<24-(d+f)%4*8}else for(f=0;f<e;f+=4)b[d+f>>>2]=c[f>>>2];return this.sigBytes+=e,this},clamp:function(){var b=this.words,c=this.sigBytes;b[c>>>2]&=4294967295<<32-c%4*8,b.length=a.ceil(c/4)},clone:function(){var a=e.clone.call(this);return a.words=this.words.slice(0),a},random:function(b){for(var c=[],d=0;d<b;d+=4)c.push(4294967296*a.random()|0);return new f.init(c,b)}}),g=c.enc={},h=g.Hex={stringify:function(a){for(var b=a.words,c=a.sigBytes,d=[],e=0;e<c;e++){var f=b[e>>>2]>>>24-e%4*8&255;d.push((f>>>4).toString(16)),d.push((15&f).toString(16))}return d.join("")},parse:function(a){for(var b=a.length,c=[],d=0;d<b;d+=2)c[d>>>3]|=parseInt(a.substr(d,2),16)<<24-d%8*4;return new f.init(c,b/2)}},i=g.Latin1={stringify:function(a){for(var b=a.words,c=a.sigBytes,d=[],e=0;e<c;e++){var f=b[e>>>2]>>>24-e%4*8&255;d.push(String.fromCharCode(f))}return d.join("")},parse:function(a){for(var b=a.length,c=[],d=0;d<b;d++)c[d>>>2]|=(255&a.charCodeAt(d))<<24-d%4*8;return new f.init(c,b)}},j=g.Utf8={stringify:function(a){try{return decodeURIComponent(escape(i.stringify(a)))}catch(a){throw new Error("Malformed UTF-8 data")}},parse:function(a){return i.parse(unescape(encodeURIComponent(a)))}},k=d.BufferedBlockAlgorithm=e.extend({reset:function(){this._data=new f.init,this._nDataBytes=0},_append:function(a){"string"==typeof a&&(a=j.parse(a)),this._data.concat(a),this._nDataBytes+=a.sigBytes},_process:function(b){var c=this._data,d=c.words,e=c.sigBytes,g=this.blockSize,h=e/(4*g),i=(h=b?a.ceil(h):a.max((0|h)-this._minBufferSize,0))*g,j=a.min(4*i,e);if(i){for(var k=0;k<i;k+=g)this._doProcessBlock(d,k);var l=d.splice(0,i);c.sigBytes-=j}return new f.init(l,j)},clone:function(){var a=e.clone.call(this);return a._data=this._data.clone(),a},_minBufferSize:0}),l=(d.Hasher=k.extend({cfg:e.extend(),init:function(a){this.cfg=this.cfg.extend(a),this.reset()},reset:function(){k.reset.call(this),this._doReset()},update:function(a){return this._append(a),this._process(),this},finalize:function(a){return a&&this._append(a),this._doFinalize()},blockSize:16,_createHelper:function(a){return function(b,c){return new a.init(c).finalize(b)}},_createHmacHelper:function(a){return function(b,c){return new l.HMAC.init(a,c).finalize(b)}}}),c.algo={});return c}(Math);!function(a){var b,c=(b=ma).lib,d=c.Base,e=c.WordArray;(b=b.x64={}).Word=d.extend({init:function(a,b){this.high=a,this.low=b}}),b.WordArray=d.extend({init:function(a,b){a=this.words=a||[],this.sigBytes=void 0!=b?b:8*a.length},toX32:function(){for(var a=this.words,b=a.length,c=[],d=0;d<b;d++){var f=a[d];c.push(f.high),c.push(f.low)}return e.create(c,this.sigBytes)},clone:function(){for(var a=d.clone.call(this),b=a.words=this.words.slice(0),c=b.length,e=0;e<c;e++)b[e]=b[e].clone();return a}})}(),function(){var a=ma,b=a.lib.WordArray;a.enc.Base64={stringify:function(a){var b=a.words,c=a.sigBytes,d=this._map;a.clamp(),a=[];for(var e=0;e<c;e+=3)for(var f=(b[e>>>2]>>>24-e%4*8&255)<<16|(b[e+1>>>2]>>>24-(e+1)%4*8&255)<<8|b[e+2>>>2]>>>24-(e+2)%4*8&255,g=0;4>g&&e+.75*g<c;g++)a.push(d.charAt(f>>>6*(3-g)&63));if(b=d.charAt(64))for(;a.length%4;)a.push(b);return a.join("")},parse:function(a){var c=a.length,d=this._map;(e=d.charAt(64))&&-1!=(e=a.indexOf(e))&&(c=e);for(var e=[],f=0,g=0;g<c;g++)if(g%4){var h=d.indexOf(a.charAt(g-1))<<g%4*2,i=d.indexOf(a.charAt(g))>>>6-g%4*2;e[f>>>2]|=(h|i)<<24-f%4*8,f++}return b.create(e,f)},_map:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/="}}(),function(a){for(var b=ma,c=(e=b.lib).WordArray,d=e.Hasher,e=b.algo,f=[],g=[],h=function(a){return 4294967296*(a-(0|a))|0},i=2,j=0;64>j;){var k;a:{k=i;for(var l=a.sqrt(k),m=2;m<=l;m++)if(!(k%m)){k=!1;break a}k=!0}k&&(8>j&&(f[j]=h(a.pow(i,.5))),g[j]=h(a.pow(i,1/3)),j++),i++}var n=[];e=e.SHA256=d.extend({_doReset:function(){this._hash=new c.init(f.slice(0))},_doProcessBlock:function(a,b){for(var c=this._hash.words,d=c[0],e=c[1],f=c[2],h=c[3],i=c[4],j=c[5],k=c[6],l=c[7],m=0;64>m;m++){if(16>m)n[m]=0|a[b+m];else{var o=n[m-15],p=n[m-2];n[m]=((o<<25|o>>>7)^(o<<14|o>>>18)^o>>>3)+n[m-7]+((p<<15|p>>>17)^(p<<13|p>>>19)^p>>>10)+n[m-16]}o=l+((i<<26|i>>>6)^(i<<21|i>>>11)^(i<<7|i>>>25))+(i&j^~i&k)+g[m]+n[m],p=((d<<30|d>>>2)^(d<<19|d>>>13)^(d<<10|d>>>22))+(d&e^d&f^e&f),l=k,k=j,j=i,i=h+o|0,h=f,f=e,e=d,d=o+p|0}c[0]=c[0]+d|0,c[1]=c[1]+e|0,c[2]=c[2]+f|0,c[3]=c[3]+h|0,c[4]=c[4]+i|0,c[5]=c[5]+j|0,c[6]=c[6]+k|0,c[7]=c[7]+l|0},_doFinalize:function(){var b=this._data,c=b.words,d=8*this._nDataBytes,e=8*b.sigBytes;return c[e>>>5]|=128<<24-e%32,c[14+(e+64>>>9<<4)]=a.floor(d/4294967296),c[15+(e+64>>>9<<4)]=d,b.sigBytes=4*c.length,this._process(),this._hash},clone:function(){var a=d.clone.call(this);return a._hash=this._hash.clone(),a}}),b.SHA256=d._createHelper(e),b.HmacSHA256=d._createHmacHelper(e)}(Math),function(){function a(){return d.create.apply(d,arguments)}for(var b=ma,c=b.lib.Hasher,d=(f=b.x64).Word,e=f.WordArray,f=b.algo,g=[a(1116352408,3609767458),a(1899447441,602891725),a(3049323471,3964484399),a(3921009573,2173295548),a(961987163,4081628472),a(1508970993,3053834265),a(2453635748,2937671579),a(2870763221,3664609560),a(3624381080,2734883394),a(310598401,1164996542),a(607225278,1323610764),a(1426881987,3590304994),a(1925078388,4068182383),a(2162078206,991336113),a(2614888103,633803317),a(3248222580,3479774868),a(3835390401,2666613458),a(4022224774,944711139),a(264347078,2341262773),a(604807628,2007800933),a(770255983,1495990901),a(1249150122,1856431235),a(1555081692,3175218132),a(1996064986,2198950837),a(2554220882,3999719339),a(2821834349,766784016),a(2952996808,2566594879),a(3210313671,3203337956),a(3336571891,1034457026),a(3584528711,2466948901),a(113926993,3758326383),a(338241895,168717936),a(666307205,1188179964),a(773529912,1546045734),a(1294757372,1522805485),a(1396182291,2643833823),a(1695183700,2343527390),a(1986661051,1014477480),a(2177026350,1206759142),a(2456956037,344077627),a(2730485921,1290863460),a(2820302411,3158454273),a(3259730800,3505952657),a(3345764771,106217008),a(3516065817,3606008344),a(3600352804,1432725776),a(4094571909,1467031594),a(275423344,851169720),a(430227734,3100823752),a(506948616,1363258195),a(659060556,3750685593),a(883997877,3785050280),a(958139571,3318307427),a(1322822218,3812723403),a(1537002063,2003034995),a(1747873779,3602036899),a(1955562222,1575990012),a(2024104815,1125592928),a(2227730452,2716904306),a(2361852424,442776044),a(2428436474,593698344),a(2756734187,3733110249),a(3204031479,2999351573),a(3329325298,3815920427),a(3391569614,3928383900),a(3515267271,566280711),a(3940187606,3454069534),a(4118630271,4000239992),a(116418474,1914138554),a(174292421,2731055270),a(289380356,3203993006),a(460393269,320620315),a(685471733,587496836),a(852142971,1086792851),a(1017036298,365543100),a(1126000580,2618297676),a(1288033470,3409855158),a(1501505948,4234509866),a(1607167915,987167468),a(1816402316,1246189591)],h=[],i=0;80>i;i++)h[i]=a();f=f.SHA512=c.extend({_doReset:function(){this._hash=new e.init([new d.init(1779033703,4089235720),new d.init(3144134277,2227873595),new d.init(1013904242,4271175723),new d.init(2773480762,1595750129),new d.init(1359893119,2917565137),new d.init(2600822924,725511199),new d.init(528734635,4215389547),new d.init(1541459225,327033209)])},_doProcessBlock:function(a,b){for(var c=(l=this._hash.words)[0],d=l[1],e=l[2],f=l[3],i=l[4],j=l[5],k=l[6],l=l[7],m=c.high,n=c.low,o=d.high,p=d.low,q=e.high,r=e.low,s=f.high,t=f.low,u=i.high,v=i.low,w=j.high,x=j.low,y=k.high,z=k.low,A=l.high,B=l.low,C=m,D=n,E=o,F=p,G=q,H=r,I=s,J=t,K=u,L=v,M=w,N=x,O=y,P=z,Q=A,R=B,S=0;80>S;S++){var T=h[S];if(16>S)var U=T.high=0|a[b+2*S],V=T.low=0|a[b+2*S+1];else{U=((V=(U=h[S-15]).high)>>>1|(W=U.low)<<31)^(V>>>8|W<<24)^V>>>7;var W=(W>>>1|V<<31)^(W>>>8|V<<24)^(W>>>7|V<<25),X=((V=(X=h[S-2]).high)>>>19|(Y=X.low)<<13)^(V<<3|Y>>>29)^V>>>6,Y=(Y>>>19|V<<13)^(Y<<3|V>>>29)^(Y>>>6|V<<26),Z=(V=h[S-7]).high,$=(_=h[S-16]).high,_=_.low;U=(U=(U=U+Z+((V=W+V.low)>>>0<W>>>0?1:0))+X+((V+=Y)>>>0<Y>>>0?1:0))+$+((V+=_)>>>0<_>>>0?1:0),T.high=U,T.low=V}Z=K&M^~K&O,_=L&N^~L&P,T=C&E^C&G^E&G;var aa=D&F^D&H^F&H,ba=(W=(C>>>28|D<<4)^(C<<30|D>>>2)^(C<<25|D>>>7),X=(D>>>28|C<<4)^(D<<30|C>>>2)^(D<<25|C>>>7),(Y=g[S]).high),ca=Y.low;$=($=($=($=Q+((K>>>14|L<<18)^(K>>>18|L<<14)^(K<<23|L>>>9))+((Y=R+((L>>>14|K<<18)^(L>>>18|K<<14)^(L<<23|K>>>9)))>>>0<R>>>0?1:0))+Z+((Y+=_)>>>0<_>>>0?1:0))+ba+((Y+=ca)>>>0<ca>>>0?1:0))+U+((Y+=V)>>>0<V>>>0?1:0),T=W+T+((V=X+aa)>>>0<X>>>0?1:0),Q=O,R=P,O=M,P=N,M=K,N=L,K=I+$+((L=J+Y|0)>>>0<J>>>0?1:0)|0,I=G,J=H,G=E,H=F,E=C,F=D,C=$+T+((D=Y+V|0)>>>0<Y>>>0?1:0)|0}n=c.low=n+D,c.high=m+C+(n>>>0<D>>>0?1:0),p=d.low=p+F,d.high=o+E+(p>>>0<F>>>0?1:0),r=e.low=r+H,e.high=q+G+(r>>>0<H>>>0?1:0),t=f.low=t+J,f.high=s+I+(t>>>0<J>>>0?1:0),v=i.low=v+L,i.high=u+K+(v>>>0<L>>>0?1:0),x=j.low=x+N,j.high=w+M+(x>>>0<N>>>0?1:0),z=k.low=z+P,k.high=y+O+(z>>>0<P>>>0?1:0),B=l.low=B+R,l.high=A+Q+(B>>>0<R>>>0?1:0)},_doFinalize:function(){var a=this._data,b=a.words,c=8*this._nDataBytes,d=8*a.sigBytes;return b[d>>>5]|=128<<24-d%32,b[30+(d+128>>>10<<5)]=Math.floor(c/4294967296),b[31+(d+128>>>10<<5)]=c,a.sigBytes=4*b.length,this._process(),this._hash.toX32()},clone:function(){var a=c.clone.call(this);return a._hash=this._hash.clone(),a},blockSize:32}),b.SHA512=c._createHelper(f),b.HmacSHA512=c._createHmacHelper(f)}(),function(){var a=ma,b=(e=a.x64).Word,c=e.WordArray,d=(e=a.algo).SHA512,e=e.SHA384=d.extend({_doReset:function(){this._hash=new c.init([new b.init(3418070365,3238371032),new b.init(1654270250,914150663),new b.init(2438529370,812702999),new b.init(355462360,4144912697),new b.init(1731405415,4290775857),new b.init(2394180231,1750603025),new b.init(3675008525,1694076839),new b.init(1203062813,3204075428)])},_doFinalize:function(){var a=d._doFinalize.call(this);return a.sigBytes-=16,a}});a.SHA384=d._createHelper(e),a.HmacSHA384=d._createHmacHelper(e)}();var na,oa="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",pa="=";"Microsoft Internet Explorer"==ja.appName?(f.prototype.am=function(a,b,c,d,e,f){for(var g=32767&b,h=b>>15;--f>=0;){var i=32767&this[a],j=this[a++]>>15,k=h*i+j*g;e=((i=g*i+((32767&k)<<15)+c[d]+(1073741823&e))>>>30)+(k>>>15)+h*j+(e>>>30),c[d++]=1073741823&i}return e},na=30):"Netscape"!=ja.appName?(f.prototype.am=function(a,b,c,d,e,f){for(;--f>=0;){var g=b*this[a++]+c[d]+e;e=Math.floor(g/67108864),c[d++]=67108863&g}return e},na=26):(f.prototype.am=function(a,b,c,d,e,f){for(var g=16383&b,h=b>>14;--f>=0;){var i=16383&this[a],j=this[a++]>>14,k=h*i+j*g;e=((i=g*i+((16383&k)<<14)+c[d]+e)>>28)+(k>>14)+h*j,c[d++]=268435455&i}return e},na=28),f.prototype.DB=na,f.prototype.DM=(1<<na)-1,f.prototype.DV=1<<na,f.prototype.FV=Math.pow(2,52),f.prototype.F1=52-na,f.prototype.F2=2*na-52;var qa,ra,sa="0123456789abcdefghijklmnopqrstuvwxyz",ta=new Array;for(qa="0".charCodeAt(0),ra=0;ra<=9;++ra)ta[qa++]=ra;for(qa="a".charCodeAt(0),ra=10;ra<36;++ra)ta[qa++]=ra;for(qa="A".charCodeAt(0),ra=10;ra<36;++ra)ta[qa++]=ra;l.prototype.convert=function(a){return a.s<0||a.compareTo(this.m)>=0?a.mod(this.m):a},l.prototype.revert=function(a){return a},l.prototype.reduce=function(a){a.divRemTo(this.m,null,a)},l.prototype.mulTo=function(a,b,c){a.multiplyTo(b,c),this.reduce(c)},l.prototype.sqrTo=function(a,b){a.squareTo(b),this.reduce(b)},m.prototype.convert=function(a){var b=g();return a.abs().dlShiftTo(this.m.t,b),b.divRemTo(this.m,null,b),a.s<0&&b.compareTo(f.ZERO)>0&&this.m.subTo(b,b),b},m.prototype.revert=function(a){var b=g();return a.copyTo(b),this.reduce(b),b},m.prototype.reduce=function(a){for(;a.t<=this.mt2;)a[a.t++]=0;for(var b=0;b<this.m.t;++b){var c=32767&a[b],d=c*this.mpl+((c*this.mph+(a[b]>>15)*this.mpl&this.um)<<15)&a.DM;for(a[c=b+this.m.t]+=this.m.am(0,d,a,b,0,this.m.t);a[c]>=a.DV;)a[c]-=a.DV,a[++c]++}a.clamp(),a.drShiftTo(this.m.t,a),a.compareTo(this.m)>=0&&a.subTo(this.m,a)},m.prototype.mulTo=function(a,b,c){a.multiplyTo(b,c),this.reduce(c)},m.prototype.sqrTo=function(a,b){a.squareTo(b),this.reduce(b)},f.prototype.copyTo=function(a){for(var b=this.t-1;b>=0;--b)a[b]=this[b];a.t=this.t,a.s=this.s},f.prototype.fromInt=function(a){this.t=1,this.s=a<0?-1:0,a>0?this[0]=a:a<-1?this[0]=a+this.DV:this.t=0},f.prototype.fromString=function(a,b){var c;if(16==b)c=4;else if(8==b)c=3;else if(256==b)c=8;else if(2==b)c=1;else if(32==b)c=5;else{if(4!=b)return void this.fromRadix(a,b);c=2}this.t=0,this.s=0;for(var d=a.length,e=!1,g=0;--d>=0;){var h=8==c?255&a[d]:i(a,d);h<0?"-"==a.charAt(d)&&(e=!0):(e=!1,0==g?this[this.t++]=h:g+c>this.DB?(this[this.t-1]|=(h&(1<<this.DB-g)-1)<<g,this[this.t++]=h>>this.DB-g):this[this.t-1]|=h<<g,(g+=c)>=this.DB&&(g-=this.DB))}8==c&&0!=(128&a[0])&&(this.s=-1,g>0&&(this[this.t-1]|=(1<<this.DB-g)-1<<g)),this.clamp(),e&&f.ZERO.subTo(this,this)},f.prototype.clamp=function(){for(var a=this.s&this.DM;this.t>0&&this[this.t-1]==a;)--this.t},f.prototype.dlShiftTo=function(a,b){var c;for(c=this.t-1;c>=0;--c)b[c+a]=this[c];for(c=a-1;c>=0;--c)b[c]=0;b.t=this.t+a,b.s=this.s},f.prototype.drShiftTo=function(a,b){for(var c=a;c<this.t;++c)b[c-a]=this[c];b.t=Math.max(this.t-a,0),b.s=this.s},f.prototype.lShiftTo=function(a,b){var c,d=a%this.DB,e=this.DB-d,f=(1<<e)-1,g=Math.floor(a/this.DB),h=this.s<<d&this.DM;for(c=this.t-1;c>=0;--c)b[c+g+1]=this[c]>>e|h,h=(this[c]&f)<<d;for(c=g-1;c>=0;--c)b[c]=0;b[g]=h,b.t=this.t+g+1,b.s=this.s,b.clamp()},f.prototype.rShiftTo=function(a,b){
b.s=this.s;var c=Math.floor(a/this.DB);if(c>=this.t)b.t=0;else{var d=a%this.DB,e=this.DB-d,f=(1<<d)-1;b[0]=this[c]>>d;for(var g=c+1;g<this.t;++g)b[g-c-1]|=(this[g]&f)<<e,b[g-c]=this[g]>>d;d>0&&(b[this.t-c-1]|=(this.s&f)<<e),b.t=this.t-c,b.clamp()}},f.prototype.subTo=function(a,b){for(var c=0,d=0,e=Math.min(a.t,this.t);c<e;)d+=this[c]-a[c],b[c++]=d&this.DM,d>>=this.DB;if(a.t<this.t){for(d-=a.s;c<this.t;)d+=this[c],b[c++]=d&this.DM,d>>=this.DB;d+=this.s}else{for(d+=this.s;c<a.t;)d-=a[c],b[c++]=d&this.DM,d>>=this.DB;d-=a.s}b.s=d<0?-1:0,d<-1?b[c++]=this.DV+d:d>0&&(b[c++]=d),b.t=c,b.clamp()},f.prototype.multiplyTo=function(a,b){var c=this.abs(),d=a.abs(),e=c.t;for(b.t=e+d.t;--e>=0;)b[e]=0;for(e=0;e<d.t;++e)b[e+c.t]=c.am(0,d[e],b,e,0,c.t);b.s=0,b.clamp(),this.s!=a.s&&f.ZERO.subTo(b,b)},f.prototype.squareTo=function(a){for(var b=this.abs(),c=a.t=2*b.t;--c>=0;)a[c]=0;for(c=0;c<b.t-1;++c){var d=b.am(c,b[c],a,2*c,0,1);(a[c+b.t]+=b.am(c+1,2*b[c],a,2*c+1,d,b.t-c-1))>=b.DV&&(a[c+b.t]-=b.DV,a[c+b.t+1]=1)}a.t>0&&(a[a.t-1]+=b.am(c,b[c],a,2*c,0,1)),a.s=0,a.clamp()},f.prototype.divRemTo=function(a,b,c){var d=a.abs();if(!(d.t<=0)){var e=this.abs();if(e.t<d.t)return null!=b&&b.fromInt(0),void(null!=c&&this.copyTo(c));null==c&&(c=g());var h=g(),i=this.s,j=a.s,l=this.DB-k(d[d.t-1]);l>0?(d.lShiftTo(l,h),e.lShiftTo(l,c)):(d.copyTo(h),e.copyTo(c));var m=h.t,n=h[m-1];if(0!=n){var o=n*(1<<this.F1)+(m>1?h[m-2]>>this.F2:0),p=this.FV/o,q=(1<<this.F1)/o,r=1<<this.F2,s=c.t,t=s-m,u=null==b?g():b;for(h.dlShiftTo(t,u),c.compareTo(u)>=0&&(c[c.t++]=1,c.subTo(u,c)),f.ONE.dlShiftTo(m,u),u.subTo(h,h);h.t<m;)h[h.t++]=0;for(;--t>=0;){var v=c[--s]==n?this.DM:Math.floor(c[s]*p+(c[s-1]+r)*q);if((c[s]+=h.am(0,v,c,t,0,m))<v)for(h.dlShiftTo(t,u),c.subTo(u,c);c[s]<--v;)c.subTo(u,c)}null!=b&&(c.drShiftTo(m,b),i!=j&&f.ZERO.subTo(b,b)),c.t=m,c.clamp(),l>0&&c.rShiftTo(l,c),i<0&&f.ZERO.subTo(c,c)}}},f.prototype.invDigit=function(){if(this.t<1)return 0;var a=this[0];if(0==(1&a))return 0;var b=3&a;return(b=(b=(b=(b=b*(2-(15&a)*b)&15)*(2-(255&a)*b)&255)*(2-((65535&a)*b&65535))&65535)*(2-a*b%this.DV)%this.DV)>0?this.DV-b:-b},f.prototype.isEven=function(){return 0==(this.t>0?1&this[0]:this.s)},f.prototype.exp=function(a,b){if(a>4294967295||a<1)return f.ONE;var c=g(),d=g(),e=b.convert(this),h=k(a)-1;for(e.copyTo(c);--h>=0;)if(b.sqrTo(c,d),(a&1<<h)>0)b.mulTo(d,e,c);else{var i=c;c=d,d=i}return b.revert(c)},f.prototype.toString=function(a){if(this.s<0)return"-"+this.negate().toString(a);var b;if(16==a)b=4;else if(8==a)b=3;else if(2==a)b=1;else if(32==a)b=5;else{if(4!=a)return this.toRadix(a);b=2}var c,d=(1<<b)-1,e=!1,f="",g=this.t,i=this.DB-g*this.DB%b;if(g-- >0)for(i<this.DB&&(c=this[g]>>i)>0&&(e=!0,f=h(c));g>=0;)i<b?(c=(this[g]&(1<<i)-1)<<b-i,c|=this[--g]>>(i+=this.DB-b)):(c=this[g]>>(i-=b)&d,i<=0&&(i+=this.DB,--g)),c>0&&(e=!0),e&&(f+=h(c));return e?f:"0"},f.prototype.negate=function(){var a=g();return f.ZERO.subTo(this,a),a},f.prototype.abs=function(){return this.s<0?this.negate():this},f.prototype.compareTo=function(a){var b=this.s-a.s;if(0!=b)return b;var c=this.t;if(0!=(b=c-a.t))return this.s<0?-b:b;for(;--c>=0;)if(0!=(b=this[c]-a[c]))return b;return 0},f.prototype.bitLength=function(){return this.t<=0?0:this.DB*(this.t-1)+k(this[this.t-1]^this.s&this.DM)},f.prototype.mod=function(a){var b=g();return this.abs().divRemTo(a,null,b),this.s<0&&b.compareTo(f.ZERO)>0&&a.subTo(b,b),b},f.prototype.modPowInt=function(a,b){var c;return c=a<256||b.isEven()?new l(b):new m(b),this.exp(a,c)},f.ZERO=j(0),f.ONE=j(1),t.prototype.convert=u,t.prototype.revert=u,t.prototype.mulTo=function(a,b,c){a.multiplyTo(b,c)},t.prototype.sqrTo=function(a,b){a.squareTo(b)},v.prototype.convert=function(a){if(a.s<0||a.t>2*this.m.t)return a.mod(this.m);if(a.compareTo(this.m)<0)return a;var b=g();return a.copyTo(b),this.reduce(b),b},v.prototype.revert=function(a){return a},v.prototype.reduce=function(a){for(a.drShiftTo(this.m.t-1,this.r2),a.t>this.m.t+1&&(a.t=this.m.t+1,a.clamp()),this.mu.multiplyUpperTo(this.r2,this.m.t+1,this.q3),this.m.multiplyLowerTo(this.q3,this.m.t+1,this.r2);a.compareTo(this.r2)<0;)a.dAddOffset(1,this.m.t+1);for(a.subTo(this.r2,a);a.compareTo(this.m)>=0;)a.subTo(this.m,a)},v.prototype.mulTo=function(a,b,c){a.multiplyTo(b,c),this.reduce(c)},v.prototype.sqrTo=function(a,b){a.squareTo(b),this.reduce(b)};var ua=[2,3,5,7,11,13,17,19,23,29,31,37,41,43,47,53,59,61,67,71,73,79,83,89,97,101,103,107,109,113,127,131,137,139,149,151,157,163,167,173,179,181,191,193,197,199,211,223,227,229,233,239,241,251,257,263,269,271,277,281,283,293,307,311,313,317,331,337,347,349,353,359,367,373,379,383,389,397,401,409,419,421,431,433,439,443,449,457,461,463,467,479,487,491,499,503,509,521,523,541,547,557,563,569,571,577,587,593,599,601,607,613,617,619,631,641,643,647,653,659,661,673,677,683,691,701,709,719,727,733,739,743,751,757,761,769,773,787,797,809,811,821,823,827,829,839,853,857,859,863,877,881,883,887,907,911,919,929,937,941,947,953,967,971,977,983,991,997],va=(1<<26)/ua[ua.length-1];f.prototype.chunkSize=function(a){return Math.floor(Math.LN2*this.DB/Math.log(a))},f.prototype.toRadix=function(a){if(null==a&&(a=10),0==this.signum()||a<2||a>36)return"0";var b=this.chunkSize(a),c=Math.pow(a,b),d=j(c),e=g(),f=g(),h="";for(this.divRemTo(d,e,f);e.signum()>0;)h=(c+f.intValue()).toString(a).substr(1)+h,e.divRemTo(d,e,f);return f.intValue().toString(a)+h},f.prototype.fromRadix=function(a,b){this.fromInt(0),null==b&&(b=10);for(var c=this.chunkSize(b),d=Math.pow(b,c),e=!1,g=0,h=0,j=0;j<a.length;++j){var k=i(a,j);k<0?"-"==a.charAt(j)&&0==this.signum()&&(e=!0):(h=b*h+k,++g>=c&&(this.dMultiply(d),this.dAddOffset(h,0),g=0,h=0))}g>0&&(this.dMultiply(Math.pow(b,g)),this.dAddOffset(h,0)),e&&f.ZERO.subTo(this,this)},f.prototype.fromNumber=function(a,b,c){if("number"==typeof b)if(a<2)this.fromInt(1);else for(this.fromNumber(a,c),this.testBit(a-1)||this.bitwiseTo(f.ONE.shiftLeft(a-1),o,this),this.isEven()&&this.dAddOffset(1,0);!this.isProbablePrime(b);)this.dAddOffset(2,0),this.bitLength()>a&&this.subTo(f.ONE.shiftLeft(a-1),this);else{var d=new Array,e=7&a;d.length=1+(a>>3),b.nextBytes(d),e>0?d[0]&=(1<<e)-1:d[0]=0,this.fromString(d,256)}},f.prototype.bitwiseTo=function(a,b,c){var d,e,f=Math.min(a.t,this.t);for(d=0;d<f;++d)c[d]=b(this[d],a[d]);if(a.t<this.t){for(e=a.s&this.DM,d=f;d<this.t;++d)c[d]=b(this[d],e);c.t=this.t}else{for(e=this.s&this.DM,d=f;d<a.t;++d)c[d]=b(e,a[d]);c.t=a.t}c.s=b(this.s,a.s),c.clamp()},f.prototype.changeBit=function(a,b){var c=f.ONE.shiftLeft(a);return this.bitwiseTo(c,b,c),c},f.prototype.addTo=function(a,b){for(var c=0,d=0,e=Math.min(a.t,this.t);c<e;)d+=this[c]+a[c],b[c++]=d&this.DM,d>>=this.DB;if(a.t<this.t){for(d+=a.s;c<this.t;)d+=this[c],b[c++]=d&this.DM,d>>=this.DB;d+=this.s}else{for(d+=this.s;c<a.t;)d+=a[c],b[c++]=d&this.DM,d>>=this.DB;d+=a.s}b.s=d<0?-1:0,d>0?b[c++]=d:d<-1&&(b[c++]=this.DV+d),b.t=c,b.clamp()},f.prototype.dMultiply=function(a){this[this.t]=this.am(0,a-1,this,0,0,this.t),++this.t,this.clamp()},f.prototype.dAddOffset=function(a,b){if(0!=a){for(;this.t<=b;)this[this.t++]=0;for(this[b]+=a;this[b]>=this.DV;)this[b]-=this.DV,++b>=this.t&&(this[this.t++]=0),++this[b]}},f.prototype.multiplyLowerTo=function(a,b,c){var d,e=Math.min(this.t+a.t,b);for(c.s=0,c.t=e;e>0;)c[--e]=0;for(d=c.t-this.t;e<d;++e)c[e+this.t]=this.am(0,a[e],c,e,0,this.t);for(d=Math.min(a.t,b);e<d;++e)this.am(0,a[e],c,e,0,b-e);c.clamp()},f.prototype.multiplyUpperTo=function(a,b,c){--b;var d=c.t=this.t+a.t-b;for(c.s=0;--d>=0;)c[d]=0;for(d=Math.max(b-this.t,0);d<a.t;++d)c[this.t+d-b]=this.am(b-d,a[d],c,0,0,this.t+d-b);c.clamp(),c.drShiftTo(1,c)},f.prototype.modInt=function(a){if(a<=0)return 0;var b=this.DV%a,c=this.s<0?a-1:0;if(this.t>0)if(0==b)c=this[0]%a;else for(var d=this.t-1;d>=0;--d)c=(b*c+this[d])%a;return c},f.prototype.millerRabin=function(a){var b=this.subtract(f.ONE),c=b.getLowestSetBit();if(c<=0)return!1;var d=b.shiftRight(c);(a=a+1>>1)>ua.length&&(a=ua.length);for(var e=g(),h=0;h<a;++h){e.fromInt(ua[Math.floor(Math.random()*ua.length)]);var i=e.modPow(d,this);if(0!=i.compareTo(f.ONE)&&0!=i.compareTo(b)){for(var j=1;j++<c&&0!=i.compareTo(b);)if(0==(i=i.modPowInt(2,this)).compareTo(f.ONE))return!1;if(0!=i.compareTo(b))return!1}}return!0},f.prototype.clone=function(){var a=g();return this.copyTo(a),a},f.prototype.intValue=function(){if(this.s<0){if(1==this.t)return this[0]-this.DV;if(0==this.t)return-1}else{if(1==this.t)return this[0];if(0==this.t)return 0}return(this[1]&(1<<32-this.DB)-1)<<this.DB|this[0]},f.prototype.byteValue=function(){return 0==this.t?this.s:this[0]<<24>>24},f.prototype.shortValue=function(){return 0==this.t?this.s:this[0]<<16>>16},f.prototype.signum=function(){return this.s<0?-1:this.t<=0||1==this.t&&this[0]<=0?0:1},f.prototype.toByteArray=function(){var a=this.t,b=new Array;b[0]=this.s;var c,d=this.DB-a*this.DB%8,e=0;if(a-- >0)for(d<this.DB&&(c=this[a]>>d)!=(this.s&this.DM)>>d&&(b[e++]=c|this.s<<this.DB-d);a>=0;)d<8?(c=(this[a]&(1<<d)-1)<<8-d,c|=this[--a]>>(d+=this.DB-8)):(c=this[a]>>(d-=8)&255,d<=0&&(d+=this.DB,--a)),0!=(128&c)&&(c|=-256),0==e&&(128&this.s)!=(128&c)&&++e,(e>0||c!=this.s)&&(b[e++]=c);return b},f.prototype.equals=function(a){return 0==this.compareTo(a)},f.prototype.min=function(a){return this.compareTo(a)<0?this:a},f.prototype.max=function(a){return this.compareTo(a)>0?this:a},f.prototype.and=function(a){var b=g();return this.bitwiseTo(a,n,b),b},f.prototype.or=function(a){var b=g();return this.bitwiseTo(a,o,b),b},f.prototype.xor=function(a){var b=g();return this.bitwiseTo(a,p,b),b},f.prototype.andNot=function(a){var b=g();return this.bitwiseTo(a,q,b),b},f.prototype.not=function(){for(var a=g(),b=0;b<this.t;++b)a[b]=this.DM&~this[b];return a.t=this.t,a.s=~this.s,a},f.prototype.shiftLeft=function(a){var b=g();return a<0?this.rShiftTo(-a,b):this.lShiftTo(a,b),b},f.prototype.shiftRight=function(a){var b=g();return a<0?this.lShiftTo(-a,b):this.rShiftTo(a,b),b},f.prototype.getLowestSetBit=function(){for(var a=0;a<this.t;++a)if(0!=this[a])return a*this.DB+r(this[a]);return this.s<0?this.t*this.DB:-1},f.prototype.bitCount=function(){for(var a=0,b=this.s&this.DM,c=0;c<this.t;++c)a+=s(this[c]^b);return a},f.prototype.testBit=function(a){var b=Math.floor(a/this.DB);return b>=this.t?0!=this.s:0!=(this[b]&1<<a%this.DB)},f.prototype.setBit=function(a){return this.changeBit(a,o)},f.prototype.clearBit=function(a){return this.changeBit(a,q)},f.prototype.flipBit=function(a){return this.changeBit(a,p)},f.prototype.add=function(a){var b=g();return this.addTo(a,b),b},f.prototype.subtract=function(a){var b=g();return this.subTo(a,b),b},f.prototype.multiply=function(a){var b=g();return this.multiplyTo(a,b),b},f.prototype.divide=function(a){var b=g();return this.divRemTo(a,b,null),b},f.prototype.remainder=function(a){var b=g();return this.divRemTo(a,null,b),b},f.prototype.divideAndRemainder=function(a){var b=g(),c=g();return this.divRemTo(a,b,c),new Array(b,c)},f.prototype.modPow=function(a,b){var c,d,e=a.bitLength(),f=j(1);if(e<=0)return f;c=e<18?1:e<48?3:e<144?4:e<768?5:6,d=e<8?new l(b):b.isEven()?new v(b):new m(b);var h=new Array,i=3,n=c-1,o=(1<<c)-1;if(h[1]=d.convert(this),c>1){var p=g();for(d.sqrTo(h[1],p);i<=o;)h[i]=g(),d.mulTo(p,h[i-2],h[i]),i+=2}var q,r,s=a.t-1,t=!0,u=g();for(e=k(a[s])-1;s>=0;){for(e>=n?q=a[s]>>e-n&o:(q=(a[s]&(1<<e+1)-1)<<n-e,s>0&&(q|=a[s-1]>>this.DB+e-n)),i=c;0==(1&q);)q>>=1,--i;if((e-=i)<0&&(e+=this.DB,--s),t)h[q].copyTo(f),t=!1;else{for(;i>1;)d.sqrTo(f,u),d.sqrTo(u,f),i-=2;i>0?d.sqrTo(f,u):(r=f,f=u,u=r),d.mulTo(u,h[q],f)}for(;s>=0&&0==(a[s]&1<<e);)d.sqrTo(f,u),r=f,f=u,u=r,--e<0&&(e=this.DB-1,--s)}return d.revert(f)},f.prototype.modInverse=function(a){var b=a.isEven();if(this.isEven()&&b||0==a.signum())return f.ZERO;for(var c=a.clone(),d=this.clone(),e=j(1),g=j(0),h=j(0),i=j(1);0!=c.signum();){for(;c.isEven();)c.rShiftTo(1,c),b?(e.isEven()&&g.isEven()||(e.addTo(this,e),g.subTo(a,g)),e.rShiftTo(1,e)):g.isEven()||g.subTo(a,g),g.rShiftTo(1,g);for(;d.isEven();)d.rShiftTo(1,d),b?(h.isEven()&&i.isEven()||(h.addTo(this,h),i.subTo(a,i)),h.rShiftTo(1,h)):i.isEven()||i.subTo(a,i),i.rShiftTo(1,i);c.compareTo(d)>=0?(c.subTo(d,c),b&&e.subTo(h,e),g.subTo(i,g)):(d.subTo(c,d),b&&h.subTo(e,h),i.subTo(g,i))}return 0!=d.compareTo(f.ONE)?f.ZERO:i.compareTo(a)>=0?i.subtract(a):i.signum()<0?(i.addTo(a,i),i.signum()<0?i.add(a):i):i},f.prototype.pow=function(a){return this.exp(a,new t)},f.prototype.gcd=function(a){var b=this.s<0?this.negate():this.clone(),c=a.s<0?a.negate():a.clone();if(b.compareTo(c)<0){var d=b;b=c,c=d}var e=b.getLowestSetBit(),f=c.getLowestSetBit();if(f<0)return b;for(e<f&&(f=e),f>0&&(b.rShiftTo(f,b),c.rShiftTo(f,c));b.signum()>0;)(e=b.getLowestSetBit())>0&&b.rShiftTo(e,b),(e=c.getLowestSetBit())>0&&c.rShiftTo(e,c),b.compareTo(c)>=0?(b.subTo(c,b),b.rShiftTo(1,b)):(c.subTo(b,c),c.rShiftTo(1,c));return f>0&&c.lShiftTo(f,c),c},f.prototype.isProbablePrime=function(a){var b,c=this.abs();if(1==c.t&&c[0]<=ua[ua.length-1]){for(b=0;b<ua.length;++b)if(c[0]==ua[b])return!0;return!1}if(c.isEven())return!1;for(b=1;b<ua.length;){for(var d=ua[b],e=b+1;e<ua.length&&d<va;)d*=ua[e++];for(d=c.modInt(d);b<e;)if(d%ua[b++]==0)return!1}return c.millerRabin(a)},f.prototype.square=function(){var a=g();return this.squareTo(a),a},w.prototype.init=function(a){var b,c,d;for(b=0;b<256;++b)this.S[b]=b;for(c=0,b=0;b<256;++b)c=c+this.S[b]+a[b%a.length]&255,d=this.S[b],this.S[b]=this.S[c],this.S[c]=d;this.i=0,this.j=0},w.prototype.next=function(){var a;return this.i=this.i+1&255,this.j=this.j+this.S[this.i]&255,a=this.S[this.i],this.S[this.i]=this.S[this.j],this.S[this.j]=a,this.S[a+this.S[this.i]&255]};var wa,xa,ya,za=256;if(null==xa){var Aa;if(xa=new Array,ya=0,void 0!==ka&&(void 0!==ka.crypto||void 0!==ka.msCrypto)){var Ba=ka.crypto||ka.msCrypto;if(Ba.getRandomValues){var Ca=new Uint8Array(32);for(Ba.getRandomValues(Ca),Aa=0;Aa<32;++Aa)xa[ya++]=Ca[Aa]}else if("Netscape"==ja.appName&&ja.appVersion<"5"){var Da=ka.crypto.random(32);for(Aa=0;Aa<Da.length;++Aa)xa[ya++]=255&Da.charCodeAt(Aa)}}for(;ya<za;)Aa=Math.floor(65536*Math.random()),xa[ya++]=Aa>>>8,xa[ya++]=255&Aa;ya=0,x()}z.prototype.nextBytes=function(a){var b;for(b=0;b<a.length;++b)a[b]=y()},C.prototype.doPublic=function(a){return a.modPowInt(this.e,this.n)},C.prototype.setPublic=function(a,b){if(this.isPublic=!0,this.isPrivate=!1,"string"!=typeof a)this.n=a,this.e=b;else{if(!(null!=a&&null!=b&&a.length>0&&b.length>0))throw"Invalid RSA public key";this.n=A(a,16),this.e=parseInt(b,16)}},C.prototype.encrypt=function(a){var b=function(a,b){if(b<a.length+11)throw"Message too long for RSA";for(var c=new Array,d=a.length-1;d>=0&&b>0;){var e=a.charCodeAt(d--);e<128?c[--b]=e:e>127&&e<2048?(c[--b]=63&e|128,c[--b]=e>>6|192):(c[--b]=63&e|128,c[--b]=e>>6&63|128,c[--b]=e>>12|224)}c[--b]=0;for(var g=new z,h=new Array;b>2;){for(h[0]=0;0==h[0];)g.nextBytes(h);c[--b]=h[0]}return c[--b]=2,c[--b]=0,new f(c)}(a,this.n.bitLength()+7>>3);if(null==b)return null;var c=this.doPublic(b);if(null==c)return null;var d=c.toString(16);return 0==(1&d.length)?d:"0"+d},C.prototype.encryptOAEP=function(a,b,c){var d=function(a,b,c,d){var e=Ea.crypto.MessageDigest,g=Ea.crypto.Util,h=null;if(c||(c="sha1"),"string"==typeof c&&(h=e.getCanonicalAlgName(c),d=e.getHashLength(h),c=function(a){return Q(g.hashHex(R(a),h))}),a.length+2*d+2>b)throw"Message too long for RSA";var i,j="";for(i=0;i<b-a.length-2*d-2;i+=1)j+="\0";var k=c("")+j+""+a,l=new Array(d);(new z).nextBytes(l);var m=B(l,k.length,c),n=[];for(i=0;i<k.length;i+=1)n[i]=k.charCodeAt(i)^m.charCodeAt(i);var o=B(n,l.length,c),p=[0];for(i=0;i<l.length;i+=1)p[i+1]=l[i]^o.charCodeAt(i);return new f(p.concat(n))}(a,this.n.bitLength()+7>>3,b,c);if(null==d)return null;var e=this.doPublic(d);if(null==e)return null;var g=e.toString(16);return 0==(1&g.length)?g:"0"+g},C.prototype.type="RSA",D.prototype.equals=function(a){return a==this||this.q.equals(a.q)&&this.x.equals(a.x)},D.prototype.toBigInteger=function(){return this.x},D.prototype.negate=function(){return new D(this.q,this.x.negate().mod(this.q))},D.prototype.add=function(a){return new D(this.q,this.x.add(a.toBigInteger()).mod(this.q))},D.prototype.subtract=function(a){return new D(this.q,this.x.subtract(a.toBigInteger()).mod(this.q))},D.prototype.multiply=function(a){return new D(this.q,this.x.multiply(a.toBigInteger()).mod(this.q))},D.prototype.square=function(){return new D(this.q,this.x.square().mod(this.q))},D.prototype.divide=function(a){return new D(this.q,this.x.multiply(a.toBigInteger().modInverse(this.q)).mod(this.q))},E.prototype.getX=function(){return null==this.zinv&&(this.zinv=this.z.modInverse(this.curve.q)),this.curve.fromBigInteger(this.x.toBigInteger().multiply(this.zinv).mod(this.curve.q))},E.prototype.getY=function(){return null==this.zinv&&(this.zinv=this.z.modInverse(this.curve.q)),this.curve.fromBigInteger(this.y.toBigInteger().multiply(this.zinv).mod(this.curve.q))},E.prototype.equals=function(a){return a==this||(this.isInfinity()?a.isInfinity():a.isInfinity()?this.isInfinity():!!a.y.toBigInteger().multiply(this.z).subtract(this.y.toBigInteger().multiply(a.z)).mod(this.curve.q).equals(f.ZERO)&&a.x.toBigInteger().multiply(this.z).subtract(this.x.toBigInteger().multiply(a.z)).mod(this.curve.q).equals(f.ZERO))},E.prototype.isInfinity=function(){return null==this.x&&null==this.y||this.z.equals(f.ZERO)&&!this.y.toBigInteger().equals(f.ZERO)},E.prototype.negate=function(){return new E(this.curve,this.x,this.y.negate(),this.z)},E.prototype.add=function(a){if(this.isInfinity())return a;if(a.isInfinity())return this;var b=a.y.toBigInteger().multiply(this.z).subtract(this.y.toBigInteger().multiply(a.z)).mod(this.curve.q),c=a.x.toBigInteger().multiply(this.z).subtract(this.x.toBigInteger().multiply(a.z)).mod(this.curve.q);if(f.ZERO.equals(c))return f.ZERO.equals(b)?this.twice():this.curve.getInfinity();var d=new f("3"),e=this.x.toBigInteger(),g=this.y.toBigInteger(),h=(a.x.toBigInteger(),a.y.toBigInteger(),c.square()),i=h.multiply(c),j=e.multiply(h),k=b.square().multiply(this.z),l=k.subtract(j.shiftLeft(1)).multiply(a.z).subtract(i).multiply(c).mod(this.curve.q),m=j.multiply(d).multiply(b).subtract(g.multiply(i)).subtract(k.multiply(b)).multiply(a.z).add(b.multiply(i)).mod(this.curve.q),n=i.multiply(this.z).multiply(a.z).mod(this.curve.q);return new E(this.curve,this.curve.fromBigInteger(l),this.curve.fromBigInteger(m),n)},E.prototype.twice=function(){if(this.isInfinity())return this;if(0==this.y.toBigInteger().signum())return this.curve.getInfinity();var a=new f("3"),b=this.x.toBigInteger(),c=this.y.toBigInteger(),d=c.multiply(this.z),e=d.multiply(c).mod(this.curve.q),g=this.curve.a.toBigInteger(),h=b.square().multiply(a);f.ZERO.equals(g)||(h=h.add(this.z.square().multiply(g)));var i=(h=h.mod(this.curve.q)).square().subtract(b.shiftLeft(3).multiply(e)).shiftLeft(1).multiply(d).mod(this.curve.q),j=h.multiply(a).multiply(b).subtract(e.shiftLeft(1)).shiftLeft(2).multiply(e).subtract(h.square().multiply(h)).mod(this.curve.q),k=d.square().multiply(d).shiftLeft(3).mod(this.curve.q);return new E(this.curve,this.curve.fromBigInteger(i),this.curve.fromBigInteger(j),k)},E.prototype.multiply=function(a){if(this.isInfinity())return this;if(0==a.signum())return this.curve.getInfinity();var b,c=a,d=c.multiply(new f("3")),e=this.negate(),g=this;for(b=d.bitLength()-2;b>0;--b){g=g.twice();var h=d.testBit(b);h!=c.testBit(b)&&(g=g.add(h?this:e))}return g},E.prototype.multiplyTwo=function(a,b,c){var d;d=a.bitLength()>c.bitLength()?a.bitLength()-1:c.bitLength()-1;for(var e=this.curve.getInfinity(),f=this.add(b);d>=0;)e=e.twice(),a.testBit(d)?e=c.testBit(d)?e.add(f):e.add(this):c.testBit(d)&&(e=e.add(b)),--d;return e},F.prototype.getQ=function(){return this.q},F.prototype.getA=function(){return this.a},F.prototype.getB=function(){return this.b},F.prototype.equals=function(a){return a==this||this.q.equals(a.q)&&this.a.equals(a.a)&&this.b.equals(a.b)},F.prototype.getInfinity=function(){return this.infinity},F.prototype.fromBigInteger=function(a){return new D(this.q,a)},F.prototype.decodePointHex=function(a){switch(parseInt(a.substr(0,2),16)){case 0:return this.infinity;case 2:case 3:return null;case 4:case 6:case 7:var b=(a.length-2)/2,c=a.substr(2,b),d=a.substr(b+2,b);return new E(this,this.fromBigInteger(new f(c,16)),this.fromBigInteger(new f(d,16)));default:return null}};var Ea,Fa,Ga,Ha=function(){function a(a,b,c){return b?d[b]:String.fromCharCode(parseInt(c,16))}var b=new RegExp('(?:false|true|null|[\\{\\}\\[\\]]|(?:-?\\b(?:0|[1-9][0-9]*)(?:\\.[0-9]+)?(?:[eE][+-]?[0-9]+)?\\b)|(?:"(?:[^\\0-\\x08\\x0a-\\x1f"\\\\]|\\\\(?:["/\\\\bfnrt]|u[0-9A-Fa-f]{4}))*"))',"g"),c=new RegExp("\\\\(?:([^u])|u(.{4}))","g"),d={'"':'"',"/":"/","\\":"\\",b:"\b",f:"\f",n:"\n",r:"\r",t:"\t"},e=new String(""),f=(Object,Array,Object.hasOwnProperty);return function(d,g){var h,i,j=d.match(b),k=j[0],l=!1;"{"===k?h={}:"["===k?h=[]:(h=[],l=!0);for(var m=[h],n=1-l,o=j.length;n<o;++n){var p;switch((k=j[n]).charCodeAt(0)){default:(p=m[0])[i||p.length]=+k,i=void 0;break;case 34:if(-1!==(k=k.substring(1,k.length-1)).indexOf("\\")&&(k=k.replace(c,a)),p=m[0],!i){if(!(p instanceof Array)){i=k||e;break}i=p.length}p[i]=k,i=void 0;break;case 91:p=m[0],m.unshift(p[i||p.length]=[]),i=void 0;break;case 93:m.shift();break;case 102:(p=m[0])[i||p.length]=!1,i=void 0;break;case 110:(p=m[0])[i||p.length]=null,i=void 0;break;case 116:(p=m[0])[i||p.length]=!0,i=void 0;break;case 123:p=m[0],m.unshift(p[i||p.length]={}),i=void 0;break;case 125:m.shift()}}if(l){if(1!==m.length)throw new Error;h=h[0]}else if(m.length)throw new Error;return g&&(h=function q(a,b){var c=a[b];if(c&&"object"===(void 0===c?"undefined":ia(c))){var d=null;for(var e in c)if(f.call(c,e)&&c!==a){var h=q(c,e);void 0!==h?c[e]=h:(d||(d=[]),d.push(e))}if(d)for(var i=d.length;--i>=0;)delete c[d[i]]}return g.call(a,b,c)}({"":h},"")),h}}(),Ia=new function(){};Ia.getLblen=function(a,b){if("8"!=a.substr(b+2,1))return 1;var c=parseInt(a.substr(b+3,1));return 0==c?-1:0<c&&c<10?c+1:-2},Ia.getL=function(a,b){var c=Ia.getLblen(a,b);return c<1?"":a.substr(b+2,2*c)},Ia.getVblen=function(a,b){var c;return""==(c=Ia.getL(a,b))?-1:("8"===c.substr(0,1)?new f(c.substr(2),16):new f(c,16)).intValue()},Ia.getVidx=function(a,b){var c=Ia.getLblen(a,b);return c<0?c:b+2*(c+1)},Ia.getV=function(a,b){var c=Ia.getVidx(a,b),d=Ia.getVblen(a,b);return a.substr(c,2*d)},Ia.getTLV=function(a,b){return a.substr(b,2)+Ia.getL(a,b)+Ia.getV(a,b)},Ia.getNextSiblingIdx=function(a,b){return Ia.getVidx(a,b)+2*Ia.getVblen(a,b)},Ia.getChildIdx=function(a,b){var c=Ia,d=new Array,e=c.getVidx(a,b);"03"==a.substr(b,2)?d.push(e+2):d.push(e);for(var f=c.getVblen(a,b),g=e,h=0;;){var i=c.getNextSiblingIdx(a,g);if(null==i||i-e>=2*f)break;if(h>=200)break;d.push(i),g=i,h++}return d},Ia.getNthChildIdx=function(a,b,c){return Ia.getChildIdx(a,b)[c]},Ia.getIdxbyList=function(a,b,c,d){var e,f,g=Ia;if(0==c.length){if(void 0!==d&&a.substr(b,2)!==d)throw"checking tag doesn't match: "+a.substr(b,2)+"!="+d;return b}return e=c.shift(),f=g.getChildIdx(a,b),g.getIdxbyList(a,f[e],c,d)},Ia.getTLVbyList=function(a,b,c,d){var e=Ia,f=e.getIdxbyList(a,b,c);if(void 0===f)throw"can't find nthList object";if(void 0!==d&&a.substr(f,2)!=d)throw"checking tag doesn't match: "+a.substr(f,2)+"!="+d;return e.getTLV(a,f)},Ia.getVbyList=function(a,b,c,d,e){var f,g,h=Ia;if(void 0===(f=h.getIdxbyList(a,b,c,d)))throw"can't find nthList object";return g=h.getV(a,f),!0===e&&(g=g.substr(2)),g},Ia.hextooidstr=function(a){var b=function(a,b){return a.length>=b?a:new Array(b-a.length+1).join("0")+a},c=[],d=a.substr(0,2),e=parseInt(d,16);c[0]=new String(Math.floor(e/40)),c[1]=new String(e%40);for(var f=a.substr(2),g=[],h=0;h<f.length/2;h++)g.push(parseInt(f.substr(2*h,2),16));var i=[],j="";for(h=0;h<g.length;h++)128&g[h]?j+=b((127&g[h]).toString(2),7):(j+=b((127&g[h]).toString(2),7),i.push(new String(parseInt(j,2))),j="");var k=c.join(".");return i.length>0&&(k=k+"."+i.join(".")),k},Ia.dump=function(a,b,c,d){var e=Ia,f=e.getV,g=e.dump,h=e.getChildIdx,i=a;a instanceof Ea.asn1.ASN1Object&&(i=a.getEncodedHex());var j=function(a,b){return a.length<=2*b?a:a.substr(0,b)+"..(total "+a.length/2+"bytes).."+a.substr(a.length-b,b)};void 0===b&&(b={ommit_long_octet:32}),void 0===c&&(c=0),void 0===d&&(d="");var k=b.ommit_long_octet;if("01"==i.substr(c,2))return"00"==(l=f(i,c))?d+"BOOLEAN FALSE\n":d+"BOOLEAN TRUE\n";if("02"==i.substr(c,2))return d+"INTEGER "+j(l=f(i,c),k)+"\n";if("03"==i.substr(c,2))return d+"BITSTRING "+j(l=f(i,c),k)+"\n";if("04"==i.substr(c,2)){var l=f(i,c);if(e.isASN1HEX(l)){var m=d+"OCTETSTRING, encapsulates\n";return m+=g(l,b,0,d+"  ")}return d+"OCTETSTRING "+j(l,k)+"\n"}if("05"==i.substr(c,2))return d+"NULL\n";if("06"==i.substr(c,2)){var n=f(i,c),o=Ea.asn1.ASN1Util.oidHexToInt(n),p=Ea.asn1.x509.OID.oid2name(o),q=o.replace(/\./g," ");return""!=p?d+"ObjectIdentifier "+p+" ("+q+")\n":d+"ObjectIdentifier ("+q+")\n"}if("0c"==i.substr(c,2))return d+"UTF8String '"+P(f(i,c))+"'\n";if("13"==i.substr(c,2))return d+"PrintableString '"+P(f(i,c))+"'\n";if("14"==i.substr(c,2))return d+"TeletexString '"+P(f(i,c))+"'\n";if("16"==i.substr(c,2))return d+"IA5String '"+P(f(i,c))+"'\n";if("17"==i.substr(c,2))return d+"UTCTime "+P(f(i,c))+"\n";if("18"==i.substr(c,2))return d+"GeneralizedTime "+P(f(i,c))+"\n";if("30"==i.substr(c,2)){if("3000"==i.substr(c,4))return d+"SEQUENCE {}\n";m=d+"SEQUENCE\n";var r=b;if((2==(u=h(i,c)).length||3==u.length)&&"06"==i.substr(u[0],2)&&"04"==i.substr(u[u.length-1],2)){p=e.oidname(f(i,u[0]));var s=JSON.parse(JSON.stringify(b));s.x509ExtName=p,r=s}for(var t=0;t<u.length;t++)m+=g(i,r,u[t],d+"  ");return m}if("31"==i.substr(c,2)){m=d+"SET\n";var u=h(i,c);for(t=0;t<u.length;t++)m+=g(i,b,u[t],d+"  ");return m}var v=parseInt(i.substr(c,2),16);if(0!=(128&v)){var w=31&v;if(0!=(32&v)){var m=d+"["+w+"]\n";for(u=h(i,c),t=0;t<u.length;t++)m+=g(i,b,u[t],d+"  ");return m}return"68747470"==(l=f(i,c)).substr(0,8)&&(l=P(l)),"subjectAltName"===b.x509ExtName&&2==w&&(l=P(l)),m=d+"["+w+"] "+l+"\n"}return d+"UNKNOWN("+i.substr(c,2)+") "+f(i,c)+"\n"},Ia.isASN1HEX=function(a){var b=Ia;if(a.length%2==1)return!1;var c=b.getVblen(a,0),d=a.substr(0,2),e=b.getL(a,0);return a.length-d.length-e.length==2*c},Ia.oidname=function(a){var b=Ea.asn1;Ea.lang.String.isHex(a)&&(a=b.ASN1Util.oidHexToInt(a));var c=b.x509.OID.oid2name(a);return""===c&&(c=a),c},void 0!==Ea&&Ea||(Ea={}),void 0!==Ea.lang&&Ea.lang||(Ea.lang={}),Ea.lang.String=function(){},"function"==typeof a?(Fa=function(b){return K(new a(b,"utf8").toString("base64"))},Ga=function(b){return new a(L(b),"base64").toString("utf8")}):(Fa=function(a){return M(Z(ca(a)))},Ga=function(a){return decodeURIComponent($(N(a)))}),Ea.lang.String.isInteger=function(a){return!!a.match(/^[0-9]+$/)||!!a.match(/^-[0-9]+$/)},Ea.lang.String.isHex=function(a){return!(a.length%2!=0||!a.match(/^[0-9a-f]+$/)&&!a.match(/^[0-9A-F]+$/))},Ea.lang.String.isBase64=function(a){return!(!(a=a.replace(/\s+/g,"")).match(/^[0-9A-Za-z+\/]+={0,3}$/)||a.length%4!=0)},Ea.lang.String.isBase64URL=function(a){return!a.match(/[+\/=]/)&&(a=L(a),Ea.lang.String.isBase64(a))},Ea.lang.String.isIntegerArray=function(a){return!!(a=a.replace(/\s+/g,"")).match(/^\[[0-9,]+\]$/)},void 0!==Ea&&Ea||(Ea={}),void 0!==Ea.crypto&&Ea.crypto||(Ea.crypto={}),Ea.crypto.Util=new function(){this.DIGESTINFOHEAD={sha1:"3021300906052b0e03021a05000414",sha224:"302d300d06096086480165030402040500041c",sha256:"3031300d060960864801650304020105000420",sha384:"3041300d060960864801650304020205000430",sha512:"3051300d060960864801650304020305000440",md2:"3020300c06082a864886f70d020205000410",md5:"3020300c06082a864886f70d020505000410",ripemd160:"3021300906052b2403020105000414"},this.DEFAULTPROVIDER={md5:"cryptojs",sha1:"cryptojs",sha224:"cryptojs",sha256:"cryptojs",sha384:"cryptojs",sha512:"cryptojs",ripemd160:"cryptojs",hmacmd5:"cryptojs",hmacsha1:"cryptojs",hmacsha224:"cryptojs",hmacsha256:"cryptojs",hmacsha384:"cryptojs",hmacsha512:"cryptojs",hmacripemd160:"cryptojs",MD5withRSA:"cryptojs/jsrsa",SHA1withRSA:"cryptojs/jsrsa",SHA224withRSA:"cryptojs/jsrsa",SHA256withRSA:"cryptojs/jsrsa",SHA384withRSA:"cryptojs/jsrsa",SHA512withRSA:"cryptojs/jsrsa",RIPEMD160withRSA:"cryptojs/jsrsa",MD5withECDSA:"cryptojs/jsrsa",SHA1withECDSA:"cryptojs/jsrsa",SHA224withECDSA:"cryptojs/jsrsa",SHA256withECDSA:"cryptojs/jsrsa",SHA384withECDSA:"cryptojs/jsrsa",SHA512withECDSA:"cryptojs/jsrsa",RIPEMD160withECDSA:"cryptojs/jsrsa",SHA1withDSA:"cryptojs/jsrsa",SHA224withDSA:"cryptojs/jsrsa",SHA256withDSA:"cryptojs/jsrsa",MD5withRSAandMGF1:"cryptojs/jsrsa",SHA1withRSAandMGF1:"cryptojs/jsrsa",SHA224withRSAandMGF1:"cryptojs/jsrsa",SHA256withRSAandMGF1:"cryptojs/jsrsa",SHA384withRSAandMGF1:"cryptojs/jsrsa",SHA512withRSAandMGF1:"cryptojs/jsrsa",RIPEMD160withRSAandMGF1:"cryptojs/jsrsa"},this.CRYPTOJSMESSAGEDIGESTNAME={md5:ma.algo.MD5,sha1:ma.algo.SHA1,sha224:ma.algo.SHA224,sha256:ma.algo.SHA256,sha384:ma.algo.SHA384,sha512:ma.algo.SHA512,ripemd160:ma.algo.RIPEMD160},this.getDigestInfoHex=function(a,b){if(void 0===this.DIGESTINFOHEAD[b])throw"alg not supported in Util.DIGESTINFOHEAD: "+b;return this.DIGESTINFOHEAD[b]+a},this.getPaddedDigestInfoHex=function(a,b,c){var d=this.getDigestInfoHex(a,b),e=c/4;if(d.length+22>e)throw"key is too short for SigAlg: keylen="+c+","+b;for(var f="0001",g="00"+d,h="",i=e-f.length-g.length,j=0;j<i;j+=2)h+="ff";return f+h+g},this.hashString=function(a,b){return new Ea.crypto.MessageDigest({alg:b}).digestString(a)},this.hashHex=function(a,b){return new Ea.crypto.MessageDigest({alg:b}).digestHex(a)},this.sha1=function(a){return new Ea.crypto.MessageDigest({alg:"sha1",prov:"cryptojs"}).digestString(a)},this.sha256=function(a){return new Ea.crypto.MessageDigest({alg:"sha256",prov:"cryptojs"}).digestString(a)},this.sha256Hex=function(a){return new Ea.crypto.MessageDigest({alg:"sha256",prov:"cryptojs"}).digestHex(a)},this.sha512=function(a){return new Ea.crypto.MessageDigest({alg:"sha512",prov:"cryptojs"}).digestString(a)},this.sha512Hex=function(a){return new Ea.crypto.MessageDigest({alg:"sha512",prov:"cryptojs"}).digestHex(a)}},Ea.crypto.Util.md5=function(a){return new Ea.crypto.MessageDigest({alg:"md5",prov:"cryptojs"}).digestString(a)},Ea.crypto.Util.ripemd160=function(a){return new Ea.crypto.MessageDigest({alg:"ripemd160",prov:"cryptojs"}).digestString(a)},Ea.crypto.Util.SECURERANDOMGEN=new z,Ea.crypto.Util.getRandomHexOfNbytes=function(a){var b=new Array(a);return Ea.crypto.Util.SECURERANDOMGEN.nextBytes(b),I(b)},Ea.crypto.Util.getRandomBigIntegerOfNbytes=function(a){return new f(Ea.crypto.Util.getRandomHexOfNbytes(a),16)},Ea.crypto.Util.getRandomHexOfNbits=function(a){var b=a%8,c=new Array((a-b)/8+1);return Ea.crypto.Util.SECURERANDOMGEN.nextBytes(c),c[0]=(255<<b&255^255)&c[0],I(c)},Ea.crypto.Util.getRandomBigIntegerOfNbits=function(a){return new f(Ea.crypto.Util.getRandomHexOfNbits(a),16)},Ea.crypto.Util.getRandomBigIntegerZeroToMax=function(a){for(var b=a.bitLength();;){var c=Ea.crypto.Util.getRandomBigIntegerOfNbits(b);if(-1!=a.compareTo(c))return c}},Ea.crypto.Util.getRandomBigIntegerMinToMax=function(a,b){var c=a.compareTo(b);if(1==c)throw"biMin is greater than biMax";if(0==c)return a;var d=b.subtract(a);return Ea.crypto.Util.getRandomBigIntegerZeroToMax(d).add(a)},Ea.crypto.MessageDigest=function(a){this.setAlgAndProvider=function(a,b){if(null!==(a=Ea.crypto.MessageDigest.getCanonicalAlgName(a))&&void 0===b&&(b=Ea.crypto.Util.DEFAULTPROVIDER[a]),-1!=":md5:sha1:sha224:sha256:sha384:sha512:ripemd160:".indexOf(a)&&"cryptojs"==b){try{this.md=Ea.crypto.Util.CRYPTOJSMESSAGEDIGESTNAME[a].create()}catch(b){throw"setAlgAndProvider hash alg set fail alg="+a+"/"+b}this.updateString=function(a){this.md.update(a)},this.updateHex=function(a){var b=ma.enc.Hex.parse(a);this.md.update(b)},this.digest=function(){return this.md.finalize().toString(ma.enc.Hex)},this.digestString=function(a){return this.updateString(a),this.digest()},this.digestHex=function(a){return this.updateHex(a),this.digest()}}if(-1!=":sha256:".indexOf(a)&&"sjcl"==b){try{this.md=new sjcl.hash.sha256}catch(b){throw"setAlgAndProvider hash alg set fail alg="+a+"/"+b;
}this.updateString=function(a){this.md.update(a)},this.updateHex=function(a){var b=sjcl.codec.hex.toBits(a);this.md.update(b)},this.digest=function(){var a=this.md.finalize();return sjcl.codec.hex.fromBits(a)},this.digestString=function(a){return this.updateString(a),this.digest()},this.digestHex=function(a){return this.updateHex(a),this.digest()}}},this.updateString=function(a){throw"updateString(str) not supported for this alg/prov: "+this.algName+"/"+this.provName},this.updateHex=function(a){throw"updateHex(hex) not supported for this alg/prov: "+this.algName+"/"+this.provName},this.digest=function(){throw"digest() not supported for this alg/prov: "+this.algName+"/"+this.provName},this.digestString=function(a){throw"digestString(str) not supported for this alg/prov: "+this.algName+"/"+this.provName},this.digestHex=function(a){throw"digestHex(hex) not supported for this alg/prov: "+this.algName+"/"+this.provName},void 0!==a&&void 0!==a.alg&&(this.algName=a.alg,void 0===a.prov&&(this.provName=Ea.crypto.Util.DEFAULTPROVIDER[this.algName]),this.setAlgAndProvider(this.algName,this.provName))},Ea.crypto.MessageDigest.getCanonicalAlgName=function(a){return"string"==typeof a&&(a=(a=a.toLowerCase()).replace(/-/,"")),a},Ea.crypto.MessageDigest.getHashLength=function(a){var b=Ea.crypto.MessageDigest,c=b.getCanonicalAlgName(a);if(void 0===b.HASHLENGTH[c])throw"not supported algorithm: "+a;return b.HASHLENGTH[c]},Ea.crypto.MessageDigest.HASHLENGTH={md5:16,sha1:20,sha224:28,sha256:32,sha384:48,sha512:64,ripemd160:20},Ea.crypto.Mac=function(a){this.setAlgAndProvider=function(a,b){if(null==(a=a.toLowerCase())&&(a="hmacsha1"),"hmac"!=(a=a.toLowerCase()).substr(0,4))throw"setAlgAndProvider unsupported HMAC alg: "+a;void 0===b&&(b=Ea.crypto.Util.DEFAULTPROVIDER[a]),this.algProv=a+"/"+b;var c=a.substr(4);if(-1!=":md5:sha1:sha224:sha256:sha384:sha512:ripemd160:".indexOf(c)&&"cryptojs"==b){try{var d=Ea.crypto.Util.CRYPTOJSMESSAGEDIGESTNAME[c];this.mac=ma.algo.HMAC.create(d,this.pass)}catch(a){throw"setAlgAndProvider hash alg set fail hashAlg="+c+"/"+a}this.updateString=function(a){this.mac.update(a)},this.updateHex=function(a){var b=ma.enc.Hex.parse(a);this.mac.update(b)},this.doFinal=function(){return this.mac.finalize().toString(ma.enc.Hex)},this.doFinalString=function(a){return this.updateString(a),this.doFinal()},this.doFinalHex=function(a){return this.updateHex(a),this.doFinal()}}},this.updateString=function(a){throw"updateString(str) not supported for this alg/prov: "+this.algProv},this.updateHex=function(a){throw"updateHex(hex) not supported for this alg/prov: "+this.algProv},this.doFinal=function(){throw"digest() not supported for this alg/prov: "+this.algProv},this.doFinalString=function(a){throw"digestString(str) not supported for this alg/prov: "+this.algProv},this.doFinalHex=function(a){throw"digestHex(hex) not supported for this alg/prov: "+this.algProv},this.setPassword=function(a){if("string"==typeof a){var b=a;return a.length%2!=1&&a.match(/^[0-9A-Fa-f]+$/)||(b=R(a)),void(this.pass=ma.enc.Hex.parse(b))}if("object"!=(void 0===a?"undefined":ia(a)))throw"KJUR.crypto.Mac unsupported password type: "+a;if(b=null,void 0!==a.hex){if(a.hex.length%2!=0||!a.hex.match(/^[0-9A-Fa-f]+$/))throw"Mac: wrong hex password: "+a.hex;b=a.hex}if(void 0!==a.utf8&&(b=O(a.utf8)),void 0!==a.rstr&&(b=R(a.rstr)),void 0!==a.b64&&(b=d(a.b64)),void 0!==a.b64u&&(b=N(a.b64u)),null==b)throw"KJUR.crypto.Mac unsupported password type: "+a;this.pass=ma.enc.Hex.parse(b)},void 0!==a&&(void 0!==a.pass&&this.setPassword(a.pass),void 0!==a.alg&&(this.algName=a.alg,void 0===a.prov&&(this.provName=Ea.crypto.Util.DEFAULTPROVIDER[this.algName]),this.setAlgAndProvider(this.algName,this.provName)))},Ea.crypto.Signature=function(a){var b=null;if(this._setAlgNames=function(){var a=this.algName.match(/^(.+)with(.+)$/);a&&(this.mdAlgName=a[1].toLowerCase(),this.pubkeyAlgName=a[2].toLowerCase())},this._zeroPaddingOfSignature=function(a,b){for(var c="",d=b/4-a.length,e=0;e<d;e++)c+="0";return c+a},this.setAlgAndProvider=function(a,b){if(this._setAlgNames(),"cryptojs/jsrsa"!=b)throw"provider not supported: "+b;if(-1!=":md5:sha1:sha224:sha256:sha384:sha512:ripemd160:".indexOf(this.mdAlgName)){try{this.md=new Ea.crypto.MessageDigest({alg:this.mdAlgName})}catch(a){throw"setAlgAndProvider hash alg set fail alg="+this.mdAlgName+"/"+a}this.init=function(a,b){var c=null;try{c=void 0===b?Ja.getKey(a):Ja.getKey(a,b)}catch(a){throw"init failed:"+a}if(!0===c.isPrivate)this.prvKey=c,this.state="SIGN";else{if(!0!==c.isPublic)throw"init failed.:"+c;this.pubKey=c,this.state="VERIFY"}},this.updateString=function(a){this.md.updateString(a)},this.updateHex=function(a){this.md.updateHex(a)},this.sign=function(){if(this.sHashHex=this.md.digest(),void 0!==this.ecprvhex&&void 0!==this.eccurvename){var a=new Ea.crypto.ECDSA({curve:this.eccurvename});this.hSign=a.signHex(this.sHashHex,this.ecprvhex)}else if(this.prvKey instanceof C&&"rsaandmgf1"===this.pubkeyAlgName)this.hSign=this.prvKey.signWithMessageHashPSS(this.sHashHex,this.mdAlgName,this.pssSaltLen);else if(this.prvKey instanceof C&&"rsa"===this.pubkeyAlgName)this.hSign=this.prvKey.signWithMessageHash(this.sHashHex,this.mdAlgName);else if(this.prvKey instanceof Ea.crypto.ECDSA)this.hSign=this.prvKey.signWithMessageHash(this.sHashHex);else{if(!(this.prvKey instanceof Ea.crypto.DSA))throw"Signature: unsupported private key alg: "+this.pubkeyAlgName;this.hSign=this.prvKey.signWithMessageHash(this.sHashHex)}return this.hSign},this.signString=function(a){return this.updateString(a),this.sign()},this.signHex=function(a){return this.updateHex(a),this.sign()},this.verify=function(a){if(this.sHashHex=this.md.digest(),void 0!==this.ecpubhex&&void 0!==this.eccurvename)return new Ea.crypto.ECDSA({curve:this.eccurvename}).verifyHex(this.sHashHex,a,this.ecpubhex);if(this.pubKey instanceof C&&"rsaandmgf1"===this.pubkeyAlgName)return this.pubKey.verifyWithMessageHashPSS(this.sHashHex,a,this.mdAlgName,this.pssSaltLen);if(this.pubKey instanceof C&&"rsa"===this.pubkeyAlgName)return this.pubKey.verifyWithMessageHash(this.sHashHex,a);if(void 0!==Ea.crypto.ECDSA&&this.pubKey instanceof Ea.crypto.ECDSA)return this.pubKey.verifyWithMessageHash(this.sHashHex,a);if(void 0!==Ea.crypto.DSA&&this.pubKey instanceof Ea.crypto.DSA)return this.pubKey.verifyWithMessageHash(this.sHashHex,a);throw"Signature: unsupported public key alg: "+this.pubkeyAlgName}}},this.init=function(a,b){throw"init(key, pass) not supported for this alg:prov="+this.algProvName},this.updateString=function(a){throw"updateString(str) not supported for this alg:prov="+this.algProvName},this.updateHex=function(a){throw"updateHex(hex) not supported for this alg:prov="+this.algProvName},this.sign=function(){throw"sign() not supported for this alg:prov="+this.algProvName},this.signString=function(a){throw"digestString(str) not supported for this alg:prov="+this.algProvName},this.signHex=function(a){throw"digestHex(hex) not supported for this alg:prov="+this.algProvName},this.verify=function(a){throw"verify(hSigVal) not supported for this alg:prov="+this.algProvName},this.initParams=a,void 0!==a&&(void 0!==a.alg&&(this.algName=a.alg,void 0===a.prov?this.provName=Ea.crypto.Util.DEFAULTPROVIDER[this.algName]:this.provName=a.prov,this.algProvName=this.algName+":"+this.provName,this.setAlgAndProvider(this.algName,this.provName),this._setAlgNames()),void 0!==a.psssaltlen&&(this.pssSaltLen=a.psssaltlen),void 0!==a.prvkeypem)){if(void 0!==a.prvkeypas)throw"both prvkeypem and prvkeypas parameters not supported";try{b=Ja.getKey(a.prvkeypem),this.init(b)}catch(a){throw"fatal error to load pem private key: "+a}}},Ea.crypto.Cipher=function(a){},Ea.crypto.Cipher.encrypt=function(a,b,c){if(b instanceof C&&b.isPublic){var d=Ea.crypto.Cipher.getAlgByKeyAndName(b,c);if("RSA"===d)return b.encrypt(a);if("RSAOAEP"===d)return b.encryptOAEP(a,"sha1");var e=d.match(/^RSAOAEP(\d+)$/);if(null!==e)return b.encryptOAEP(a,"sha"+e[1]);throw"Cipher.encrypt: unsupported algorithm for RSAKey: "+c}throw"Cipher.encrypt: unsupported key or algorithm"},Ea.crypto.Cipher.decrypt=function(a,b,c){if(b instanceof C&&b.isPrivate){var d=Ea.crypto.Cipher.getAlgByKeyAndName(b,c);if("RSA"===d)return b.decrypt(a);if("RSAOAEP"===d)return b.decryptOAEP(a,"sha1");var e=d.match(/^RSAOAEP(\d+)$/);if(null!==e)return b.decryptOAEP(a,"sha"+e[1]);throw"Cipher.decrypt: unsupported algorithm for RSAKey: "+c}throw"Cipher.decrypt: unsupported key or algorithm"},Ea.crypto.Cipher.getAlgByKeyAndName=function(a,b){if(a instanceof C){if(-1!=":RSA:RSAOAEP:RSAOAEP224:RSAOAEP256:RSAOAEP384:RSAOAEP512:".indexOf(b))return b;if(null===b||void 0===b)return"RSA";throw"getAlgByKeyAndName: not supported algorithm name for RSAKey: "+b}throw"getAlgByKeyAndName: not supported algorithm name: "+b},Ea.crypto.OID=new function(){this.oidhex2name={"2a864886f70d010101":"rsaEncryption","2a8648ce3d0201":"ecPublicKey","2a8648ce380401":"dsa","2a8648ce3d030107":"secp256r1","2b8104001f":"secp192k1","2b81040021":"secp224r1","2b8104000a":"secp256k1","2b81040023":"secp521r1","2b81040022":"secp384r1","2a8648ce380403":"SHA1withDSA","608648016503040301":"SHA224withDSA","608648016503040302":"SHA256withDSA"}},void 0!==Ea&&Ea||(Ea={}),void 0!==Ea.crypto&&Ea.crypto||(Ea.crypto={}),Ea.crypto.ECDSA=function(a){var b=new z;this.type="EC",this.isPrivate=!1,this.isPublic=!1,this.getBigRandom=function(a){return new f(a.bitLength(),b).mod(a.subtract(f.ONE)).add(f.ONE)},this.setNamedCurve=function(a){this.ecparams=Ea.crypto.ECParameterDB.getByName(a),this.prvKeyHex=null,this.pubKeyHex=null,this.curveName=a},this.setPrivateKeyHex=function(a){this.isPrivate=!0,this.prvKeyHex=a},this.setPublicKeyHex=function(a){this.isPublic=!0,this.pubKeyHex=a},this.getPublicKeyXYHex=function(){var a=this.pubKeyHex;if("04"!==a.substr(0,2))throw"this method supports uncompressed format(04) only";var b=this.ecparams.keylen/4;if(a.length!==2+2*b)throw"malformed public key hex length";var c={};return c.x=a.substr(2,b),c.y=a.substr(2+b),c},this.getShortNISTPCurveName=function(){var a=this.curveName;return"secp256r1"===a||"NIST P-256"===a||"P-256"===a||"prime256v1"===a?"P-256":"secp384r1"===a||"NIST P-384"===a||"P-384"===a?"P-384":null},this.generateKeyPairHex=function(){var a=this.ecparams.n,b=this.getBigRandom(a),c=this.ecparams.G.multiply(b),d=c.getX().toBigInteger(),e=c.getY().toBigInteger(),f=this.ecparams.keylen/4,g=("0000000000"+b.toString(16)).slice(-f),h="04"+("0000000000"+d.toString(16)).slice(-f)+("0000000000"+e.toString(16)).slice(-f);return this.setPrivateKeyHex(g),this.setPublicKeyHex(h),{ecprvhex:g,ecpubhex:h}},this.signWithMessageHash=function(a){return this.signHex(a,this.prvKeyHex)},this.signHex=function(a,b){var c=new f(b,16),d=this.ecparams.n,e=new f(a,16);do var g=this.getBigRandom(d),h=this.ecparams.G.multiply(g).getX().toBigInteger().mod(d);while(h.compareTo(f.ZERO)<=0);var i=g.modInverse(d).multiply(e.add(c.multiply(h))).mod(d);return Ea.crypto.ECDSA.biRSSigToASN1Sig(h,i)},this.sign=function(a,b){var c=b,d=this.ecparams.n,e=f.fromByteArrayUnsigned(a);do var g=this.getBigRandom(d),h=this.ecparams.G.multiply(g).getX().toBigInteger().mod(d);while(h.compareTo(f.ZERO)<=0);var i=g.modInverse(d).multiply(e.add(c.multiply(h))).mod(d);return this.serializeSig(h,i)},this.verifyWithMessageHash=function(a,b){return this.verifyHex(a,b,this.pubKeyHex)},this.verifyHex=function(a,b,c){var d,e,g,h=Ea.crypto.ECDSA.parseSigHex(b);d=h.r,e=h.s,g=E.decodeFromHex(this.ecparams.curve,c);var i=new f(a,16);return this.verifyRaw(i,d,e,g)},this.verify=function(a,b,c){var d,e,g;if(Bitcoin.Util.isArray(b)){var h=this.parseSig(b);d=h.r,e=h.s}else{if("object"!==(void 0===b?"undefined":ia(b))||!b.r||!b.s)throw"Invalid value for signature";d=b.r,e=b.s}if(c instanceof E)g=c;else{if(!Bitcoin.Util.isArray(c))throw"Invalid format for pubkey value, must be byte array or ECPointFp";g=E.decodeFrom(this.ecparams.curve,c)}var i=f.fromByteArrayUnsigned(a);return this.verifyRaw(i,d,e,g)},this.verifyRaw=function(a,b,c,d){var e=this.ecparams.n,g=this.ecparams.G;if(b.compareTo(f.ONE)<0||b.compareTo(e)>=0)return!1;if(c.compareTo(f.ONE)<0||c.compareTo(e)>=0)return!1;var h=c.modInverse(e),i=a.multiply(h).mod(e),j=b.multiply(h).mod(e);return g.multiply(i).add(d.multiply(j)).getX().toBigInteger().mod(e).equals(b)},this.serializeSig=function(a,b){var c=a.toByteArraySigned(),d=b.toByteArraySigned(),e=[];return e.push(2),e.push(c.length),(e=e.concat(c)).push(2),e.push(d.length),(e=e.concat(d)).unshift(e.length),e.unshift(48),e},this.parseSig=function(a){var b;if(48!=a[0])throw new Error("Signature not a valid DERSequence");if(2!=a[b=2])throw new Error("First element in signature must be a DERInteger");var c=a.slice(b+2,b+2+a[b+1]);if(2!=a[b+=2+a[b+1]])throw new Error("Second element in signature must be a DERInteger");var d=a.slice(b+2,b+2+a[b+1]);return b+=2+a[b+1],{r:f.fromByteArrayUnsigned(c),s:f.fromByteArrayUnsigned(d)}},this.parseSigCompact=function(a){if(65!==a.length)throw"Signature has the wrong length";var b=a[0]-27;if(b<0||b>7)throw"Invalid signature type";var c=this.ecparams.n;return{r:f.fromByteArrayUnsigned(a.slice(1,33)).mod(c),s:f.fromByteArrayUnsigned(a.slice(33,65)).mod(c),i:b}},this.readPKCS5PrvKeyHex=function(a){var b,c,d,e=Ia,f=Ea.crypto.ECDSA.getName,g=e.getVbyList;if(!1===e.isASN1HEX(a))throw"not ASN.1 hex string";try{b=g(a,0,[2,0],"06"),c=g(a,0,[1],"04");try{d=g(a,0,[3,0],"03").substr(2)}catch(a){}}catch(a){throw"malformed PKCS#1/5 plain ECC private key"}if(this.curveName=f(b),void 0===this.curveName)throw"unsupported curve name";this.setNamedCurve(this.curveName),this.setPublicKeyHex(d),this.setPrivateKeyHex(c),this.isPublic=!1},this.readPKCS8PrvKeyHex=function(a){var b,c,d,e=Ia,f=Ea.crypto.ECDSA.getName,g=e.getVbyList;if(!1===e.isASN1HEX(a))throw"not ASN.1 hex string";try{g(a,0,[1,0],"06"),b=g(a,0,[1,1],"06"),c=g(a,0,[2,0,1],"04");try{d=g(a,0,[2,0,2,0],"03").substr(2)}catch(a){}}catch(a){throw"malformed PKCS#8 plain ECC private key"}if(this.curveName=f(b),void 0===this.curveName)throw"unsupported curve name";this.setNamedCurve(this.curveName),this.setPublicKeyHex(d),this.setPrivateKeyHex(c),this.isPublic=!1},this.readPKCS8PubKeyHex=function(a){var b,c,d=Ia,e=Ea.crypto.ECDSA.getName,f=d.getVbyList;if(!1===d.isASN1HEX(a))throw"not ASN.1 hex string";try{f(a,0,[0,0],"06"),b=f(a,0,[0,1],"06"),c=f(a,0,[1],"03").substr(2)}catch(a){throw"malformed PKCS#8 ECC public key"}if(this.curveName=e(b),null===this.curveName)throw"unsupported curve name";this.setNamedCurve(this.curveName),this.setPublicKeyHex(c)},this.readCertPubKeyHex=function(a,b){5!==b&&(b=6);var c,d,e=Ia,f=Ea.crypto.ECDSA.getName,g=e.getVbyList;if(!1===e.isASN1HEX(a))throw"not ASN.1 hex string";try{c=g(a,0,[0,b,0,1],"06"),d=g(a,0,[0,b,1],"03").substr(2)}catch(a){throw"malformed X.509 certificate ECC public key"}if(this.curveName=f(c),null===this.curveName)throw"unsupported curve name";this.setNamedCurve(this.curveName),this.setPublicKeyHex(d)},void 0!==a&&void 0!==a.curve&&(this.curveName=a.curve),void 0===this.curveName&&(this.curveName="secp256r1"),this.setNamedCurve(this.curveName),void 0!==a&&(void 0!==a.prv&&this.setPrivateKeyHex(a.prv),void 0!==a.pub&&this.setPublicKeyHex(a.pub))},Ea.crypto.ECDSA.parseSigHex=function(a){var b=Ea.crypto.ECDSA.parseSigHexInHexRS(a);return{r:new f(b.r,16),s:new f(b.s,16)}},Ea.crypto.ECDSA.parseSigHexInHexRS=function(a){var b=Ia,c=b.getChildIdx,d=b.getV;if("30"!=a.substr(0,2))throw"signature is not a ASN.1 sequence";var e=c(a,0);if(2!=e.length)throw"number of signature ASN.1 sequence elements seem wrong";var f=e[0],g=e[1];if("02"!=a.substr(f,2))throw"1st item of sequene of signature is not ASN.1 integer";if("02"!=a.substr(g,2))throw"2nd item of sequene of signature is not ASN.1 integer";return{r:d(a,f),s:d(a,g)}},Ea.crypto.ECDSA.asn1SigToConcatSig=function(a){var b=Ea.crypto.ECDSA.parseSigHexInHexRS(a),c=b.r,d=b.s;if("00"==c.substr(0,2)&&c.length%32==2&&(c=c.substr(2)),"00"==d.substr(0,2)&&d.length%32==2&&(d=d.substr(2)),c.length%32==30&&(c="00"+c),d.length%32==30&&(d="00"+d),c.length%32!=0)throw"unknown ECDSA sig r length error";if(d.length%32!=0)throw"unknown ECDSA sig s length error";return c+d},Ea.crypto.ECDSA.concatSigToASN1Sig=function(a){if(a.length/2*8%128!=0)throw"unknown ECDSA concatinated r-s sig  length error";var b=a.substr(0,a.length/2),c=a.substr(a.length/2);return Ea.crypto.ECDSA.hexRSSigToASN1Sig(b,c)},Ea.crypto.ECDSA.hexRSSigToASN1Sig=function(a,b){var c=new f(a,16),d=new f(b,16);return Ea.crypto.ECDSA.biRSSigToASN1Sig(c,d)},Ea.crypto.ECDSA.biRSSigToASN1Sig=function(a,b){var c=Ea.asn1,d=new c.DERInteger({bigint:a}),e=new c.DERInteger({bigint:b});return new c.DERSequence({array:[d,e]}).getEncodedHex()},Ea.crypto.ECDSA.getName=function(a){return"2a8648ce3d030107"===a?"secp256r1":"2b8104000a"===a?"secp256k1":"2b81040022"===a?"secp384r1":-1!=="|secp256r1|NIST P-256|P-256|prime256v1|".indexOf(a)?"secp256r1":-1!=="|secp256k1|".indexOf(a)?"secp256k1":-1!=="|secp384r1|NIST P-384|P-384|".indexOf(a)?"secp384r1":null},void 0!==Ea&&Ea||(Ea={}),void 0!==Ea.crypto&&Ea.crypto||(Ea.crypto={}),Ea.crypto.ECParameterDB=new function(){function a(a){return new f(a,16)}var b={},c={};this.getByName=function(a){var d=a;if(void 0!==c[d]&&(d=c[a]),void 0!==b[d])return b[d];throw"unregistered EC curve name: "+d},this.regist=function(d,e,f,g,h,i,j,k,l,m,n,o){b[d]={};var p=a(f),q=a(g),r=a(h),s=a(i),t=a(j),u=new F(p,q,r),v=u.decodePointHex("04"+k+l);b[d].name=d,b[d].keylen=e,b[d].curve=u,b[d].G=v,b[d].n=s,b[d].h=t,b[d].oid=n,b[d].info=o;for(var w=0;w<m.length;w++)c[m[w]]=d}},Ea.crypto.ECParameterDB.regist("secp128r1",128,"FFFFFFFDFFFFFFFFFFFFFFFFFFFFFFFF","FFFFFFFDFFFFFFFFFFFFFFFFFFFFFFFC","E87579C11079F43DD824993C2CEE5ED3","FFFFFFFE0000000075A30D1B9038A115","1","161FF7528B899B2D0C28607CA52C5B86","CF5AC8395BAFEB13C02DA292DDED7A83",[],"","secp128r1 : SECG curve over a 128 bit prime field"),Ea.crypto.ECParameterDB.regist("secp160k1",160,"FFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFEFFFFAC73","0","7","0100000000000000000001B8FA16DFAB9ACA16B6B3","1","3B4C382CE37AA192A4019E763036F4F5DD4D7EBB","938CF935318FDCED6BC28286531733C3F03C4FEE",[],"","secp160k1 : SECG curve over a 160 bit prime field"),Ea.crypto.ECParameterDB.regist("secp160r1",160,"FFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFF7FFFFFFF","FFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFF7FFFFFFC","1C97BEFC54BD7A8B65ACF89F81D4D4ADC565FA45","0100000000000000000001F4C8F927AED3CA752257","1","4A96B5688EF573284664698968C38BB913CBFC82","23A628553168947D59DCC912042351377AC5FB32",[],"","secp160r1 : SECG curve over a 160 bit prime field"),Ea.crypto.ECParameterDB.regist("secp192k1",192,"FFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFEFFFFEE37","0","3","FFFFFFFFFFFFFFFFFFFFFFFE26F2FC170F69466A74DEFD8D","1","DB4FF10EC057E9AE26B07D0280B7F4341DA5D1B1EAE06C7D","9B2F2F6D9C5628A7844163D015BE86344082AA88D95E2F9D",[]),Ea.crypto.ECParameterDB.regist("secp192r1",192,"FFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFEFFFFFFFFFFFFFFFF","FFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFEFFFFFFFFFFFFFFFC","64210519E59C80E70FA7E9AB72243049FEB8DEECC146B9B1","FFFFFFFFFFFFFFFFFFFFFFFF99DEF836146BC9B1B4D22831","1","188DA80EB03090F67CBF20EB43A18800F4FF0AFD82FF1012","07192B95FFC8DA78631011ED6B24CDD573F977A11E794811",[]),Ea.crypto.ECParameterDB.regist("secp224r1",224,"FFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFF000000000000000000000001","FFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFEFFFFFFFFFFFFFFFFFFFFFFFE","B4050A850C04B3ABF54132565044B0B7D7BFD8BA270B39432355FFB4","FFFFFFFFFFFFFFFFFFFFFFFFFFFF16A2E0B8F03E13DD29455C5C2A3D","1","B70E0CBD6BB4BF7F321390B94A03C1D356C21122343280D6115C1D21","BD376388B5F723FB4C22DFE6CD4375A05A07476444D5819985007E34",[]),Ea.crypto.ECParameterDB.regist("secp256k1",256,"FFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFEFFFFFC2F","0","7","FFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFEBAAEDCE6AF48A03BBFD25E8CD0364141","1","79BE667EF9DCBBAC55A06295CE870B07029BFCDB2DCE28D959F2815B16F81798","483ADA7726A3C4655DA4FBFC0E1108A8FD17B448A68554199C47D08FFB10D4B8",[]),Ea.crypto.ECParameterDB.regist("secp256r1",256,"FFFFFFFF00000001000000000000000000000000FFFFFFFFFFFFFFFFFFFFFFFF","FFFFFFFF00000001000000000000000000000000FFFFFFFFFFFFFFFFFFFFFFFC","5AC635D8AA3A93E7B3EBBD55769886BC651D06B0CC53B0F63BCE3C3E27D2604B","FFFFFFFF00000000FFFFFFFFFFFFFFFFBCE6FAADA7179E84F3B9CAC2FC632551","1","6B17D1F2E12C4247F8BCE6E563A440F277037D812DEB33A0F4A13945D898C296","4FE342E2FE1A7F9B8EE7EB4A7C0F9E162BCE33576B315ECECBB6406837BF51F5",["NIST P-256","P-256","prime256v1"]),Ea.crypto.ECParameterDB.regist("secp384r1",384,"FFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFEFFFFFFFF0000000000000000FFFFFFFF","FFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFEFFFFFFFF0000000000000000FFFFFFFC","B3312FA7E23EE7E4988E056BE3F82D19181D9C6EFE8141120314088F5013875AC656398D8A2ED19D2A85C8EDD3EC2AEF","FFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFC7634D81F4372DDF581A0DB248B0A77AECEC196ACCC52973","1","AA87CA22BE8B05378EB1C71EF320AD746E1D3B628BA79B9859F741E082542A385502F25DBF55296C3A545E3872760AB7","3617de4a96262c6f5d9e98bf9292dc29f8f41dbd289a147ce9da3113b5f0b8c00a60b1ce1d7e819d7a431d7c90ea0e5f",["NIST P-384","P-384"]),Ea.crypto.ECParameterDB.regist("secp521r1",521,"1FFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFF","1FFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFC","051953EB9618E1C9A1F929A21A0B68540EEA2DA725B99B315F3B8B489918EF109E156193951EC7E937B1652C0BD3BB1BF073573DF883D2C34F1EF451FD46B503F00","1FFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFA51868783BF2F966B7FCC0148F709A5D03BB5C9B8899C47AEBB6FB71E91386409","1","C6858E06B70404E9CD9E3ECB662395B4429C648139053FB521F828AF606B4D3DBAA14B5E77EFE75928FE1DC127A2FFA8DE3348B3C1856A429BF97E7E31C2E5BD66","011839296a789a3bc0045c8a5fb42c7d1bd998f54449579b446817afbd17273e662c97ee72995ef42640c550b9013fad0761353c7086a272c24088be94769fd16650",["NIST P-521","P-521"]);var Ja=function(){var a=function(a,c,d){return b(ma.AES,a,c,d)},b=function(a,b,c,d){var e=ma.enc.Hex.parse(b),f=ma.enc.Hex.parse(c),g=ma.enc.Hex.parse(d),h={};h.key=f,h.iv=g,h.ciphertext=e;var i=a.decrypt(h,f,{iv:g});return ma.enc.Hex.stringify(i)},c=function(a,b,c){return d(ma.AES,a,b,c)},d=function(a,b,c,d){var e=ma.enc.Hex.parse(b),f=ma.enc.Hex.parse(c),g=ma.enc.Hex.parse(d),h=a.encrypt(e,f,{iv:g}),i=ma.enc.Hex.parse(h.toString());return ma.enc.Base64.stringify(i)},e={"AES-256-CBC":{proc:a,eproc:c,keylen:32,ivlen:16},"AES-192-CBC":{proc:a,eproc:c,keylen:24,ivlen:16},"AES-128-CBC":{proc:a,eproc:c,keylen:16,ivlen:16},"DES-EDE3-CBC":{proc:function(a,c,d){return b(ma.TripleDES,a,c,d)},eproc:function(a,b,c){return d(ma.TripleDES,a,b,c)},keylen:24,ivlen:8},"DES-CBC":{proc:function(a,c,d){return b(ma.DES,a,c,d)},eproc:function(a,b,c){return d(ma.DES,a,b,c)},keylen:8,ivlen:8}},f=function(a){var b={},c=a.match(new RegExp("DEK-Info: ([^,]+),([0-9A-Fa-f]+)","m"));c&&(b.cipher=c[1],b.ivsalt=c[2]);var d=a.match(new RegExp("-----BEGIN ([A-Z]+) PRIVATE KEY-----"));d&&(b.type=d[1]);var e=-1,f=0;-1!=a.indexOf("\r\n\r\n")&&(e=a.indexOf("\r\n\r\n"),f=2),-1!=a.indexOf("\n\n")&&(e=a.indexOf("\n\n"),f=1);var g=a.indexOf("-----END");if(-1!=e&&-1!=g){var h=a.substring(e+2*f,g-f);h=h.replace(/\s+/g,""),b.data=h}return b},g=function(a,b,c){for(var d=c.substring(0,16),f=ma.enc.Hex.parse(d),g=ma.enc.Utf8.parse(b),h=e[a].keylen+e[a].ivlen,i="",j=null;;){var k=ma.algo.MD5.create();if(null!=j&&k.update(j),k.update(g),k.update(f),j=k.finalize(),(i+=ma.enc.Hex.stringify(j)).length>=2*h)break}var l={};return l.keyhex=i.substr(0,2*e[a].keylen),l.ivhex=i.substr(2*e[a].keylen,2*e[a].ivlen),l},h=function(a,b,c,d){var f=ma.enc.Base64.parse(a),g=ma.enc.Hex.stringify(f);return(0,e[b].proc)(g,c,d)};return{version:"1.0.0",parsePKCS5PEM:function(a){return f(a)},getKeyAndUnusedIvByPasscodeAndIvsalt:function(a,b,c){return g(a,b,c)},decryptKeyB64:function(a,b,c,d){return h(a,b,c,d)},getDecryptedKeyHex:function(a,b){var c=f(a),d=(c.type,c.cipher),e=c.ivsalt,i=c.data,j=g(d,b,e).keyhex;return h(i,d,j,e)},getEncryptedPKCS5PEMFromPrvKeyHex:function(a,b,c,d,f){var h="";if(void 0!==d&&null!=d||(d="AES-256-CBC"),void 0===e[d])throw"KEYUTIL unsupported algorithm: "+d;void 0!==f&&null!=f||(f=function(a){var b=ma.lib.WordArray.random(a);return ma.enc.Hex.stringify(b)}(e[d].ivlen).toUpperCase());var i=function(a,b,c,d){return(0,e[b].eproc)(a,c,d)}(b,d,g(d,c,f).keyhex,f);return h="-----BEGIN "+a+" PRIVATE KEY-----\r\n",h+="Proc-Type: 4,ENCRYPTED\r\n",h+="DEK-Info: "+d+","+f+"\r\n",h+="\r\n",h+=i.replace(/(.{64})/g,"$1\r\n"),h+="\r\n-----END "+a+" PRIVATE KEY-----\r\n"},parseHexOfEncryptedPKCS8:function(a){var b=Ia,c=b.getChildIdx,d=b.getV,e={},f=c(a,0);if(2!=f.length)throw"malformed format: SEQUENCE(0).items != 2: "+f.length;e.ciphertext=d(a,f[1]);var g=c(a,f[0]);if(2!=g.length)throw"malformed format: SEQUENCE(0.0).items != 2: "+g.length;if("2a864886f70d01050d"!=d(a,g[0]))throw"this only supports pkcs5PBES2";var h=c(a,g[1]);if(2!=g.length)throw"malformed format: SEQUENCE(0.0.1).items != 2: "+h.length;var i=c(a,h[1]);if(2!=i.length)throw"malformed format: SEQUENCE(0.0.1.1).items != 2: "+i.length;if("2a864886f70d0307"!=d(a,i[0]))throw"this only supports TripleDES";e.encryptionSchemeAlg="TripleDES",e.encryptionSchemeIV=d(a,i[1]);var j=c(a,h[0]);if(2!=j.length)throw"malformed format: SEQUENCE(0.0.1.0).items != 2: "+j.length;if("2a864886f70d01050c"!=d(a,j[0]))throw"this only supports pkcs5PBKDF2";var k=c(a,j[1]);if(k.length<2)throw"malformed format: SEQUENCE(0.0.1.0.1).items < 2: "+k.length;e.pbkdf2Salt=d(a,k[0]);var l=d(a,k[1]);try{e.pbkdf2Iter=parseInt(l,16)}catch(a){throw"malformed format pbkdf2Iter: "+l}return e},getPBKDF2KeyHexFromParam:function(a,b){var c=ma.enc.Hex.parse(a.pbkdf2Salt),d=a.pbkdf2Iter,e=ma.PBKDF2(b,c,{keySize:6,iterations:d});return ma.enc.Hex.stringify(e)},_getPlainPKCS8HexFromEncryptedPKCS8PEM:function(a,b){var c=W(a,"ENCRYPTED PRIVATE KEY"),d=this.parseHexOfEncryptedPKCS8(c),e=Ja.getPBKDF2KeyHexFromParam(d,b),f={};f.ciphertext=ma.enc.Hex.parse(d.ciphertext);var g=ma.enc.Hex.parse(e),h=ma.enc.Hex.parse(d.encryptionSchemeIV),i=ma.TripleDES.decrypt(f,g,{iv:h});return ma.enc.Hex.stringify(i)},getKeyFromEncryptedPKCS8PEM:function(a,b){var c=this._getPlainPKCS8HexFromEncryptedPKCS8PEM(a,b);return this.getKeyFromPlainPrivatePKCS8Hex(c)},parsePlainPrivatePKCS8Hex:function(a){var b=Ia,c=b.getChildIdx,d=b.getV,e={algparam:null};if("30"!=a.substr(0,2))throw"malformed plain PKCS8 private key(code:001)";var f=c(a,0);if(3!=f.length)throw"malformed plain PKCS8 private key(code:002)";if("30"!=a.substr(f[1],2))throw"malformed PKCS8 private key(code:003)";var g=c(a,f[1]);if(2!=g.length)throw"malformed PKCS8 private key(code:004)";if("06"!=a.substr(g[0],2))throw"malformed PKCS8 private key(code:005)";if(e.algoid=d(a,g[0]),"06"==a.substr(g[1],2)&&(e.algparam=d(a,g[1])),"04"!=a.substr(f[2],2))throw"malformed PKCS8 private key(code:006)";return e.keyidx=b.getVidx(a,f[2]),e},getKeyFromPlainPrivatePKCS8PEM:function(a){var b=W(a,"PRIVATE KEY");return this.getKeyFromPlainPrivatePKCS8Hex(b)},getKeyFromPlainPrivatePKCS8Hex:function(a){var b,c=this.parsePlainPrivatePKCS8Hex(a);if("2a864886f70d010101"==c.algoid)b=new C;else if("2a8648ce380401"==c.algoid)b=new Ea.crypto.DSA;else{if("2a8648ce3d0201"!=c.algoid)throw"unsupported private key algorithm";b=new Ea.crypto.ECDSA}return b.readPKCS8PrvKeyHex(a),b},_getKeyFromPublicPKCS8Hex:function(a){var b,c=Ia.getVbyList(a,0,[0,0],"06");if("2a864886f70d010101"===c)b=new C;else if("2a8648ce380401"===c)b=new Ea.crypto.DSA;else{if("2a8648ce3d0201"!==c)throw"unsupported PKCS#8 public key hex";b=new Ea.crypto.ECDSA}return b.readPKCS8PubKeyHex(a),b},parsePublicRawRSAKeyHex:function(a){var b=Ia,c=b.getChildIdx,d=b.getV,e={};if("30"!=a.substr(0,2))throw"malformed RSA key(code:001)";var f=c(a,0);if(2!=f.length)throw"malformed RSA key(code:002)";if("02"!=a.substr(f[0],2))throw"malformed RSA key(code:003)";if(e.n=d(a,f[0]),"02"!=a.substr(f[1],2))throw"malformed RSA key(code:004)";return e.e=d(a,f[1]),e},parsePublicPKCS8Hex:function(a){var b=Ia,c=b.getChildIdx,d=b.getV,e={algparam:null},f=c(a,0);if(2!=f.length)throw"outer DERSequence shall have 2 elements: "+f.length;var g=f[0];if("30"!=a.substr(g,2))throw"malformed PKCS8 public key(code:001)";var h=c(a,g);if(2!=h.length)throw"malformed PKCS8 public key(code:002)";if("06"!=a.substr(h[0],2))throw"malformed PKCS8 public key(code:003)";if(e.algoid=d(a,h[0]),"06"==a.substr(h[1],2)?e.algparam=d(a,h[1]):"30"==a.substr(h[1],2)&&(e.algparam={},e.algparam.p=b.getVbyList(a,h[1],[0],"02"),e.algparam.q=b.getVbyList(a,h[1],[1],"02"),e.algparam.g=b.getVbyList(a,h[1],[2],"02")),"03"!=a.substr(f[1],2))throw"malformed PKCS8 public key(code:004)";return e.key=d(a,f[1]).substr(2),e}}}();Ja.getKey=function(a,b,c){var d=(r=Ia).getChildIdx,e=(r.getV,r.getVbyList),g=Ea.crypto,h=g.ECDSA,i=g.DSA,j=C,k=W,l=Ja;if(void 0!==j&&a instanceof j)return a;if(void 0!==h&&a instanceof h)return a;if(void 0!==i&&a instanceof i)return a;if(void 0!==a.curve&&void 0!==a.xy&&void 0===a.d)return new h({pub:a.xy,curve:a.curve});if(void 0!==a.curve&&void 0!==a.d)return new h({prv:a.d,curve:a.curve});if(void 0===a.kty&&void 0!==a.n&&void 0!==a.e&&void 0===a.d)return(D=new j).setPublic(a.n,a.e),D;if(void 0===a.kty&&void 0!==a.n&&void 0!==a.e&&void 0!==a.d&&void 0!==a.p&&void 0!==a.q&&void 0!==a.dp&&void 0!==a.dq&&void 0!==a.co&&void 0===a.qi)return(D=new j).setPrivateEx(a.n,a.e,a.d,a.p,a.q,a.dp,a.dq,a.co),D;if(void 0===a.kty&&void 0!==a.n&&void 0!==a.e&&void 0!==a.d&&void 0===a.p)return(D=new j).setPrivate(a.n,a.e,a.d),D;if(void 0!==a.p&&void 0!==a.q&&void 0!==a.g&&void 0!==a.y&&void 0===a.x)return(D=new i).setPublic(a.p,a.q,a.g,a.y),D;if(void 0!==a.p&&void 0!==a.q&&void 0!==a.g&&void 0!==a.y&&void 0!==a.x)return(D=new i).setPrivate(a.p,a.q,a.g,a.y,a.x),D;if("RSA"===a.kty&&void 0!==a.n&&void 0!==a.e&&void 0===a.d)return(D=new j).setPublic(N(a.n),N(a.e)),D;if("RSA"===a.kty&&void 0!==a.n&&void 0!==a.e&&void 0!==a.d&&void 0!==a.p&&void 0!==a.q&&void 0!==a.dp&&void 0!==a.dq&&void 0!==a.qi)return(D=new j).setPrivateEx(N(a.n),N(a.e),N(a.d),N(a.p),N(a.q),N(a.dp),N(a.dq),N(a.qi)),D;if("RSA"===a.kty&&void 0!==a.n&&void 0!==a.e&&void 0!==a.d)return(D=new j).setPrivate(N(a.n),N(a.e),N(a.d)),D;if("EC"===a.kty&&void 0!==a.crv&&void 0!==a.x&&void 0!==a.y&&void 0===a.d){var m=(B=new h({curve:a.crv})).ecparams.keylen/4,n="04"+("0000000000"+N(a.x)).slice(-m)+("0000000000"+N(a.y)).slice(-m);return B.setPublicKeyHex(n),B}if("EC"===a.kty&&void 0!==a.crv&&void 0!==a.x&&void 0!==a.y&&void 0!==a.d){m=(B=new h({curve:a.crv})).ecparams.keylen/4,n="04"+("0000000000"+N(a.x)).slice(-m)+("0000000000"+N(a.y)).slice(-m);var o=("0000000000"+N(a.d)).slice(-m);return B.setPublicKeyHex(n),B.setPrivateKeyHex(o),B}if("pkcs5prv"===c){var p,q=a,r=Ia;if(9===(p=d(q,0)).length)(D=new j).readPKCS5PrvKeyHex(q);else if(6===p.length)(D=new i).readPKCS5PrvKeyHex(q);else{if(!(p.length>2&&"04"===q.substr(p[1],2)))throw"unsupported PKCS#1/5 hexadecimal key";(D=new h).readPKCS5PrvKeyHex(q)}return D}if("pkcs8prv"===c)return D=l.getKeyFromPlainPrivatePKCS8Hex(a);if("pkcs8pub"===c)return l._getKeyFromPublicPKCS8Hex(a);if("x509pub"===c)return ha.getPublicKeyFromCertHex(a);if(-1!=a.indexOf("-END CERTIFICATE-",0)||-1!=a.indexOf("-END X509 CERTIFICATE-",0)||-1!=a.indexOf("-END TRUSTED CERTIFICATE-",0))return ha.getPublicKeyFromCertPEM(a);if(-1!=a.indexOf("-END PUBLIC KEY-")){var s=W(a,"PUBLIC KEY");return l._getKeyFromPublicPKCS8Hex(s)}if(-1!=a.indexOf("-END RSA PRIVATE KEY-")&&-1==a.indexOf("4,ENCRYPTED")){var t=k(a,"RSA PRIVATE KEY");return l.getKey(t,null,"pkcs5prv")}if(-1!=a.indexOf("-END DSA PRIVATE KEY-")&&-1==a.indexOf("4,ENCRYPTED")){var u=e(G=k(a,"DSA PRIVATE KEY"),0,[1],"02"),v=e(G,0,[2],"02"),w=e(G,0,[3],"02"),x=e(G,0,[4],"02"),y=e(G,0,[5],"02");return(D=new i).setPrivate(new f(u,16),new f(v,16),new f(w,16),new f(x,16),new f(y,16)),D}if(-1!=a.indexOf("-END PRIVATE KEY-"))return l.getKeyFromPlainPrivatePKCS8PEM(a);if(-1!=a.indexOf("-END RSA PRIVATE KEY-")&&-1!=a.indexOf("4,ENCRYPTED")){
var z=l.getDecryptedKeyHex(a,b),A=new C;return A.readPKCS5PrvKeyHex(z),A}if(-1!=a.indexOf("-END EC PRIVATE KEY-")&&-1!=a.indexOf("4,ENCRYPTED")){var B,D=e(G=l.getDecryptedKeyHex(a,b),0,[1],"04"),E=e(G,0,[2,0],"06"),F=e(G,0,[3,0],"03").substr(2);if(void 0===Ea.crypto.OID.oidhex2name[E])throw"undefined OID(hex) in KJUR.crypto.OID: "+E;return(B=new h({curve:Ea.crypto.OID.oidhex2name[E]})).setPublicKeyHex(F),B.setPrivateKeyHex(D),B.isPublic=!1,B}if(-1!=a.indexOf("-END DSA PRIVATE KEY-")&&-1!=a.indexOf("4,ENCRYPTED")){var G;return u=e(G=l.getDecryptedKeyHex(a,b),0,[1],"02"),v=e(G,0,[2],"02"),w=e(G,0,[3],"02"),x=e(G,0,[4],"02"),y=e(G,0,[5],"02"),(D=new i).setPrivate(new f(u,16),new f(v,16),new f(w,16),new f(x,16),new f(y,16)),D}if(-1!=a.indexOf("-END ENCRYPTED PRIVATE KEY-"))return l.getKeyFromEncryptedPKCS8PEM(a,b);throw"not supported argument"},Ja.generateKeypair=function(a,b){if("RSA"==a){var c=b;(g=new C).generate(c,"10001"),g.isPrivate=!0,g.isPublic=!0;var d=new C,e=g.n.toString(16),f=g.e.toString(16);return d.setPublic(e,f),d.isPrivate=!1,d.isPublic=!0,(h={}).prvKeyObj=g,h.pubKeyObj=d,h}if("EC"==a){var g,h,i=b,j=new Ea.crypto.ECDSA({curve:i}).generateKeyPairHex();return(g=new Ea.crypto.ECDSA({curve:i})).setPublicKeyHex(j.ecpubhex),g.setPrivateKeyHex(j.ecprvhex),g.isPrivate=!0,g.isPublic=!1,(d=new Ea.crypto.ECDSA({curve:i})).setPublicKeyHex(j.ecpubhex),d.isPrivate=!1,d.isPublic=!0,(h={}).prvKeyObj=g,h.pubKeyObj=d,h}throw"unknown algorithm: "+a},Ja.getPEM=function(a,b,c,d,e,f){function g(a){return n({seq:[{"int":0},{"int":{bigint:a.n}},{"int":a.e},{"int":{bigint:a.d}},{"int":{bigint:a.p}},{"int":{bigint:a.q}},{"int":{bigint:a.dmp1}},{"int":{bigint:a.dmq1}},{"int":{bigint:a.coeff}}]})}function h(a){return n({seq:[{"int":1},{octstr:{hex:a.prvKeyHex}},{tag:["a0",!0,{oid:{name:a.curveName}}]},{tag:["a1",!0,{bitstr:{hex:"00"+a.pubKeyHex}}]}]})}function i(a){return n({seq:[{"int":0},{"int":{bigint:a.p}},{"int":{bigint:a.q}},{"int":{bigint:a.g}},{"int":{bigint:a.y}},{"int":{bigint:a.x}}]})}var j=Ea,k=j.asn1,l=k.DERObjectIdentifier,m=k.DERInteger,n=k.ASN1Util.newObject,o=k.x509.SubjectPublicKeyInfo,p=j.crypto,q=p.DSA,r=p.ECDSA,s=C;if((void 0!==s&&a instanceof s||void 0!==q&&a instanceof q||void 0!==r&&a instanceof r)&&1==a.isPublic&&(void 0===b||"PKCS8PUB"==b))return V(w=new o(a).getEncodedHex(),"PUBLIC KEY");if("PKCS1PRV"==b&&void 0!==s&&a instanceof s&&(void 0===c||null==c)&&1==a.isPrivate)return V(w=g(a).getEncodedHex(),"RSA PRIVATE KEY");if("PKCS1PRV"==b&&void 0!==r&&a instanceof r&&(void 0===c||null==c)&&1==a.isPrivate){var t=new l({name:a.curveName}).getEncodedHex(),u=h(a).getEncodedHex(),v="";return v+=V(t,"EC PARAMETERS"),v+=V(u,"EC PRIVATE KEY")}if("PKCS1PRV"==b&&void 0!==q&&a instanceof q&&(void 0===c||null==c)&&1==a.isPrivate)return V(w=i(a).getEncodedHex(),"DSA PRIVATE KEY");if("PKCS5PRV"==b&&void 0!==s&&a instanceof s&&void 0!==c&&null!=c&&1==a.isPrivate){var w=g(a).getEncodedHex();return void 0===d&&(d="DES-EDE3-CBC"),this.getEncryptedPKCS5PEMFromPrvKeyHex("RSA",w,c,d,f)}if("PKCS5PRV"==b&&void 0!==r&&a instanceof r&&void 0!==c&&null!=c&&1==a.isPrivate)return w=h(a).getEncodedHex(),void 0===d&&(d="DES-EDE3-CBC"),this.getEncryptedPKCS5PEMFromPrvKeyHex("EC",w,c,d,f);if("PKCS5PRV"==b&&void 0!==q&&a instanceof q&&void 0!==c&&null!=c&&1==a.isPrivate)return w=i(a).getEncodedHex(),void 0===d&&(d="DES-EDE3-CBC"),this.getEncryptedPKCS5PEMFromPrvKeyHex("DSA",w,c,d,f);var x=function(a,b){var c=y(a,b);return new n({seq:[{seq:[{oid:{name:"pkcs5PBES2"}},{seq:[{seq:[{oid:{name:"pkcs5PBKDF2"}},{seq:[{octstr:{hex:c.pbkdf2Salt}},{"int":c.pbkdf2Iter}]}]},{seq:[{oid:{name:"des-EDE3-CBC"}},{octstr:{hex:c.encryptionSchemeIV}}]}]}]},{octstr:{hex:c.ciphertext}}]}).getEncodedHex()},y=function(a,b){var c=ma.lib.WordArray.random(8),d=ma.lib.WordArray.random(8),e=ma.PBKDF2(b,c,{keySize:6,iterations:100}),f=ma.enc.Hex.parse(a),g=ma.TripleDES.encrypt(f,e,{iv:d})+"",h={};return h.ciphertext=g,h.pbkdf2Salt=ma.enc.Hex.stringify(c),h.pbkdf2Iter=100,h.encryptionSchemeAlg="DES-EDE3-CBC",h.encryptionSchemeIV=ma.enc.Hex.stringify(d),h};if("PKCS8PRV"==b&&void 0!=s&&a instanceof s&&1==a.isPrivate){var z=g(a).getEncodedHex();return w=n({seq:[{"int":0},{seq:[{oid:{name:"rsaEncryption"}},{"null":!0}]},{octstr:{hex:z}}]}).getEncodedHex(),void 0===c||null==c?V(w,"PRIVATE KEY"):V(u=x(w,c),"ENCRYPTED PRIVATE KEY")}if("PKCS8PRV"==b&&void 0!==r&&a instanceof r&&1==a.isPrivate)return z=new n({seq:[{"int":1},{octstr:{hex:a.prvKeyHex}},{tag:["a1",!0,{bitstr:{hex:"00"+a.pubKeyHex}}]}]}).getEncodedHex(),w=n({seq:[{"int":0},{seq:[{oid:{name:"ecPublicKey"}},{oid:{name:a.curveName}}]},{octstr:{hex:z}}]}).getEncodedHex(),void 0===c||null==c?V(w,"PRIVATE KEY"):V(u=x(w,c),"ENCRYPTED PRIVATE KEY");if("PKCS8PRV"==b&&void 0!==q&&a instanceof q&&1==a.isPrivate)return z=new m({bigint:a.x}).getEncodedHex(),w=n({seq:[{"int":0},{seq:[{oid:{name:"dsa"}},{seq:[{"int":{bigint:a.p}},{"int":{bigint:a.q}},{"int":{bigint:a.g}}]}]},{octstr:{hex:z}}]}).getEncodedHex(),void 0===c||null==c?V(w,"PRIVATE KEY"):V(u=x(w,c),"ENCRYPTED PRIVATE KEY");throw"unsupported object nor format"},Ja.getKeyFromCSRPEM=function(a){var b=W(a,"CERTIFICATE REQUEST");return Ja.getKeyFromCSRHex(b)},Ja.getKeyFromCSRHex=function(a){var b=Ja.parseCSRHex(a);return Ja.getKey(b.p8pubkeyhex,null,"pkcs8pub")},Ja.parseCSRHex=function(a){var b=Ia,c=b.getChildIdx,d=b.getTLV,e={},f=a;if("30"!=f.substr(0,2))throw"malformed CSR(code:001)";var g=c(f,0);if(g.length<1)throw"malformed CSR(code:002)";if("30"!=f.substr(g[0],2))throw"malformed CSR(code:003)";var h=c(f,g[0]);if(h.length<3)throw"malformed CSR(code:004)";return e.p8pubkeyhex=d(f,h[2]),e},Ja.getJWKFromKey=function(a){var b={};if(a instanceof C&&a.isPrivate)return b.kty="RSA",b.n=M(a.n.toString(16)),b.e=M(a.e.toString(16)),b.d=M(a.d.toString(16)),b.p=M(a.p.toString(16)),b.q=M(a.q.toString(16)),b.dp=M(a.dmp1.toString(16)),b.dq=M(a.dmq1.toString(16)),b.qi=M(a.coeff.toString(16)),b;if(a instanceof C&&a.isPublic)return b.kty="RSA",b.n=M(a.n.toString(16)),b.e=M(a.e.toString(16)),b;if(a instanceof Ea.crypto.ECDSA&&a.isPrivate){if("P-256"!==(d=a.getShortNISTPCurveName())&&"P-384"!==d)throw"unsupported curve name for JWT: "+d;var c=a.getPublicKeyXYHex();return b.kty="EC",b.crv=d,b.x=M(c.x),b.y=M(c.y),b.d=M(a.prvKeyHex),b}if(a instanceof Ea.crypto.ECDSA&&a.isPublic){var d;if("P-256"!==(d=a.getShortNISTPCurveName())&&"P-384"!==d)throw"unsupported curve name for JWT: "+d;return c=a.getPublicKeyXYHex(),b.kty="EC",b.crv=d,b.x=M(c.x),b.y=M(c.y),b}throw"not supported key object"},C.getPosArrayOfChildrenFromHex=function(a){return Ia.getChildIdx(a,0)},C.getHexValueArrayOfChildrenFromHex=function(a){var b,c=Ia.getV,d=c(a,(b=C.getPosArrayOfChildrenFromHex(a))[0]),e=c(a,b[1]),f=c(a,b[2]),g=c(a,b[3]),h=c(a,b[4]),i=c(a,b[5]),j=c(a,b[6]),k=c(a,b[7]),l=c(a,b[8]);return(b=new Array).push(d,e,f,g,h,i,j,k,l),b},C.prototype.readPrivateKeyFromPEMString=function(a){var b=W(a),c=C.getHexValueArrayOfChildrenFromHex(b);this.setPrivateEx(c[1],c[2],c[3],c[4],c[5],c[6],c[7],c[8])},C.prototype.readPKCS5PrvKeyHex=function(a){var b=C.getHexValueArrayOfChildrenFromHex(a);this.setPrivateEx(b[1],b[2],b[3],b[4],b[5],b[6],b[7],b[8])},C.prototype.readPKCS8PrvKeyHex=function(a){var b,c,d,e,f,g,h,i,j=Ia,k=j.getVbyList;if(!1===j.isASN1HEX(a))throw"not ASN.1 hex string";try{b=k(a,0,[2,0,1],"02"),c=k(a,0,[2,0,2],"02"),d=k(a,0,[2,0,3],"02"),e=k(a,0,[2,0,4],"02"),f=k(a,0,[2,0,5],"02"),g=k(a,0,[2,0,6],"02"),h=k(a,0,[2,0,7],"02"),i=k(a,0,[2,0,8],"02")}catch(a){throw"malformed PKCS#8 plain RSA private key"}this.setPrivateEx(b,c,d,e,f,g,h,i)},C.prototype.readPKCS5PubKeyHex=function(a){var b=Ia,c=b.getV;if(!1===b.isASN1HEX(a))throw"keyHex is not ASN.1 hex string";var d=b.getChildIdx(a,0);if(2!==d.length||"02"!==a.substr(d[0],2)||"02"!==a.substr(d[1],2))throw"wrong hex for PKCS#5 public key";var e=c(a,d[0]),f=c(a,d[1]);this.setPublic(e,f)},C.prototype.readPKCS8PubKeyHex=function(a){var b=Ia;if(!1===b.isASN1HEX(a))throw"not ASN.1 hex string";if("06092a864886f70d010101"!==b.getTLVbyList(a,0,[0,0]))throw"not PKCS8 RSA public key";var c=b.getTLVbyList(a,0,[1,0]);this.readPKCS5PubKeyHex(c)},C.prototype.readCertPubKeyHex=function(a,b){var c,d;(c=new ha).readCertHex(a),d=c.getPublicKeyHex(),this.readPKCS8PubKeyHex(d)};var Ka=new RegExp("");Ka.compile("[^0-9a-f]","gi"),C.prototype.sign=function(a,b){var c=function(a){return Ea.crypto.Util.hashString(a,b)}(a);return this.signWithMessageHash(c,b)},C.prototype.signWithMessageHash=function(a,b){var c=A(Ea.crypto.Util.getPaddedDigestInfoHex(a,b,this.n.bitLength()),16);return ea(this.doPrivate(c).toString(16),this.n.bitLength())},C.prototype.signPSS=function(a,b,c){var d=function(a){return Ea.crypto.Util.hashHex(a,b)}(R(a));return void 0===c&&(c=-1),this.signWithMessageHashPSS(d,b,c)},C.prototype.signWithMessageHashPSS=function(a,b,c){var d,e=Q(a),g=e.length,h=this.n.bitLength()-1,i=Math.ceil(h/8),j=function(a){return Ea.crypto.Util.hashHex(a,b)};if(-1===c||void 0===c)c=g;else if(-2===c)c=i-g-2;else if(c<-2)throw"invalid salt length";if(i<g+c+2)throw"data too long";var k="";c>0&&(k=new Array(c),(new z).nextBytes(k),k=String.fromCharCode.apply(String,k));var l=Q(j(R("\0\0\0\0\0\0\0\0"+e+k))),m=[];for(d=0;d<i-c-g-2;d+=1)m[d]=0;var n=String.fromCharCode.apply(String,m)+""+k,o=fa(l,n.length,j),p=[];for(d=0;d<n.length;d+=1)p[d]=n.charCodeAt(d)^o.charCodeAt(d);var q=65280>>8*i-h&255;for(p[0]&=~q,d=0;d<g;d++)p.push(l.charCodeAt(d));return p.push(188),ea(this.doPrivate(new f(p)).toString(16),this.n.bitLength())},C.prototype.verify=function(a,b){var c=A(b=(b=b.replace(Ka,"")).replace(/[ \n]+/g,""),16);if(c.bitLength()>this.n.bitLength())return 0;var d=ga(this.doPublic(c).toString(16).replace(/^1f+00/,""));if(0==d.length)return!1;var e=d[0];return d[1]==function(a){return Ea.crypto.Util.hashString(a,e)}(a)},C.prototype.verifyWithMessageHash=function(a,b){var c=A(b=(b=b.replace(Ka,"")).replace(/[ \n]+/g,""),16);if(c.bitLength()>this.n.bitLength())return 0;var d=ga(this.doPublic(c).toString(16).replace(/^1f+00/,""));return 0!=d.length&&(d[0],d[1]==a)},C.prototype.verifyPSS=function(a,b,c,d){var e=function(a){return Ea.crypto.Util.hashHex(a,c)}(R(a));return void 0===d&&(d=-1),this.verifyWithMessageHashPSS(e,b,c,d)},C.prototype.verifyWithMessageHashPSS=function(a,b,c,d){var e=new f(b,16);if(e.bitLength()>this.n.bitLength())return!1;var g,h=function(a){return Ea.crypto.Util.hashHex(a,c)},i=Q(a),j=i.length,k=this.n.bitLength()-1,l=Math.ceil(k/8);if(-1===d||void 0===d)d=j;else if(-2===d)d=l-j-2;else if(d<-2)throw"invalid salt length";if(l<j+d+2)throw"data too long";var m=this.doPublic(e).toByteArray();for(g=0;g<m.length;g+=1)m[g]&=255;for(;m.length<l;)m.unshift(0);if(188!==m[l-1])throw"encoded message does not end in 0xbc";var n=(m=String.fromCharCode.apply(String,m)).substr(0,l-j-1),o=m.substr(n.length,j),p=65280>>8*l-k&255;if(0!=(n.charCodeAt(0)&p))throw"bits beyond keysize not zero";var q=fa(o,n.length,h),r=[];for(g=0;g<n.length;g+=1)r[g]=n.charCodeAt(g)^q.charCodeAt(g);r[0]&=~p;var s=l-j-d-2;for(g=0;g<s;g+=1)if(0!==r[g])throw"leftmost octets not zero";if(1!==r[s])throw"0x01 marker not found";return o===Q(h(R("\0\0\0\0\0\0\0\0"+i+String.fromCharCode.apply(String,r.slice(-d)))))},C.SALT_LEN_HLEN=-1,C.SALT_LEN_MAX=-2,C.SALT_LEN_RECOVER=-2,ha.hex2dn=function(a,b){if(void 0===b&&(b=0),"30"!==a.substr(b,2))throw"malformed DN";for(var c=new Array,d=Ia.getChildIdx(a,b),e=0;e<d.length;e++)c.push(ha.hex2rdn(a,d[e]));return"/"+(c=c.map(function(a){return a.replace("/","\\/")})).join("/")},ha.hex2rdn=function(a,b){if(void 0===b&&(b=0),"31"!==a.substr(b,2))throw"malformed RDN";for(var c=new Array,d=Ia.getChildIdx(a,b),e=0;e<d.length;e++)c.push(ha.hex2attrTypeValue(a,d[e]));return(c=c.map(function(a){return a.replace("+","\\+")})).join("+")},ha.hex2attrTypeValue=function(a,b){var c=Ia,d=c.getV;if(void 0===b&&(b=0),"30"!==a.substr(b,2))throw"malformed attribute type and value";var e=c.getChildIdx(a,b);2!==e.length||a.substr(e[0],2);var f=d(a,e[0]),g=Ea.asn1.ASN1Util.oidHexToInt(f);return Ea.asn1.x509.OID.oid2atype(g)+"="+Q(d(a,e[1]))},ha.getPublicKeyFromCertHex=function(a){var b=new ha;return b.readCertHex(a),b.getPublicKey()},ha.getPublicKeyFromCertPEM=function(a){var b=new ha;return b.readCertPEM(a),b.getPublicKey()},ha.getPublicKeyInfoPropOfCertPEM=function(a){var b,c,d=Ia.getVbyList,e={};return e.algparam=null,(b=new ha).readCertPEM(a),c=b.getPublicKeyHex(),e.keyhex=d(c,0,[1],"03").substr(2),e.algoid=d(c,0,[0,0],"06"),"2a8648ce3d0201"===e.algoid&&(e.algparam=d(c,0,[0,1],"06")),e},ha.KEYUSAGE_NAME=["digitalSignature","nonRepudiation","keyEncipherment","dataEncipherment","keyAgreement","keyCertSign","cRLSign","encipherOnly","decipherOnly"],void 0!==Ea&&Ea||(Ea={}),void 0!==Ea.jws&&Ea.jws||(Ea.jws={}),Ea.jws.JWS=function(){var a=Ea.jws.JWS.isSafeJSONString;this.parseJWS=function(b,c){if(void 0===this.parsedJWS||!c&&void 0===this.parsedJWS.sigvalH){var d=b.match(/^([^.]+)\.([^.]+)\.([^.]+)$/);if(null==d)throw"JWS signature is not a form of 'Head.Payload.SigValue'.";var e=d[1],f=d[2],g=d[3],h=e+"."+f;if(this.parsedJWS={},this.parsedJWS.headB64U=e,this.parsedJWS.payloadB64U=f,this.parsedJWS.sigvalB64U=g,this.parsedJWS.si=h,!c){var i=N(g),j=A(i,16);this.parsedJWS.sigvalH=i,this.parsedJWS.sigvalBI=j}var k=Ga(e),l=Ga(f);if(this.parsedJWS.headS=k,this.parsedJWS.payloadS=l,!a(k,this.parsedJWS,"headP"))throw"malformed JSON string for JWS Head: "+k}}},Ea.jws.JWS.sign=function(a,b,c,d,e){var f,g,h,i=Ea,j=i.jws.JWS,k=j.readSafeJSONString,l=j.isSafeJSONString,m=i.crypto,n=(m.ECDSA,m.Mac),o=m.Signature,p=JSON;if("string"!=typeof b&&"object"!=(void 0===b?"undefined":ia(b)))throw"spHeader must be JSON string or object: "+b;if("object"==(void 0===b?"undefined":ia(b))&&(g=b,f=p.stringify(g)),"string"==typeof b){if(!l(f=b))throw"JWS Head is not safe JSON string: "+f;g=k(f)}if(h=c,"object"==(void 0===c?"undefined":ia(c))&&(h=p.stringify(c)),""!=a&&null!=a||void 0===g.alg||(a=g.alg),""!=a&&null!=a&&void 0===g.alg&&(g.alg=a,f=p.stringify(g)),a!==g.alg)throw"alg and sHeader.alg doesn't match: "+a+"!="+g.alg;var q=null;if(void 0===j.jwsalg2sigalg[a])throw"unsupported alg name: "+a;q=j.jwsalg2sigalg[a];var r=Fa(f)+"."+Fa(h),s="";if("Hmac"==q.substr(0,4)){if(void 0===d)throw"mac key shall be specified for HS* alg";var t=new n({alg:q,prov:"cryptojs",pass:d});t.updateString(r),s=t.doFinal()}else{var u;-1!=q.indexOf("withECDSA")?((u=new o({alg:q})).init(d,e),u.updateString(r),hASN1Sig=u.sign(),s=Ea.crypto.ECDSA.asn1SigToConcatSig(hASN1Sig)):"none"!=q&&((u=new o({alg:q})).init(d,e),u.updateString(r),s=u.sign())}return r+"."+M(s)},Ea.jws.JWS.verify=function(a,b,c){var d,e=Ea,f=e.jws.JWS,g=f.readSafeJSONString,h=e.crypto,i=h.ECDSA,j=h.Mac,k=h.Signature;void 0!==ia(C)&&(d=C);var l=a.split(".");if(3!==l.length)return!1;var m=l[0]+"."+l[1],n=N(l[2]),o=g(Ga(l[0])),p=null,q=null;if(void 0===o.alg)throw"algorithm not specified in header";if(q=(p=o.alg).substr(0,2),null!=c&&"[object Array]"===Object.prototype.toString.call(c)&&c.length>0&&-1==(":"+c.join(":")+":").indexOf(":"+p+":"))throw"algorithm '"+p+"' not accepted in the list";if("none"!=p&&null===b)throw"key shall be specified to verify.";if("string"==typeof b&&-1!=b.indexOf("-----BEGIN ")&&(b=Ja.getKey(b)),!("RS"!=q&&"PS"!=q||b instanceof d))throw"key shall be a RSAKey obj for RS* and PS* algs";if("ES"==q&&!(b instanceof i))throw"key shall be a ECDSA obj for ES* algs";var r=null;if(void 0===f.jwsalg2sigalg[o.alg])throw"unsupported alg name: "+p;if("none"==(r=f.jwsalg2sigalg[p]))throw"not supported";if("Hmac"==r.substr(0,4)){if(void 0===b)throw"hexadecimal key shall be specified for HMAC";var s=new j({alg:r,pass:b});return s.updateString(m),n==s.doFinal()}if(-1!=r.indexOf("withECDSA")){var t,u=null;try{u=i.concatSigToASN1Sig(n)}catch(a){return!1}return(t=new k({alg:r})).init(b),t.updateString(m),t.verify(u)}return(t=new k({alg:r})).init(b),t.updateString(m),t.verify(n)},Ea.jws.JWS.parse=function(a){var b,c,d,e=a.split("."),f={};if(2!=e.length&&3!=e.length)throw"malformed sJWS: wrong number of '.' splitted elements";return b=e[0],c=e[1],3==e.length&&(d=e[2]),f.headerObj=Ea.jws.JWS.readSafeJSONString(Ga(b)),f.payloadObj=Ea.jws.JWS.readSafeJSONString(Ga(c)),f.headerPP=JSON.stringify(f.headerObj,null,"  "),null==f.payloadObj?f.payloadPP=Ga(c):f.payloadPP=JSON.stringify(f.payloadObj,null,"  "),void 0!==d&&(f.sigHex=N(d)),f},Ea.jws.JWS.verifyJWT=function(a,b,c){var d=Ea.jws,e=d.JWS,f=e.readSafeJSONString,g=e.inArray,h=e.includedArray,i=a.split("."),j=i[0],k=i[1],l=(N(i[2]),f(Ga(j))),m=f(Ga(k));if(void 0===l.alg)return!1;if(void 0===c.alg)throw"acceptField.alg shall be specified";if(!g(l.alg,c.alg))return!1;if(void 0!==m.iss&&"object"===ia(c.iss)&&!g(m.iss,c.iss))return!1;if(void 0!==m.sub&&"object"===ia(c.sub)&&!g(m.sub,c.sub))return!1;if(void 0!==m.aud&&"object"===ia(c.aud))if("string"==typeof m.aud){if(!g(m.aud,c.aud))return!1}else if("object"==ia(m.aud)&&!h(m.aud,c.aud))return!1;var n=d.IntDate.getNow();return void 0!==c.verifyAt&&"number"==typeof c.verifyAt&&(n=c.verifyAt),void 0!==c.gracePeriod&&"number"==typeof c.gracePeriod||(c.gracePeriod=0),!(void 0!==m.exp&&"number"==typeof m.exp&&m.exp+c.gracePeriod<n||void 0!==m.nbf&&"number"==typeof m.nbf&&n<m.nbf-c.gracePeriod||void 0!==m.iat&&"number"==typeof m.iat&&n<m.iat-c.gracePeriod||void 0!==m.jti&&void 0!==c.jti&&m.jti!==c.jti||!e.verify(a,b,c.alg))},Ea.jws.JWS.includedArray=function(a,b){var c=Ea.jws.JWS.inArray;if(null===a)return!1;if("object"!==(void 0===a?"undefined":ia(a)))return!1;if("number"!=typeof a.length)return!1;for(var d=0;d<a.length;d++)if(!c(a[d],b))return!1;return!0},Ea.jws.JWS.inArray=function(a,b){if(null===b)return!1;if("object"!==(void 0===b?"undefined":ia(b)))return!1;if("number"!=typeof b.length)return!1;for(var c=0;c<b.length;c++)if(b[c]==a)return!0;return!1},Ea.jws.JWS.jwsalg2sigalg={HS256:"HmacSHA256",HS384:"HmacSHA384",HS512:"HmacSHA512",RS256:"SHA256withRSA",RS384:"SHA384withRSA",RS512:"SHA512withRSA",ES256:"SHA256withECDSA",ES384:"SHA384withECDSA",PS256:"SHA256withRSAandMGF1",PS384:"SHA384withRSAandMGF1",PS512:"SHA512withRSAandMGF1",none:"none"},Ea.jws.JWS.isSafeJSONString=function(a,b,c){var d=null;try{return"object"!=(void 0===(d=Ha(a))?"undefined":ia(d))?0:d.constructor===Array?0:(b&&(b[c]=d),1)}catch(a){return 0}},Ea.jws.JWS.readSafeJSONString=function(a){var b=null;try{return"object"!=(void 0===(b=Ha(a))?"undefined":ia(b))?null:b.constructor===Array?null:b}catch(a){return null}},Ea.jws.JWS.getEncodedSignatureValueFromJWS=function(a){var b=a.match(/^[^.]+\.[^.]+\.([^.]+)$/);if(null==b)throw"JWS signature is not a form of 'Head.Payload.SigValue'.";return b[1]},Ea.jws.JWS.getJWKthumbprint=function(a){if("RSA"!==a.kty&&"EC"!==a.kty&&"oct"!==a.kty)throw"unsupported algorithm for JWK Thumprint";var b="{";if("RSA"===a.kty){if("string"!=typeof a.n||"string"!=typeof a.e)throw"wrong n and e value for RSA key";b+='"e":"'+a.e+'",',b+='"kty":"'+a.kty+'",',b+='"n":"'+a.n+'"}'}else if("EC"===a.kty){if("string"!=typeof a.crv||"string"!=typeof a.x||"string"!=typeof a.y)throw"wrong crv, x and y value for EC key";b+='"crv":"'+a.crv+'",',b+='"kty":"'+a.kty+'",',b+='"x":"'+a.x+'",',b+='"y":"'+a.y+'"}'}else if("oct"===a.kty){if("string"!=typeof a.k)throw"wrong k value for oct(symmetric) key";b+='"kty":"'+a.kty+'",',b+='"k":"'+a.k+'"}'}var c=R(b);return M(Ea.crypto.Util.hashHex(c,"sha256"))},Ea.jws.IntDate={},Ea.jws.IntDate.get=function(a){var b=Ea.jws.IntDate,c=b.getNow,d=b.getZulu;if("now"==a)return c();if("now + 1hour"==a)return c()+3600;if("now + 1day"==a)return c()+86400;if("now + 1month"==a)return c()+2592e3;if("now + 1year"==a)return c()+31536e3;if(a.match(/Z$/))return d(a);if(a.match(/^[0-9]+$/))return parseInt(a);throw"unsupported format: "+a},Ea.jws.IntDate.getZulu=function(a){return Y(a)},Ea.jws.IntDate.getNow=function(){return~~(new Date/1e3)},Ea.jws.IntDate.intDate2UTCString=function(a){return new Date(1e3*a).toUTCString()},Ea.jws.IntDate.intDate2Zulu=function(a){var b=new Date(1e3*a);return("0000"+b.getUTCFullYear()).slice(-4)+("00"+(b.getUTCMonth()+1)).slice(-2)+("00"+b.getUTCDate()).slice(-2)+("00"+b.getUTCHours()).slice(-2)+("00"+b.getUTCMinutes()).slice(-2)+("00"+b.getUTCSeconds()).slice(-2)+"Z"},b.SecureRandom=z,b.rng_seed_time=x,b.BigInteger=f,b.RSAKey=C,b.ECDSA=Ea.crypto.ECDSA,b.DSA=Ea.crypto.DSA,b.Signature=Ea.crypto.Signature,b.MessageDigest=Ea.crypto.MessageDigest,b.Mac=Ea.crypto.Mac,b.Cipher=Ea.crypto.Cipher,b.KEYUTIL=Ja,b.ASN1HEX=Ia,b.X509=ha,b.CryptoJS=ma,b.b64tohex=d,b.b64toBA=e,b.stoBA=G,b.BAtos=H,b.BAtohex=I,b.stohex=J,b.stob64=function(a){return c(J(a))},b.stob64u=function(a){return K(c(J(a)))},b.b64utos=function(a){return H(e(L(a)))},b.b64tob64u=K,b.b64utob64=L,b.hex2b64=c,b.hextob64u=M,b.b64utohex=N,b.utf8tob64u=Fa,b.b64utoutf8=Ga,b.utf8tob64=function(a){return c(Z(ca(a)))},b.b64toutf8=function(a){return decodeURIComponent($(d(a)))},b.utf8tohex=O,b.hextoutf8=P,b.hextorstr=Q,b.rstrtohex=R,b.hextob64=S,b.hextob64nl=T,b.b64nltohex=U,b.hextopem=V,b.pemtohex=W,b.hextoArrayBuffer=function(a){if(a.length%2!=0)throw"input is not even length";if(null==a.match(/^[0-9A-Fa-f]+$/))throw"input is not hexadecimal";for(var b=new ArrayBuffer(a.length/2),c=new DataView(b),d=0;d<a.length/2;d++)c.setUint8(d,parseInt(a.substr(2*d,2),16));return b},b.ArrayBuffertohex=function(a){for(var b="",c=new DataView(a),d=0;d<a.byteLength;d++)b+=("00"+c.getUint8(d).toString(16)).slice(-2);return b},b.zulutomsec=X,b.zulutosec=Y,b.zulutodate=function(a){return new Date(X(a))},b.datetozulu=function(a,b,c){var d,e=a.getUTCFullYear();if(b){if(e<1950||2049<e)throw"not proper year for UTCTime: "+e;d=(""+e).slice(-2)}else d=("000"+e).slice(-4);if(d+=("0"+(a.getUTCMonth()+1)).slice(-2),d+=("0"+a.getUTCDate()).slice(-2),d+=("0"+a.getUTCHours()).slice(-2),d+=("0"+a.getUTCMinutes()).slice(-2),d+=("0"+a.getUTCSeconds()).slice(-2),c){var f=a.getUTCMilliseconds();0!==f&&(d+="."+(f=(f=("00"+f).slice(-3)).replace(/0+$/g,"")))}return d+="Z"},b.uricmptohex=Z,b.hextouricmp=$,b.ipv6tohex=_,b.hextoipv6=aa,b.hextoip=ba,b.iptohex=function(a){var b="malformed IP address";if(!(a=a.toLowerCase(a)).match(/^[0-9.]+$/)){if(a.match(/^[0-9a-f:]+$/)&&-1!==a.indexOf(":"))return _(a);throw b}var c=a.split(".");if(4!==c.length)throw b;var d="";try{for(var e=0;e<4;e++)d+=("0"+parseInt(c[e]).toString(16)).slice(-2);return d}catch(a){throw b}},b.encodeURIComponentAll=ca,b.newline_toUnix=function(a){return a=a.replace(/\r\n/gm,"\n")},b.newline_toDos=function(a){return a=(a=a.replace(/\r\n/gm,"\n")).replace(/\n/gm,"\r\n")},b.hextoposhex=da,b.intarystrtohex=function(a){a=(a=(a=a.replace(/^\s*\[\s*/,"")).replace(/\s*\]\s*$/,"")).replace(/\s*/g,"");try{return a.split(/,/).map(function(a,b,c){var d=parseInt(a);if(d<0||255<d)throw"integer not in range 0-255";return("00"+d.toString(16)).slice(-2)}).join("")}catch(a){throw"malformed integer array string: "+a}},b.strdiffidx=function(a,b){var c=a.length;a.length>b.length&&(c=b.length);for(var d=0;d<c;d++)if(a.charCodeAt(d)!=b.charCodeAt(d))return d;return a.length!=b.length?c:-1},b.KJUR=Ea,b.crypto=Ea.crypto,b.asn1=Ea.asn1,b.jws=Ea.jws,b.lang=Ea.lang}).call(this,c(40).Buffer)},function(a,b,c){"use strict";Object.defineProperty(b,"__esModule",{value:!0}),b.JoseUtil=void 0;var d=c(41),e=c(0),f=["RS256","RS384","RS512","PS256","PS384","PS512","ES256","ES384","ES512"];b.JoseUtil=function(){function a(){!function(a,b){if(!(a instanceof b))throw new TypeError("Cannot call a class as a function")}(this,a)}return a.parseJwt=function(a){e.Log.debug("JoseUtil.parseJwt");try{var b=d.jws.JWS.parse(a);return{header:b.headerObj,payload:b.payloadObj}}catch(a){e.Log.error(a)}},a.validateJwt=function(b,c,f,g,h,i){e.Log.debug("JoseUtil.validateJwt");try{if("RSA"===c.kty)if(c.e&&c.n)c=d.KEYUTIL.getKey(c);else{if(!c.x5c||!c.x5c.length)return e.Log.error("JoseUtil.validateJwt: RSA key missing key material",c),Promise.reject(new Error("RSA key missing key material"));var j=(0,d.b64tohex)(c.x5c[0]);c=d.X509.getPublicKeyFromCertHex(j)}else{if("EC"!==c.kty)return e.Log.error("JoseUtil.validateJwt: Unsupported key type",c&&c.kty),Promise.reject(new Error("Unsupported key type: "+c&&c.kty));if(!(c.crv&&c.x&&c.y))return e.Log.error("JoseUtil.validateJwt: EC key missing key material",c),Promise.reject(new Error("EC key missing key material"));c=d.KEYUTIL.getKey(c)}return a._validateJwt(b,c,f,g,h,i)}catch(b){return e.Log.error(b&&b.message||b),Promise.reject("JWT validation failed")}},a._validateJwt=function(b,c,g,h,i,j){i||(i=0),j||(j=parseInt(Date.now()/1e3));var k=a.parseJwt(b).payload;if(!k.iss)return e.Log.error("JoseUtil._validateJwt: issuer was not provided"),Promise.reject(new Error("issuer was not provided"));if(k.iss!==g)return e.Log.error("JoseUtil._validateJwt: Invalid issuer in token",k.iss),Promise.reject(new Error("Invalid issuer in token: "+k.iss));if(!k.aud)return e.Log.error("JoseUtil._validateJwt: aud was not provided"),Promise.reject(new Error("aud was not provided"));if(!(k.aud===h||Array.isArray(k.aud)&&k.aud.indexOf(h)>=0))return e.Log.error("JoseUtil._validateJwt: Invalid audience in token",k.aud),Promise.reject(new Error("Invalid audience in token: "+k.aud));var l=j+i,m=j-i;if(!k.iat)return e.Log.error("JoseUtil._validateJwt: iat was not provided"),Promise.reject(new Error("iat was not provided"));if(l<k.iat)return e.Log.error("JoseUtil._validateJwt: iat is in the future",k.iat),Promise.reject(new Error("iat is in the future: "+k.iat));if(k.nbf&&l<k.nbf)return e.Log.error("JoseUtil._validateJwt: nbf is in the future",k.nbf),Promise.reject(new Error("nbf is in the future: "+k.nbf));if(!k.exp)return e.Log.error("JoseUtil._validateJwt: exp was not provided"),Promise.reject(new Error("exp was not provided"));if(k.exp<m)return e.Log.error("JoseUtil._validateJwt: exp is in the past",k.exp),Promise.reject(new Error("exp is in the past:"+k.exp));try{if(!d.jws.JWS.verify(b,c,f))return e.Log.error("JoseUtil._validateJwt: signature validation failed"),Promise.reject(new Error("signature validation failed"))}catch(b){return e.Log.error(b&&b.message||b),Promise.reject(new Error("signature validation failed"))}return Promise.resolve()},a.hashString=function(a,b){try{return d.crypto.Util.hashString(a,b)}catch(a){e.Log.error(a)}},a.hexToBase64Url=function(a){try{return(0,d.hextob64u)(a)}catch(a){e.Log.error(a)}},a}()},function(a,b,c){"use strict";Object.defineProperty(b,"__esModule",{value:!0}),b.UserInfoService=void 0;var d=c(17),e=c(3),f=c(0);b.UserInfoService=function(){function a(b){var c=arguments.length>1&&void 0!==arguments[1]?arguments[1]:d.JsonService,g=arguments.length>2&&void 0!==arguments[2]?arguments[2]:e.MetadataService;if(function(a,b){if(!(a instanceof b))throw new TypeError("Cannot call a class as a function")}(this,a),!b)throw f.Log.error("UserInfoService.ctor: No settings passed"),new Error("settings");this._settings=b,this._jsonService=new c,this._metadataService=new g(this._settings)}return a.prototype.getClaims=function(a){var b=this;return a?this._metadataService.getUserInfoEndpoint().then(function(c){return f.Log.debug("UserInfoService.getClaims: received userinfo url",c),b._jsonService.getJson(c,a).then(function(a){return f.Log.debug("UserInfoService.getClaims: claims received",a),a})}):(f.Log.error("UserInfoService.getClaims: No token passed"),Promise.reject(new Error("A token is required")))},a}()},function(a,b,c){"use strict";Object.defineProperty(b,"__esModule",{value:!0}),b.ResponseValidator=void 0;var d=c(0),e=c(3),f=c(43),g=c(16),h=c(42),i=["nonce","at_hash","iat","nbf","exp","aud","iss","c_hash"];b.ResponseValidator=function(){function a(b){var c=arguments.length>1&&void 0!==arguments[1]?arguments[1]:e.MetadataService,g=arguments.length>2&&void 0!==arguments[2]?arguments[2]:f.UserInfoService,i=arguments.length>3&&void 0!==arguments[3]?arguments[3]:h.JoseUtil;if(function(a,b){if(!(a instanceof b))throw new TypeError("Cannot call a class as a function")}(this,a),!b)throw d.Log.error("ResponseValidator.ctor: No settings passed to ResponseValidator"),new Error("settings");this._settings=b,this._metadataService=new c(this._settings),this._userInfoService=new g(this._settings),this._joseUtil=i}return a.prototype.validateSigninResponse=function(a,b){var c=this;return d.Log.debug("ResponseValidator.validateSigninResponse"),this._processSigninParams(a,b).then(function(b){return d.Log.debug("ResponseValidator.validateSigninResponse: state processed"),c._validateTokens(a,b).then(function(a){return d.Log.debug("ResponseValidator.validateSigninResponse: tokens validated"),c._processClaims(a).then(function(a){return d.Log.debug("ResponseValidator.validateSigninResponse: claims processed"),a})})})},a.prototype.validateSignoutResponse=function(a,b){return a.id!==b.state?(d.Log.error("ResponseValidator.validateSignoutResponse: State does not match"),Promise.reject(new Error("State does not match"))):(d.Log.debug("ResponseValidator.validateSignoutResponse: state validated"),b.state=a.data,b.error?(d.Log.warn("ResponseValidator.validateSignoutResponse: Response was error",b.error),Promise.reject(new g.ErrorResponse(b))):Promise.resolve(b))},a.prototype._processSigninParams=function(a,b){if(a.id!==b.state)return d.Log.error("ResponseValidator._processSigninParams: State does not match"),Promise.reject(new Error("State does not match"));if(!a.client_id)return d.Log.error("ResponseValidator._processSigninParams: No client_id on state"),Promise.reject(new Error("No client_id on state"));if(!a.authority)return d.Log.error("ResponseValidator._processSigninParams: No authority on state"),Promise.reject(new Error("No authority on state"));if(this._settings.authority){if(this._settings.authority&&this._settings.authority!==a.authority)return d.Log.error("ResponseValidator._processSigninParams: authority mismatch on settings vs. signin state"),Promise.reject(new Error("authority mismatch on settings vs. signin state"))}else this._settings.authority=a.authority;if(this._settings.client_id){if(this._settings.client_id&&this._settings.client_id!==a.client_id)return d.Log.error("ResponseValidator._processSigninParams: client_id mismatch on settings vs. signin state"),Promise.reject(new Error("client_id mismatch on settings vs. signin state"))}else this._settings.client_id=a.client_id;return d.Log.debug("ResponseValidator._processSigninParams: state validated"),b.state=a.data,b.error?(d.Log.warn("ResponseValidator._processSigninParams: Response was error",b.error),Promise.reject(new g.ErrorResponse(b))):a.nonce&&!b.id_token?(d.Log.error("ResponseValidator._processSigninParams: Expecting id_token in response"),Promise.reject(new Error("No id_token in response"))):!a.nonce&&b.id_token?(d.Log.error("ResponseValidator._processSigninParams: Not expecting id_token in response"),Promise.reject(new Error("Unexpected id_token in response"))):Promise.resolve(b)},a.prototype._processClaims=function(a){var b=this;if(a.isOpenIdConnect){if(d.Log.debug("ResponseValidator._processClaims: response is OIDC, processing claims"),a.profile=this._filterProtocolClaims(a.profile),this._settings.loadUserInfo&&a.access_token)return d.Log.debug("ResponseValidator._processClaims: loading user info"),this._userInfoService.getClaims(a.access_token).then(function(c){return d.Log.debug("ResponseValidator._processClaims: user info claims received from user info endpoint"),c.sub!==a.profile.sub?(d.Log.error("ResponseValidator._processClaims: sub from user info endpoint does not match sub in access_token"),Promise.reject(new Error("sub from user info endpoint does not match sub in access_token"))):(a.profile=b._mergeClaims(a.profile,c),d.Log.debug("ResponseValidator._processClaims: user info claims received, updated profile:",a.profile),a)});d.Log.debug("ResponseValidator._processClaims: not loading user info")}else d.Log.debug("ResponseValidator._processClaims: response is not OIDC, not processing claims");return Promise.resolve(a)},a.prototype._mergeClaims=function(a,b){var c=Object.assign({},a);for(var d in b){var e=b[d];Array.isArray(e)||(e=[e]);for(var f=0;f<e.length;f++){
var g=e[f];c[d]?Array.isArray(c[d])?c[d].indexOf(g)<0&&c[d].push(g):c[d]!==g&&(c[d]=[c[d],g]):c[d]=g}}return c},a.prototype._filterProtocolClaims=function(a){d.Log.debug("ResponseValidator._filterProtocolClaims, incoming claims:",a);var b=Object.assign({},a);return this._settings._filterProtocolClaims?(i.forEach(function(a){delete b[a]}),d.Log.debug("ResponseValidator._filterProtocolClaims: protocol claims filtered",b)):d.Log.debug("ResponseValidator._filterProtocolClaims: protocol claims not filtered"),b},a.prototype._validateTokens=function(a,b){return b.id_token?b.access_token?(d.Log.debug("ResponseValidator._validateTokens: Validating id_token and access_token"),this._validateIdTokenAndAccessToken(a,b)):(d.Log.debug("ResponseValidator._validateTokens: Validating id_token"),this._validateIdToken(a,b)):(d.Log.debug("ResponseValidator._validateTokens: No id_token to validate"),Promise.resolve(b))},a.prototype._validateIdTokenAndAccessToken=function(a,b){var c=this;return this._validateIdToken(a,b).then(function(a){return c._validateAccessToken(a)})},a.prototype._validateIdToken=function(a,b){var c=this;if(!a.nonce)return d.Log.error("ResponseValidator._validateIdToken: No nonce on state"),Promise.reject(new Error("No nonce on state"));var e=this._joseUtil.parseJwt(b.id_token);if(!e||!e.header||!e.payload)return d.Log.error("ResponseValidator._validateIdToken: Failed to parse id_token",e),Promise.reject(new Error("Failed to parse id_token"));if(a.nonce!==e.payload.nonce)return d.Log.error("ResponseValidator._validateIdToken: Invalid nonce in id_token"),Promise.reject(new Error("Invalid nonce in id_token"));var f=e.header.kid;return this._metadataService.getIssuer().then(function(g){return d.Log.debug("ResponseValidator._validateIdToken: Received issuer"),c._metadataService.getSigningKeys().then(function(h){if(!h)return d.Log.error("ResponseValidator._validateIdToken: No signing keys from metadata"),Promise.reject(new Error("No signing keys from metadata"));d.Log.debug("ResponseValidator._validateIdToken: Received signing keys");var i=void 0;if(f)i=h.filter(function(a){return a.kid===f})[0];else{if((h=c._filterByAlg(h,e.header.alg)).length>1)return d.Log.error("ResponseValidator._validateIdToken: No kid found in id_token and more than one key found in metadata"),Promise.reject(new Error("No kid found in id_token and more than one key found in metadata"));i=h[0]}if(!i)return d.Log.error("ResponseValidator._validateIdToken: No key matching kid or alg found in signing keys"),Promise.reject(new Error("No key matching kid or alg found in signing keys"));var j=a.client_id,k=c._settings.clockSkew;return d.Log.debug("ResponseValidator._validateIdToken: Validaing JWT; using clock skew (in seconds) of: ",k),c._joseUtil.validateJwt(b.id_token,i,g,j,k).then(function(){return d.Log.debug("ResponseValidator._validateIdToken: JWT validation successful"),e.payload.sub?(b.profile=e.payload,b):(d.Log.error("ResponseValidator._validateIdToken: No sub present in id_token"),Promise.reject(new Error("No sub present in id_token")))})})})},a.prototype._filterByAlg=function(a,b){var c=null;if(b.startsWith("RS"))c="RSA";else if(b.startsWith("PS"))c="PS";else{if(!b.startsWith("ES"))return d.Log.debug("ResponseValidator._filterByAlg: alg not supported: ",b),[];c="EC"}return d.Log.debug("ResponseValidator._filterByAlg: Looking for keys that match kty: ",c),a=a.filter(function(a){return a.kty===c}),d.Log.debug("ResponseValidator._filterByAlg: Number of keys that match kty: ",c,a.length),a},a.prototype._validateAccessToken=function(a){if(!a.profile)return d.Log.error("ResponseValidator._validateAccessToken: No profile loaded from id_token"),Promise.reject(new Error("No profile loaded from id_token"));if(!a.profile.at_hash)return d.Log.error("ResponseValidator._validateAccessToken: No at_hash in id_token"),Promise.reject(new Error("No at_hash in id_token"));if(!a.id_token)return d.Log.error("ResponseValidator._validateAccessToken: No id_token"),Promise.reject(new Error("No id_token"));var b=this._joseUtil.parseJwt(a.id_token);if(!b||!b.header)return d.Log.error("ResponseValidator._validateAccessToken: Failed to parse id_token",b),Promise.reject(new Error("Failed to parse id_token"));var c=b.header.alg;if(!c||5!==c.length)return d.Log.error("ResponseValidator._validateAccessToken: Unsupported alg:",c),Promise.reject(new Error("Unsupported alg: "+c));var e=c.substr(2,3);if(!e)return d.Log.error("ResponseValidator._validateAccessToken: Unsupported alg:",c,e),Promise.reject(new Error("Unsupported alg: "+c));if(256!==(e=parseInt(e))&&384!==e&&512!==e)return d.Log.error("ResponseValidator._validateAccessToken: Unsupported alg:",c,e),Promise.reject(new Error("Unsupported alg: "+c));var f="sha"+e,g=this._joseUtil.hashString(a.access_token,f);if(!g)return d.Log.error("ResponseValidator._validateAccessToken: access_token hash failed:",f),Promise.reject(new Error("Failed to validate at_hash"));var h=g.substr(0,g.length/2),i=this._joseUtil.hexToBase64Url(h);return i!==a.profile.at_hash?(d.Log.error("ResponseValidator._validateAccessToken: Failed to validate at_hash",i,a.profile.at_hash),Promise.reject(new Error("Failed to validate at_hash"))):(d.Log.debug("ResponseValidator._validateAccessToken: success"),Promise.resolve(a))},a}()},function(a,b,c){"use strict";Object.defineProperty(b,"__esModule",{value:!0});var d=c(0),e=c(18),f=c(6),g=c(5),h=c(31),i=c(30),j=c(12),k=c(3),l=c(20),m=c(19),n=c(9),o=c(8),p=c(10),q=c(1),r=c(13);b["default"]={Log:d.Log,OidcClient:e.OidcClient,OidcClientSettings:f.OidcClientSettings,WebStorageStateStore:g.WebStorageStateStore,InMemoryWebStorage:h.InMemoryWebStorage,UserManager:i.UserManager,AccessTokenEvents:j.AccessTokenEvents,MetadataService:k.MetadataService,CordovaPopupNavigator:l.CordovaPopupNavigator,CordovaIFrameNavigator:m.CordovaIFrameNavigator,CheckSessionIFrame:n.CheckSessionIFrame,TokenRevocationClient:o.TokenRevocationClient,SessionMonitor:p.SessionMonitor,Global:q.Global,User:r.User},a.exports=b["default"]}])})},{}],7:[function(a,b,c){function d(){throw new Error("setTimeout has not been defined")}function e(){throw new Error("clearTimeout has not been defined")}function f(a){if(l===setTimeout)return setTimeout(a,0);if((l===d||!l)&&setTimeout)return l=setTimeout,setTimeout(a,0);try{return l(a,0)}catch(b){try{return l.call(null,a,0)}catch(b){return l.call(this,a,0)}}}function g(a){if(m===clearTimeout)return clearTimeout(a);if((m===e||!m)&&clearTimeout)return m=clearTimeout,clearTimeout(a);try{return m(a)}catch(b){try{return m.call(null,a)}catch(b){return m.call(this,a)}}}function h(){q&&o&&(q=!1,o.length?p=o.concat(p):r=-1,p.length&&i())}function i(){if(!q){var a=f(h);q=!0;for(var b=p.length;b;){for(o=p,p=[];++r<b;)o&&o[r].run();r=-1,b=p.length}o=null,q=!1,g(a)}}function j(a,b){this.fun=a,this.array=b}function k(){}var l,m,n=b.exports={};!function(){try{l="function"==typeof setTimeout?setTimeout:d}catch(a){l=d}try{m="function"==typeof clearTimeout?clearTimeout:e}catch(a){m=e}}();var o,p=[],q=!1,r=-1;n.nextTick=function(a){var b=new Array(arguments.length-1);if(arguments.length>1)for(var c=1;c<arguments.length;c++)b[c-1]=arguments[c];p.push(new j(a,b)),1!==p.length||q||f(i)},j.prototype.run=function(){this.fun.apply(null,this.array)},n.title="browser",n.browser=!0,n.env={},n.argv=[],n.version="",n.versions={},n.on=k,n.addListener=k,n.once=k,n.off=k,n.removeListener=k,n.removeAllListeners=k,n.emit=k,n.prependListener=k,n.prependOnceListener=k,n.listeners=function(a){return[]},n.binding=function(a){throw new Error("process.binding is not supported")},n.cwd=function(){return"/"},n.chdir=function(a){throw new Error("process.chdir is not supported")},n.umask=function(){return 0}},{}],8:[function(a,b,c){(function(c){"use strict";function d(a,b,d,h,i){if("production"!==c.env.NODE_ENV)for(var j in a)if(a.hasOwnProperty(j)){var k;try{if("function"!=typeof a[j]){var l=Error((h||"React class")+": "+d+" type `"+j+"` is invalid; it must be a function, usually from the `prop-types` package, but received `"+typeof a[j]+"`.");throw l.name="Invariant Violation",l}k=a[j](b,j,h,d,null,f)}catch(m){k=m}if(!k||k instanceof Error||e((h||"React class")+": type specification of "+d+" `"+j+"` is invalid; the type checker function must return `null` or an `Error` but returned a "+typeof k+". You may have forgotten to pass an argument to the type checker creator (arrayOf, instanceOf, objectOf, oneOf, oneOfType, and shape all require an argument)."),k instanceof Error&&!(k.message in g)){g[k.message]=!0;var n=i?i():"";e("Failed "+d+" type: "+k.message+(null!=n?n:""))}}}var e=function(){};if("production"!==c.env.NODE_ENV){var f=a("./lib/ReactPropTypesSecret"),g={};e=function(a){var b="Warning: "+a;"undefined"!=typeof console&&console.error(b);try{throw new Error(b)}catch(c){}}}b.exports=d}).call(this,a("_process"))},{"./lib/ReactPropTypesSecret":12,_process:7}],9:[function(a,b,c){"use strict";function d(){}var e=a("./lib/ReactPropTypesSecret");b.exports=function(){function a(a,b,c,d,f,g){if(g!==e){var h=new Error("Calling PropTypes validators directly is not supported by the `prop-types` package. Use PropTypes.checkPropTypes() to call them. Read more at http://fb.me/use-check-prop-types");throw h.name="Invariant Violation",h}}function b(){return a}a.isRequired=a;var c={array:a,bool:a,func:a,number:a,object:a,string:a,symbol:a,any:a,arrayOf:b,element:a,instanceOf:b,node:a,objectOf:b,oneOf:b,oneOfType:b,shape:b,exact:b};return c.checkPropTypes=d,c.PropTypes=c,c}},{"./lib/ReactPropTypesSecret":12}],10:[function(a,b,c){(function(c){"use strict";function d(){return null}var e=a("object-assign"),f=a("./lib/ReactPropTypesSecret"),g=a("./checkPropTypes"),h=function(){};"production"!==c.env.NODE_ENV&&(h=function(a){var b="Warning: "+a;"undefined"!=typeof console&&console.error(b);try{throw new Error(b)}catch(c){}}),b.exports=function(a,b){function i(a){var b=a&&(D&&a[D]||a[E]);if("function"==typeof b)return b}function j(a,b){return a===b?0!==a||1/a===1/b:a!==a&&b!==b}function k(a){this.message=a,this.stack=""}function l(a){function d(d,i,j,l,m,n,o){if(l=l||F,n=n||j,o!==f){if(b){var p=new Error("Calling PropTypes validators directly is not supported by the `prop-types` package. Use `PropTypes.checkPropTypes()` to call them. Read more at http://fb.me/use-check-prop-types");throw p.name="Invariant Violation",p}if("production"!==c.env.NODE_ENV&&"undefined"!=typeof console){var q=l+":"+j;!e[q]&&g<3&&(h("You are manually calling a React.PropTypes validation function for the `"+n+"` prop on `"+l+"`. This is deprecated and will throw in the standalone `prop-types` package. You may be seeing this warning due to a third-party PropTypes library. See https://fb.me/react-warning-dont-call-proptypes for details."),e[q]=!0,g++)}}return null==i[j]?d?new k(null===i[j]?"The "+m+" `"+n+"` is marked as required "+("in `"+l+"`, but its value is `null`."):"The "+m+" `"+n+"` is marked as required in "+("`"+l+"`, but its value is `undefined`.")):null:a(i,j,l,m,n)}if("production"!==c.env.NODE_ENV)var e={},g=0;var i=d.bind(null,!1);return i.isRequired=d.bind(null,!0),i}function m(a){function b(b,c,d,e,f,g){var h=b[c],i=z(h);if(i!==a){var j=A(h);return new k("Invalid "+e+" `"+f+"` of type "+("`"+j+"` supplied to `"+d+"`, expected ")+("`"+a+"`."))}return null}return l(b)}function n(){return l(d)}function o(a){function b(b,c,d,e,g){if("function"!=typeof a)return new k("Property `"+g+"` of component `"+d+"` has invalid PropType notation inside arrayOf.");var h=b[c];if(!Array.isArray(h)){var i=z(h);return new k("Invalid "+e+" `"+g+"` of type "+("`"+i+"` supplied to `"+d+"`, expected an array."))}for(var j=0;j<h.length;j++){var l=a(h,j,d,e,g+"["+j+"]",f);if(l instanceof Error)return l}return null}return l(b)}function p(){function b(b,c,d,e,f){var g=b[c];if(!a(g)){var h=z(g);return new k("Invalid "+e+" `"+f+"` of type "+("`"+h+"` supplied to `"+d+"`, expected a single ReactElement."))}return null}return l(b)}function q(a){function b(b,c,d,e,f){if(!(b[c]instanceof a)){var g=a.name||F,h=C(b[c]);return new k("Invalid "+e+" `"+f+"` of type "+("`"+h+"` supplied to `"+d+"`, expected ")+("instance of `"+g+"`."))}return null}return l(b)}function r(a){function b(b,c,d,e,f){for(var g=b[c],h=0;h<a.length;h++)if(j(g,a[h]))return null;var i=JSON.stringify(a);return new k("Invalid "+e+" `"+f+"` of value `"+g+"` "+("supplied to `"+d+"`, expected one of "+i+"."))}return Array.isArray(a)?l(b):("production"!==c.env.NODE_ENV?h("Invalid argument supplied to oneOf, expected an instance of array."):void 0,d)}function s(a){function b(b,c,d,e,g){if("function"!=typeof a)return new k("Property `"+g+"` of component `"+d+"` has invalid PropType notation inside objectOf.");var h=b[c],i=z(h);if("object"!==i)return new k("Invalid "+e+" `"+g+"` of type "+("`"+i+"` supplied to `"+d+"`, expected an object."));for(var j in h)if(h.hasOwnProperty(j)){var l=a(h,j,d,e,g+"."+j,f);if(l instanceof Error)return l}return null}return l(b)}function t(a){function b(b,c,d,e,g){for(var h=0;h<a.length;h++){var i=a[h];if(null==i(b,c,d,e,g,f))return null}return new k("Invalid "+e+" `"+g+"` supplied to "+("`"+d+"`."))}if(!Array.isArray(a))return"production"!==c.env.NODE_ENV?h("Invalid argument supplied to oneOfType, expected an instance of array."):void 0,d;for(var e=0;e<a.length;e++){var g=a[e];if("function"!=typeof g)return h("Invalid argument supplied to oneOfType. Expected an array of check functions, but received "+B(g)+" at index "+e+"."),d}return l(b)}function u(){function a(a,b,c,d,e){return x(a[b])?null:new k("Invalid "+d+" `"+e+"` supplied to "+("`"+c+"`, expected a ReactNode."))}return l(a)}function v(a){function b(b,c,d,e,g){var h=b[c],i=z(h);if("object"!==i)return new k("Invalid "+e+" `"+g+"` of type `"+i+"` "+("supplied to `"+d+"`, expected `object`."));for(var j in a){var l=a[j];if(l){var m=l(h,j,d,e,g+"."+j,f);if(m)return m}}return null}return l(b)}function w(a){function b(b,c,d,g,h){var i=b[c],j=z(i);if("object"!==j)return new k("Invalid "+g+" `"+h+"` of type `"+j+"` "+("supplied to `"+d+"`, expected `object`."));var l=e({},b[c],a);for(var m in l){var n=a[m];if(!n)return new k("Invalid "+g+" `"+h+"` key `"+m+"` supplied to `"+d+"`.\nBad object: "+JSON.stringify(b[c],null,"  ")+"\nValid keys: "+JSON.stringify(Object.keys(a),null,"  "));var o=n(i,m,d,g,h+"."+m,f);if(o)return o}return null}return l(b)}function x(b){switch(typeof b){case"number":case"string":case"undefined":return!0;case"boolean":return!b;case"object":if(Array.isArray(b))return b.every(x);if(null===b||a(b))return!0;var c=i(b);if(!c)return!1;var d,e=c.call(b);if(c!==b.entries){for(;!(d=e.next()).done;)if(!x(d.value))return!1}else for(;!(d=e.next()).done;){var f=d.value;if(f&&!x(f[1]))return!1}return!0;default:return!1}}function y(a,b){return"symbol"===a||("Symbol"===b["@@toStringTag"]||"function"==typeof Symbol&&b instanceof Symbol)}function z(a){var b=typeof a;return Array.isArray(a)?"array":a instanceof RegExp?"object":y(b,a)?"symbol":b}function A(a){if("undefined"==typeof a||null===a)return""+a;var b=z(a);if("object"===b){if(a instanceof Date)return"date";if(a instanceof RegExp)return"regexp"}return b}function B(a){var b=A(a);switch(b){case"array":case"object":return"an "+b;case"boolean":case"date":case"regexp":return"a "+b;default:return b}}function C(a){return a.constructor&&a.constructor.name?a.constructor.name:F}var D="function"==typeof Symbol&&Symbol.iterator,E="@@iterator",F="<<anonymous>>",G={array:m("array"),bool:m("boolean"),func:m("function"),number:m("number"),object:m("object"),string:m("string"),symbol:m("symbol"),any:n(),arrayOf:o,element:p(),instanceOf:q,node:u(),objectOf:s,oneOf:r,oneOfType:t,shape:v,exact:w};return k.prototype=Error.prototype,G.checkPropTypes=g,G.PropTypes=G,G}}).call(this,a("_process"))},{"./checkPropTypes":8,"./lib/ReactPropTypesSecret":12,_process:7,"object-assign":5}],11:[function(a,b,c){(function(c){if("production"!==c.env.NODE_ENV){var d="function"==typeof Symbol&&Symbol["for"]&&Symbol["for"]("react.element")||60103,e=function(a){return"object"==typeof a&&null!==a&&a.$$typeof===d},f=!0;b.exports=a("./factoryWithTypeCheckers")(e,f)}else b.exports=a("./factoryWithThrowingShims")()}).call(this,a("_process"))},{"./factoryWithThrowingShims":9,"./factoryWithTypeCheckers":10,_process:7}],12:[function(a,b,c){"use strict";var d="SECRET_DO_NOT_PASS_THIS_OR_YOU_WILL_BE_FIRED";b.exports=d},{}],13:[function(a,b,c){(function(c){"use strict";"production"!==c.env.NODE_ENV&&!function(){function c(a){if(null===a||"undefined"==typeof a)return null;var b=ja&&a[ja]||a[ka];return"function"==typeof b?b:null}function d(a,b){var c=a.constructor,d=c&&(c.displayName||c.name)||"ReactClass",e=d+"."+b;pa[e]||(W(!1,"Can't call %s on a component that is not yet mounted. This is a no-op, but it might indicate a bug in your application. Instead, assign to `this.state` directly or define a `state = {};` class property with the desired state in the %s component.",b,d),pa[e]=!0)}function e(a,b,c){this.props=a,this.context=b,this.refs=V,this.updater=c||qa}function f(){}function g(a,b,c){this.props=a,this.context=b,this.refs=V,this.updater=c||qa}function h(){var a={current:null};return Object.seal(a),a}function i(a){if(wa.call(a,"ref")){var b=Object.getOwnPropertyDescriptor(a,"ref").get;if(b&&b.isReactWarning)return!1}return void 0!==a.ref}function j(a){if(wa.call(a,"key")){var b=Object.getOwnPropertyDescriptor(a,"key").get;if(b&&b.isReactWarning)return!1}return void 0!==a.key}function k(a,b){var c=function(){ya||(ya=!0,W(!1,"%s: `key` is not a prop. Trying to access it will result in `undefined` being returned. If you need to access the same value within the child component, you should pass it as a different prop. (https://fb.me/react-special-props)",b))};c.isReactWarning=!0,Object.defineProperty(a,"key",{get:c,configurable:!0})}function l(a,b){var c=function(){za||(za=!0,W(!1,"%s: `ref` is not a prop. Trying to access it will result in `undefined` being returned. If you need to access the same value within the child component, you should pass it as a different prop. (https://fb.me/react-special-props)",b))};c.isReactWarning=!0,Object.defineProperty(a,"ref",{get:c,configurable:!0})}function m(a,b,c){var d=void 0,e={},f=null,g=null,h=null,m=null;if(null!=b){i(b)&&(g=b.ref),j(b)&&(f=""+b.key),h=void 0===b.__self?null:b.__self,m=void 0===b.__source?null:b.__source;for(d in b)wa.call(b,d)&&!xa.hasOwnProperty(d)&&(e[d]=b[d])}var n=arguments.length-2;if(1===n)e.children=c;else if(n>1){for(var o=Array(n),p=0;p<n;p++)o[p]=arguments[p+2];Object.freeze&&Object.freeze(o),e.children=o}if(a&&a.defaultProps){var q=a.defaultProps;for(d in q)void 0===e[d]&&(e[d]=q[d])}if((f||g)&&("undefined"==typeof e.$$typeof||e.$$typeof!==_)){var r="function"==typeof a?a.displayName||a.name||"Unknown":a;f&&k(e,r),g&&l(e,r)}return Aa(a,f,g,h,m,va.current,e)}function n(a,b){var c=Aa(a.type,b,a.ref,a._self,a._source,a._owner,a.props);return c}function o(a,b,c){null===a||void 0===a?U(!1,"React.cloneElement(...): The argument must be a React element, but you passed %s.",a):void 0;var d=void 0,e=T({},a.props),f=a.key,g=a.ref,h=a._self,k=a._source,l=a._owner;if(null!=b){i(b)&&(g=b.ref,l=va.current),j(b)&&(f=""+b.key);var m=void 0;a.type&&a.type.defaultProps&&(m=a.type.defaultProps);for(d in b)wa.call(b,d)&&!xa.hasOwnProperty(d)&&(void 0===b[d]&&void 0!==m?e[d]=m[d]:e[d]=b[d])}var n=arguments.length-2;if(1===n)e.children=c;else if(n>1){for(var o=Array(n),p=0;p<n;p++)o[p]=arguments[p+2];e.children=o}return Aa(a.type,f,g,h,k,l,e)}function p(a){return"object"==typeof a&&null!==a&&a.$$typeof===_}function q(a){var b=/[=:]/g,c={"=":"=0",":":"=2"},d=(""+a).replace(b,function(a){return c[a]});return"$"+d}function r(a){return(""+a).replace(Fa,"$&/")}function s(a,b,c,d){if(Ha.length){var e=Ha.pop();return e.result=a,e.keyPrefix=b,e.func=c,e.context=d,e.count=0,e}return{result:a,keyPrefix:b,func:c,context:d,count:0}}function t(a){a.result=null,a.keyPrefix=null,a.func=null,a.context=null,a.count=0,Ha.length<Ga&&Ha.push(a)}function u(a,b,d,e){var f=typeof a;"undefined"!==f&&"boolean"!==f||(a=null);var g=!1;if(null===a)g=!0;else switch(f){case"string":case"number":g=!0;break;case"object":switch(a.$$typeof){case _:case aa:g=!0}}if(g)return d(e,a,""===b?Ca+w(a,0):b),1;var h=void 0,i=void 0,j=0,k=""===b?Ca:b+Da;if(Array.isArray(a))for(var l=0;l<a.length;l++)h=a[l],i=k+w(h,l),j+=u(h,i,d,e);else{var m=c(a);if("function"==typeof m){m===a.entries&&(Ea?void 0:W(!1,"Using Maps as children is unsupported and will likely yield unexpected results. Convert it to a sequence/iterable of keyed ReactElements instead.%s",Ba.getStackAddendum()),Ea=!0);for(var n=m.call(a),o=void 0,p=0;!(o=n.next()).done;)h=o.value,i=k+w(h,p++),j+=u(h,i,d,e)}else if("object"===f){var q="";q=" If you meant to render a collection of children, use an array instead."+Ba.getStackAddendum();var r=""+a;U(!1,"Objects are not valid as a React child (found: %s).%s","[object Object]"===r?"object with keys {"+Object.keys(a).join(", ")+"}":r,q)}}return j}function v(a,b,c){return null==a?0:u(a,"",b,c)}function w(a,b){return"object"==typeof a&&null!==a&&null!=a.key?q(a.key):b.toString(36)}function x(a,b,c){var d=a.func,e=a.context;d.call(e,b,a.count++)}function y(a,b,c){if(null==a)return a;var d=s(null,null,b,c);v(a,x,d),t(d)}function z(a,b,c){var d=a.result,e=a.keyPrefix,f=a.func,g=a.context,h=f.call(g,b,a.count++);Array.isArray(h)?A(h,d,c,X.thatReturnsArgument):null!=h&&(p(h)&&(h=n(h,e+(!h.key||b&&b.key===h.key?"":r(h.key)+"/")+c)),d.push(h))}function A(a,b,c,d,e){var f="";null!=c&&(f=r(c)+"/");var g=s(b,f,d,e);v(a,z,g),t(g)}function B(a,b,c){if(null==a)return a;var d=[];return A(a,d,null,b,c),d}function C(a){return v(a,X.thatReturnsNull,null)}function D(a){var b=[];return A(a,b,null,X.thatReturnsArgument),b}function E(a){return p(a)?void 0:U(!1,"React.Children.only expected to receive a single React element child."),a}function F(a,b){void 0===b?b=null:null!==b&&"function"!=typeof b?W(!1,"createContext: Expected the optional second argument to be a function. Instead received: %s",b):void 0;var c={$$typeof:fa,_calculateChangedBits:b,_defaultValue:a,_currentValue:a,_currentValue2:a,_changedBits:0,_changedBits2:0,Provider:null,Consumer:null};return c.Provider={$$typeof:ea,_context:c},c.Consumer=c,c._currentRenderer=null,c._currentRenderer2=null,c}function G(a){return"function"!=typeof a?W(!1,"forwardRef requires a render function but was given %s.",null===a?"null":typeof a):void 0,null!=a&&(null!=a.defaultProps||null!=a.propTypes?W(!1,"forwardRef render functions do not support propTypes or defaultProps. Did you accidentally pass a React component?"):void 0),{$$typeof:ha,render:a}}function H(a){return"string"==typeof a||"function"==typeof a||a===ba||a===ga||a===da||a===ca||a===ia||"object"==typeof a&&null!==a&&(a.$$typeof===ea||a.$$typeof===fa||a.$$typeof===ha)}function I(a){var b=a.type;if("function"==typeof b)return b.displayName||b.name;if("string"==typeof b)return b;switch(b){case ga:return"AsyncMode";case fa:return"Context.Consumer";case ba:return"ReactFragment";case aa:return"ReactPortal";case da:return"Profiler("+a.pendingProps.id+")";case ea:return"Context.Provider";case ca:return"StrictMode";case ia:return"Timeout"}if("object"==typeof b&&null!==b)switch(b.$$typeof){case ha:var c=b.render.displayName||b.render.name||"";return""!==c?"ForwardRef("+c+")":"ForwardRef"}return null}function J(){if(va.current){var a=I(va.current);if(a)return"\n\nCheck the render method of `"+a+"`."}return""}function K(a){if(null!==a&&void 0!==a&&void 0!==a.__source){var b=a.__source,c=b.fileName.replace(/^.*[\\\/]/,""),d=b.lineNumber;return"\n\nCheck your code at "+c+":"+d+"."}return""}function L(a){var b=J();if(!b){var c="string"==typeof a?a:a.displayName||a.name;c&&(b="\n\nCheck the top-level render call using <"+c+">.")}return b}function M(a,b){if(a._store&&!a._store.validated&&null==a.key){a._store.validated=!0;var c=L(b);if(!Na[c]){Na[c]=!0;var d="";a&&a._owner&&a._owner!==va.current&&(d=" It was passed a child from "+I(a._owner)+"."),Ja=a,W(!1,'Each child in an array or iterator should have a unique "key" prop.%s%s See https://fb.me/react-warning-keys for more information.%s',c,d,Ma()),Ja=null}}}function N(a,b){if("object"==typeof a)if(Array.isArray(a))for(var d=0;d<a.length;d++){var e=a[d];p(e)&&M(e,b)}else if(p(a))a._store&&(a._store.validated=!0);else if(a){var f=c(a);if("function"==typeof f&&f!==a.entries)for(var g=f.call(a),h=void 0;!(h=g.next()).done;)p(h.value)&&M(h.value,b)}}function O(a){var b=a.type,c=void 0,d=void 0;if("function"==typeof b)c=b.displayName||b.name,d=b.propTypes;else{if("object"!=typeof b||null===b||b.$$typeof!==ha)return;var e=b.render.displayName||b.render.name||"";c=""!==e?"ForwardRef("+e+")":"ForwardRef",d=b.propTypes}d?(Ja=a,Y(d,a.props,"prop",c,Ma),Ja=null):void 0===b.PropTypes||Ka||(Ka=!0,W(!1,"Component %s declared `PropTypes` instead of `propTypes`. Did you misspell the property assignment?",c||"Unknown")),"function"==typeof b.getDefaultProps&&(b.getDefaultProps.isReactClassApproved?void 0:W(!1,"getDefaultProps is only used on classic React.createClass definitions. Use a static property named `defaultProps` instead."))}function P(a){Ja=a;for(var b=Object.keys(a.props),c=0;c<b.length;c++){var d=b[c];if("children"!==d&&"key"!==d){W(!1,"Invalid prop `%s` supplied to `React.Fragment`. React.Fragment can only have `key` and `children` props.%s",d,Ma());break}}null!==a.ref&&W(!1,"Invalid attribute `ref` supplied to `React.Fragment`.%s",Ma()),Ja=null}function Q(a,b,c){var d=H(a);if(!d){var e="";(void 0===a||"object"==typeof a&&null!==a&&0===Object.keys(a).length)&&(e+=" You likely forgot to export your component from the file it's defined in, or you might have mixed up default and named imports.");var f=K(b);e+=f?f:J(),e+=Ma()||"";var g=void 0;g=null===a?"null":Array.isArray(a)?"array":typeof a,W(!1,"React.createElement: type is invalid -- expected a string (for built-in components) or a class/function (for composite components) but got: %s.%s",g,e)}var h=m.apply(this,arguments);if(null==h)return h;if(d)for(var i=2;i<arguments.length;i++)N(arguments[i],a);return a===ba?P(h):O(h),h}function R(a){var b=Q.bind(null,a);return b.type=a,Object.defineProperty(b,"type",{enumerable:!1,get:function(){return oa(!1,"Factory.type is deprecated. Access the class directly before passing it to createFactory."),Object.defineProperty(this,"type",{value:a}),a}}),b}function S(a,b,c){for(var d=o.apply(this,arguments),e=2;e<arguments.length;e++)N(arguments[e],d.type);return O(d),d}var T=a("object-assign"),U=a("fbjs/lib/invariant"),V=a("fbjs/lib/emptyObject"),W=a("fbjs/lib/warning"),X=a("fbjs/lib/emptyFunction"),Y=a("prop-types/checkPropTypes"),Z="16.4.1",$="function"==typeof Symbol&&Symbol["for"],_=$?Symbol["for"]("react.element"):60103,aa=$?Symbol["for"]("react.portal"):60106,ba=$?Symbol["for"]("react.fragment"):60107,ca=$?Symbol["for"]("react.strict_mode"):60108,da=$?Symbol["for"]("react.profiler"):60114,ea=$?Symbol["for"]("react.provider"):60109,fa=$?Symbol["for"]("react.context"):60110,ga=$?Symbol["for"]("react.async_mode"):60111,ha=$?Symbol["for"]("react.forward_ref"):60112,ia=$?Symbol["for"]("react.timeout"):60113,ja="function"==typeof Symbol&&Symbol.iterator,ka="@@iterator",la=!1,ma=function(){},na=function(a){for(var b=arguments.length,c=Array(b>1?b-1:0),d=1;d<b;d++)c[d-1]=arguments[d];var e=0,f="Warning: "+a.replace(/%s/g,function(){return c[e++]});"undefined"!=typeof console&&console.warn(f);try{throw new Error(f)}catch(g){}};ma=function(a,b){if(void 0===b)throw new Error("`warning(condition, format, ...args)` requires a warning message argument");if(!a){for(var c=arguments.length,d=Array(c>2?c-2:0),e=2;e<c;e++)d[e-2]=arguments[e];na.apply(void 0,[b].concat(d))}};var oa=ma,pa={},qa={isMounted:function(a){return!1},enqueueForceUpdate:function(a,b,c){d(a,"forceUpdate")},enqueueReplaceState:function(a,b,c,e){d(a,"replaceState")},enqueueSetState:function(a,b,c,e){d(a,"setState")}};e.prototype.isReactComponent={},e.prototype.setState=function(a,b){"object"!=typeof a&&"function"!=typeof a&&null!=a?U(!1,"setState(...): takes an object of state variables to update or a function which returns an object of state variables."):void 0,this.updater.enqueueSetState(this,a,b,"setState")},e.prototype.forceUpdate=function(a){this.updater.enqueueForceUpdate(this,a,"forceUpdate")};var ra={isMounted:["isMounted","Instead, make sure to clean up subscriptions and pending requests in componentWillUnmount to prevent memory leaks."],replaceState:["replaceState","Refactor your code to use setState instead (see https://github.com/facebook/react/issues/3236)."]},sa=function(a,b){Object.defineProperty(e.prototype,a,{get:function(){oa(!1,"%s(...) is deprecated in plain JavaScript React classes. %s",b[0],b[1])}})};for(var ta in ra)ra.hasOwnProperty(ta)&&sa(ta,ra[ta]);f.prototype=e.prototype;var ua=g.prototype=new f;ua.constructor=g,T(ua,e.prototype),ua.isPureReactComponent=!0;var va={current:null},wa=Object.prototype.hasOwnProperty,xa={key:!0,ref:!0,__self:!0,__source:!0},ya=void 0,za=void 0,Aa=function(a,b,c,d,e,f,g){var h={$$typeof:_,type:a,key:b,ref:c,props:g,_owner:f};return h._store={},Object.defineProperty(h._store,"validated",{configurable:!1,enumerable:!1,writable:!0,value:!1}),Object.defineProperty(h,"_self",{configurable:!1,enumerable:!1,writable:!1,value:d}),Object.defineProperty(h,"_source",{configurable:!1,enumerable:!1,writable:!1,value:e}),Object.freeze&&(Object.freeze(h.props),Object.freeze(h)),h},Ba={};Ba.getCurrentStack=null,Ba.getStackAddendum=function(){var a=Ba.getCurrentStack;return a?a():null};var Ca=".",Da=":",Ea=!1,Fa=/\/+/g,Ga=10,Ha=[],Ia=function(a,b,c){return"\n    in "+(a||"Unknown")+(b?" (at "+b.fileName.replace(/^.*[\\\/]/,"")+":"+b.lineNumber+")":c?" (created by "+c+")":"")},Ja=void 0,Ka=void 0,La=function(){},Ma=function(){};Ja=null,Ka=!1,La=function(a){if(null==a)return"#empty";if("string"==typeof a||"number"==typeof a)return"#text";if("string"==typeof a.type)return a.type;var b=a.type;if(b===ba)return"React.Fragment";if("object"==typeof b&&null!==b&&b.$$typeof===ha){var c=b.render.displayName||b.render.name||"";return""!==c?"ForwardRef("+c+")":"ForwardRef"}return b.displayName||b.name||"Unknown"},Ma=function(){var a="";if(Ja){var b=La(Ja),c=Ja._owner;a+=Ia(b,Ja._source,c&&I(c))}return a+=Ba.getStackAddendum()||""};var Na={},Oa={Children:{map:B,forEach:y,count:C,toArray:D,only:E},createRef:h,Component:e,PureComponent:g,createContext:F,forwardRef:G,Fragment:ba,StrictMode:ca,unstable_AsyncMode:ga,unstable_Profiler:da,createElement:Q,cloneElement:S,createFactory:R,isValidElement:p,version:Z,__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED:{ReactCurrentOwner:va,assign:T}};la&&(Oa.Timeout=ia),T(Oa.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED,{ReactDebugCurrentFrame:Ba,ReactComponentTreeHook:{}});var Pa=Object.freeze({"default":Oa}),Qa=Pa&&Oa||Pa,Ra=Qa["default"]?Qa["default"]:Qa;b.exports=Ra}()}).call(this,a("_process"))},{_process:7,"fbjs/lib/emptyFunction":1,"fbjs/lib/emptyObject":2,"fbjs/lib/invariant":3,"fbjs/lib/warning":4,"object-assign":5,"prop-types/checkPropTypes":8}],14:[function(a,b,c){"use strict";function d(a){for(var b=arguments.length-1,c="https://reactjs.org/docs/error-decoder.html?invariant="+a,d=0;d<b;d++)c+="&args[]="+encodeURIComponent(arguments[d+1]);s(!1,"Minified React error #"+a+"; visit %s for the full message or use the non-minified dev environment for full errors and additional helpful warnings. ",c)}function e(a,b,c){this.props=a,this.context=b,this.refs=t,this.updater=c||G}function f(){}function g(a,b,c){this.props=a,this.context=b,this.refs=t,this.updater=c||G}function h(a,b,c){var d=void 0,e={},f=null,g=null;if(null!=b)for(d in void 0!==b.ref&&(g=b.ref),void 0!==b.key&&(f=""+b.key),b)J.call(b,d)&&!K.hasOwnProperty(d)&&(e[d]=b[d]);var h=arguments.length-2;if(1===h)e.children=c;else if(1<h){for(var i=Array(h),j=0;j<h;j++)i[j]=arguments[j+2];e.children=i}if(a&&a.defaultProps)for(d in h=a.defaultProps)void 0===e[d]&&(e[d]=h[d]);
return{$$typeof:w,type:a,key:f,ref:g,props:e,_owner:I.current}}function i(a){return"object"==typeof a&&null!==a&&a.$$typeof===w}function j(a){var b={"=":"=0",":":"=2"};return"$"+(""+a).replace(/[=:]/g,function(a){return b[a]})}function k(a,b,c,d){if(M.length){var e=M.pop();return e.result=a,e.keyPrefix=b,e.func=c,e.context=d,e.count=0,e}return{result:a,keyPrefix:b,func:c,context:d,count:0}}function l(a){a.result=null,a.keyPrefix=null,a.func=null,a.context=null,a.count=0,10>M.length&&M.push(a)}function m(a,b,c,e){var f=typeof a;"undefined"!==f&&"boolean"!==f||(a=null);var g=!1;if(null===a)g=!0;else switch(f){case"string":case"number":g=!0;break;case"object":switch(a.$$typeof){case w:case x:g=!0}}if(g)return c(e,a,""===b?"."+n(a,0):b),1;if(g=0,b=""===b?".":b+":",Array.isArray(a))for(var h=0;h<a.length;h++){f=a[h];var i=b+n(f,h);g+=m(f,i,c,e)}else if(null===a||"undefined"==typeof a?i=null:(i=F&&a[F]||a["@@iterator"],i="function"==typeof i?i:null),"function"==typeof i)for(a=i.call(a),h=0;!(f=a.next()).done;)f=f.value,i=b+n(f,h++),g+=m(f,i,c,e);else"object"===f&&(c=""+a,d("31","[object Object]"===c?"object with keys {"+Object.keys(a).join(", ")+"}":c,""));return g}function n(a,b){return"object"==typeof a&&null!==a&&null!=a.key?j(a.key):b.toString(36)}function o(a,b){a.func.call(a.context,b,a.count++)}function p(a,b,c){var d=a.result,e=a.keyPrefix;a=a.func.call(a.context,b,a.count++),Array.isArray(a)?q(a,d,c,u.thatReturnsArgument):null!=a&&(i(a)&&(b=e+(!a.key||b&&b.key===a.key?"":(""+a.key).replace(L,"$&/")+"/")+c,a={$$typeof:w,type:a.type,key:b,ref:a.ref,props:a.props,_owner:a._owner}),d.push(a))}function q(a,b,c,d,e){var f="";null!=c&&(f=(""+c).replace(L,"$&/")+"/"),b=k(b,f,d,e),null==a||m(a,"",p,b),l(b)}var r=a("object-assign"),s=a("fbjs/lib/invariant"),t=a("fbjs/lib/emptyObject"),u=a("fbjs/lib/emptyFunction"),v="function"==typeof Symbol&&Symbol["for"],w=v?Symbol["for"]("react.element"):60103,x=v?Symbol["for"]("react.portal"):60106,y=v?Symbol["for"]("react.fragment"):60107,z=v?Symbol["for"]("react.strict_mode"):60108,A=v?Symbol["for"]("react.profiler"):60114,B=v?Symbol["for"]("react.provider"):60109,C=v?Symbol["for"]("react.context"):60110,D=v?Symbol["for"]("react.async_mode"):60111,E=v?Symbol["for"]("react.forward_ref"):60112;v&&Symbol["for"]("react.timeout");var F="function"==typeof Symbol&&Symbol.iterator,G={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}};e.prototype.isReactComponent={},e.prototype.setState=function(a,b){"object"!=typeof a&&"function"!=typeof a&&null!=a?d("85"):void 0,this.updater.enqueueSetState(this,a,b,"setState")},e.prototype.forceUpdate=function(a){this.updater.enqueueForceUpdate(this,a,"forceUpdate")},f.prototype=e.prototype;var H=g.prototype=new f;H.constructor=g,r(H,e.prototype),H.isPureReactComponent=!0;var I={current:null},J=Object.prototype.hasOwnProperty,K={key:!0,ref:!0,__self:!0,__source:!0},L=/\/+/g,M=[],N={Children:{map:function(a,b,c){if(null==a)return a;var d=[];return q(a,d,null,b,c),d},forEach:function(a,b,c){return null==a?a:(b=k(null,null,b,c),null==a||m(a,"",o,b),void l(b))},count:function(a){return null==a?0:m(a,"",u.thatReturnsNull,null)},toArray:function(a){var b=[];return q(a,b,null,u.thatReturnsArgument),b},only:function(a){return i(a)?void 0:d("143"),a}},createRef:function(){return{current:null}},Component:e,PureComponent:g,createContext:function(a,b){return void 0===b&&(b=null),a={$$typeof:C,_calculateChangedBits:b,_defaultValue:a,_currentValue:a,_currentValue2:a,_changedBits:0,_changedBits2:0,Provider:null,Consumer:null},a.Provider={$$typeof:B,_context:a},a.Consumer=a},forwardRef:function(a){return{$$typeof:E,render:a}},Fragment:y,StrictMode:z,unstable_AsyncMode:D,unstable_Profiler:A,createElement:h,cloneElement:function(a,b,c){null===a||void 0===a?d("267",a):void 0;var e=void 0,f=r({},a.props),g=a.key,h=a.ref,i=a._owner;if(null!=b){void 0!==b.ref&&(h=b.ref,i=I.current),void 0!==b.key&&(g=""+b.key);var j=void 0;a.type&&a.type.defaultProps&&(j=a.type.defaultProps);for(e in b)J.call(b,e)&&!K.hasOwnProperty(e)&&(f[e]=void 0===b[e]&&void 0!==j?j[e]:b[e])}if(e=arguments.length-2,1===e)f.children=c;else if(1<e){j=Array(e);for(var k=0;k<e;k++)j[k]=arguments[k+2];f.children=j}return{$$typeof:w,type:a.type,key:g,ref:h,props:f,_owner:i}},createFactory:function(a){var b=h.bind(null,a);return b.type=a,b},isValidElement:i,version:"16.4.1",__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED:{ReactCurrentOwner:I,assign:r}},O={"default":N},P=O&&N||O;b.exports=P["default"]?P["default"]:P},{"fbjs/lib/emptyFunction":1,"fbjs/lib/emptyObject":2,"fbjs/lib/invariant":3,"object-assign":5}],15:[function(a,b,c){(function(c){"use strict";"production"===c.env.NODE_ENV?b.exports=a("./cjs/react.production.min.js"):b.exports=a("./cjs/react.development.js")}).call(this,a("_process"))},{"./cjs/react.development.js":13,"./cjs/react.production.min.js":14,_process:7}],16:[function(a,b,c){"use strict";function d(a){return a&&a.__esModule?a:{"default":a}}function e(a,b){if(!(a instanceof b))throw new TypeError("Cannot call a class as a function")}function f(a,b){if(!a)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!b||"object"!=typeof b&&"function"!=typeof b?a:b}function g(a,b){if("function"!=typeof b&&null!==b)throw new TypeError("Super expression must either be null or a function, not "+typeof b);a.prototype=Object.create(b&&b.prototype,{constructor:{value:a,enumerable:!1,writable:!0,configurable:!0}}),b&&(Object.setPrototypeOf?Object.setPrototypeOf(a,b):a.__proto__=b)}Object.defineProperty(c,"__esModule",{value:!0});var h=function(){function a(a,b){for(var c=0;c<b.length;c++){var d=b[c];d.enumerable=d.enumerable||!1,d.configurable=!0,"value"in d&&(d.writable=!0),Object.defineProperty(a,d.key,d)}}return function(b,c,d){return c&&a(b.prototype,c),d&&a(b,d),b}}(),i=a("react"),j=d(i),k=a("../containers/Auth"),l=d(k),m=a("../containers/OIDCProvider"),n=d(m),o=a("../services/oidc"),p=d(o),q=function(a){function b(){return e(this,b),f(this,(b.__proto__||Object.getPrototypeOf(b)).apply(this,arguments))}return g(b,a),h(b,[{key:"componentDidMount",value:function(){console.log("Mounting"),this.props.signIn()}},{key:"render",value:function(){return j["default"].createElement("div",null)}}]),b}(j["default"].Component),r=function(a){function b(){return e(this,b),f(this,(b.__proto__||Object.getPrototypeOf(b)).apply(this,arguments))}return g(b,a),h(b,[{key:"render",value:function(){return j["default"].createElement(n["default"],{oidc:p["default"]},j["default"].createElement(l["default"],null,function(a){return j["default"].createElement(q,a)}))}}]),b}(j["default"].Component);c["default"]=r},{"../containers/Auth":18,"../containers/OIDCProvider":20,"../services/oidc":24,react:15}],17:[function(a,b,c){"use strict";function d(a){return a&&a.__esModule?a:{"default":a}}function e(a,b){if(!(a instanceof b))throw new TypeError("Cannot call a class as a function")}function f(a,b){if(!a)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!b||"object"!=typeof b&&"function"!=typeof b?a:b}function g(a,b){if("function"!=typeof b&&null!==b)throw new TypeError("Super expression must either be null or a function, not "+typeof b);a.prototype=Object.create(b&&b.prototype,{constructor:{value:a,enumerable:!1,writable:!0,configurable:!0}}),b&&(Object.setPrototypeOf?Object.setPrototypeOf(a,b):a.__proto__=b)}Object.defineProperty(c,"__esModule",{value:!0});var h=Object.assign||function(a){for(var b=1;b<arguments.length;b++){var c=arguments[b];for(var d in c)Object.prototype.hasOwnProperty.call(c,d)&&(a[d]=c[d])}return a},i=function(){function a(a,b){for(var c=0;c<b.length;c++){var d=b[c];d.enumerable=d.enumerable||!1,d.configurable=!0,"value"in d&&(d.writable=!0),Object.defineProperty(a,d.key,d)}}return function(b,c,d){return c&&a(b.prototype,c),d&&a(b,d),b}}(),j=a("react"),k=d(j),l=a("prop-types"),m=d(l),n={uid:"",isAnonymous:null},o=function(a){function b(){var a,c,d,g;e(this,b);for(var h=arguments.length,i=Array(h),j=0;j<h;j++)i[j]=arguments[j];return c=d=f(this,(a=b.__proto__||Object.getPrototypeOf(b)).call.apply(a,[this].concat(i))),d.state=n,d.handleSignIn=function(a){var b=d.context.oidc.userManager;b.signinPopup()},d.handleSignOut=function(){var a=d.context.firebase.auth;return a().signOut()},g=c,f(d,g)}return g(b,a),i(b,[{key:"componentDidMount",value:function(){this.context.oidc.userManager}},{key:"componentWillUnmount",value:function(){this.stopAuthListener()}},{key:"signIn",value:function(a){var b=a.uid,c=a.isAnonymous;this.setState({uid:b,isAnonymous:c})}},{key:"signOut",value:function(){this.setState(n)}},{key:"render",value:function(){var a=!(!this.state.uid||this.state.isAnonymous);return this.props.children(h({},this.state,{signIn:this.handleSignIn,signOut:this.handleSignOut,isAuthed:a}))}}]),b}(k["default"].Component);o.propTypes={children:m["default"].func.isRequired},o.contextTypes={oidc:m["default"].object},c["default"]=o},{"prop-types":11,react:15}],18:[function(a,b,c){"use strict";function d(a){return a&&a.__esModule?a:{"default":a}}function e(a,b){if(!(a instanceof b))throw new TypeError("Cannot call a class as a function")}function f(a,b){if(!a)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!b||"object"!=typeof b&&"function"!=typeof b?a:b}function g(a,b){if("function"!=typeof b&&null!==b)throw new TypeError("Super expression must either be null or a function, not "+typeof b);a.prototype=Object.create(b&&b.prototype,{constructor:{value:a,enumerable:!1,writable:!0,configurable:!0}}),b&&(Object.setPrototypeOf?Object.setPrototypeOf(a,b):a.__proto__=b)}Object.defineProperty(c,"__esModule",{value:!0});var h=Object.assign||function(a){for(var b=1;b<arguments.length;b++){var c=arguments[b];for(var d in c)Object.prototype.hasOwnProperty.call(c,d)&&(a[d]=c[d])}return a},i=function(){function a(a,b){for(var c=0;c<b.length;c++){var d=b[c];d.enumerable=d.enumerable||!1,d.configurable=!0,"value"in d&&(d.writable=!0),Object.defineProperty(a,d.key,d)}}return function(b,c,d){return c&&a(b.prototype,c),d&&a(b,d),b}}(),j=a("react"),k=d(j),l=a("prop-types"),m=d(l),n={uid:"",isAnonymous:null},o=function(a){function b(){var a,c,d,g;e(this,b);for(var h=arguments.length,i=Array(h),j=0;j<h;j++)i[j]=arguments[j];return c=d=f(this,(a=b.__proto__||Object.getPrototypeOf(b)).call.apply(a,[this].concat(i))),d.state=n,d.handleSignIn=function(a){var b=d.context.oidc.userManager;b.signinPopup()},d.handleSignOut=function(){var a=d.context.firebase.auth;return a().signOut()},g=c,f(d,g)}return g(b,a),i(b,[{key:"componentDidMount",value:function(){var a=this.context.oidc.userManager;console.log(a)}},{key:"componentWillUnmount",value:function(){}},{key:"signIn",value:function(a){var b=a.uid,c=a.isAnonymous;this.setState({uid:b,isAnonymous:c})}},{key:"signOut",value:function(){this.setState(n)}},{key:"render",value:function(){var a=!(!this.state.uid||this.state.isAnonymous);return this.props.children(h({},this.state,{signIn:this.handleSignIn,signOut:this.handleSignOut,isAuthed:a}))}}]),b}(k["default"].Component);o.propTypes={children:m["default"].func.isRequired},o.contextTypes={oidc:m["default"].object},c["default"]=o},{"prop-types":11,react:15}],19:[function(a,b,c){"use strict";function d(a){return a&&a.__esModule?a:{"default":a}}function e(a,b){if(!(a instanceof b))throw new TypeError("Cannot call a class as a function")}function f(a,b){if(!a)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!b||"object"!=typeof b&&"function"!=typeof b?a:b}function g(a,b){if("function"!=typeof b&&null!==b)throw new TypeError("Super expression must either be null or a function, not "+typeof b);a.prototype=Object.create(b&&b.prototype,{constructor:{value:a,enumerable:!1,writable:!0,configurable:!0}}),b&&(Object.setPrototypeOf?Object.setPrototypeOf(a,b):a.__proto__=b)}Object.defineProperty(c,"__esModule",{value:!0});var h=function(){function a(a,b){for(var c=0;c<b.length;c++){var d=b[c];d.enumerable=d.enumerable||!1,d.configurable=!0,"value"in d&&(d.writable=!0),Object.defineProperty(a,d.key,d)}}return function(b,c,d){return c&&a(b.prototype,c),d&&a(b,d),b}}(),i=a("react"),j=d(i),k=a("prop-types"),l=d(k),m=function(a){function b(){return e(this,b),f(this,(b.__proto__||Object.getPrototypeOf(b)).apply(this,arguments))}return g(b,a),h(b,[{key:"getChildContext",value:function(){var a=this.props.oidc;return{oidc:a}}},{key:"render",value:function(){var a=this.props.children;return a}}]),b}(j["default"].Component);m.propTypes={children:l["default"].element,oidc:l["default"].object.isRequired},m.childContextTypes={oidc:l["default"].object},c["default"]=m},{"prop-types":11,react:15}],20:[function(a,b,c){"use strict";function d(a){return a&&a.__esModule?a:{"default":a}}function e(a,b){if(!(a instanceof b))throw new TypeError("Cannot call a class as a function")}function f(a,b){if(!a)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!b||"object"!=typeof b&&"function"!=typeof b?a:b}function g(a,b){if("function"!=typeof b&&null!==b)throw new TypeError("Super expression must either be null or a function, not "+typeof b);a.prototype=Object.create(b&&b.prototype,{constructor:{value:a,enumerable:!1,writable:!0,configurable:!0}}),b&&(Object.setPrototypeOf?Object.setPrototypeOf(a,b):a.__proto__=b)}Object.defineProperty(c,"__esModule",{value:!0});var h=function(){function a(a,b){for(var c=0;c<b.length;c++){var d=b[c];d.enumerable=d.enumerable||!1,d.configurable=!0,"value"in d&&(d.writable=!0),Object.defineProperty(a,d.key,d)}}return function(b,c,d){return c&&a(b.prototype,c),d&&a(b,d),b}}(),i=a("react"),j=d(i),k=a("prop-types"),l=d(k),m=function(a){function b(){return e(this,b),f(this,(b.__proto__||Object.getPrototypeOf(b)).apply(this,arguments))}return g(b,a),h(b,[{key:"getChildContext",value:function(){var a=this.props.oidc;return{oidc:a}}},{key:"render",value:function(){var a=this.props.children;return a}}]),b}(j["default"].Component);m.propTypes={children:l["default"].element,oidc:l["default"].object.isRequired},m.childContextTypes={oidc:l["default"].object},c["default"]=m},{"prop-types":11,react:15}],21:[function(a,b,c){"use strict";function d(a){return a&&a.__esModule?a:{"default":a}}var e=a("./containers/Auth"),f=d(e),g=a("./containers/OIDCProvider"),h=d(g),i=a("./services/oidc"),j=d(i);window.OAuth={Auth:f["default"],OIDCProvider:h["default"],oidc:j["default"],login:function(){return console.log("whatever")}}},{"./containers/Auth":18,"./containers/OIDCProvider":20,"./services/oidc":24}],22:[function(a,b,c){"use strict";function d(a){return a&&a.__esModule?a:{"default":a}}var e=Object.assign||function(a){for(var b=1;b<arguments.length;b++){var c=arguments[b];for(var d in c)Object.prototype.hasOwnProperty.call(c,d)&&(a[d]=c[d])}return a},f=a("react"),g=(d(f),a("./containers/OIDCProvider")),h=d(g),i=a("./services/oidc"),j=d(i),k=a("./components/dialog"),l=d(k);window.OAuth={Dialog:l["default"],OIDCProvider:h["default"],oidc:j["default"],login:function(a){console.log("Opening happens multiple times"),pydio.UI.openComponentInModal("OAuth","Dialog",e({},a,{blur:!0}))}}},{"./components/dialog":16,"./containers/OIDCProvider":20,"./services/oidc":24,react:15}],23:[function(a,b,c){"use strict";function d(a,b){if(!(a instanceof b))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(c,"__esModule",{value:!0});var e=a("oidc-client"),f={authority:"http://127.0.0.1:62134/dex",client_id:"cells-front",redirect_uri:"http://127.0.0.1:5555/callback",response_type:"code",scope:"openid"},g=function h(){d(this,h),this.userManager=new e.UserManager(f)};c["default"]=new g},{"oidc-client":6}],24:[function(a,b,c){"use strict";function d(a,b){if(!(a instanceof b))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(c,"__esModule",{value:!0});var e=a("oidc-client"),f={authority:"http://127.0.0.1:62134/dex",client_id:"cells-front",redirect_uri:"http://127.0.0.1:5555/callback",response_type:"code",scope:"openid"},g=function h(){d(this,h),this.userManager=new e.UserManager(f)};c["default"]=new g},{"oidc-client":6}]},{},[16,17,18,19,20,21,22,23,24]);
//# sourceMappingURL=sourceMap.map